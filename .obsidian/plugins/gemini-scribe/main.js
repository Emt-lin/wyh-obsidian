/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Xp=Object.create;var ei=Object.defineProperty;var em=Object.getOwnPropertyDescriptor;var tm=Object.getOwnPropertyNames;var nm=Object.getPrototypeOf,rm=Object.prototype.hasOwnProperty;var im=(t,e,n)=>e in t?ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),sm=(t,e)=>{for(var n in e)ei(t,n,{get:e[n],enumerable:!0})},Ml=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of tm(e))!rm.call(t,i)&&i!==n&&ei(t,i,{get:()=>e[i],enumerable:!(r=em(e,i))||r.enumerable});return t};var ss=(t,e,n)=>(n=t!=null?Xp(nm(t)):{},Ml(e||!t||!t.__esModule?ei(n,"default",{value:t,enumerable:!0}):n,t)),am=t=>Ml(ei({},"__esModule",{value:!0}),t);var st=(t,e,n)=>(im(t,typeof e!="symbol"?e+"":e,n),n);var at=fe(pt=>{"use strict";pt.__esModule=!0;pt.extend=Il;pt.indexOf=fm;pt.escapeExpression=hm;pt.isEmpty=dm;pt.createFrame=pm;pt.blockParams=mm;pt.appendContextPath=gm;var om={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},um=/[&<>"'`=]/g,lm=/[&<>"'`=]/;function cm(t){return om[t]}function Il(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var yo=Object.prototype.toString;pt.toString=yo;var go=function(e){return typeof e=="function"};go(/x/)&&(pt.isFunction=go=function(t){return typeof t=="function"&&yo.call(t)==="[object Function]"});pt.isFunction=go;var Pl=Array.isArray||function(t){return t&&typeof t=="object"?yo.call(t)==="[object Array]":!1};pt.isArray=Pl;function fm(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function hm(t){if(typeof t!="string"){if(t&&t.toHTML)return t.toHTML();if(t==null)return"";if(!t)return t+"";t=""+t}return lm.test(t)?t.replace(um,cm):t}function dm(t){return!t&&t!==0?!0:!!(Pl(t)&&t.length===0)}function pm(t){var e=Il({},t);return e._parent=t,e}function mm(t,e){return t.path=e,t}function gm(t,e){return(t?t+".":"")+e}});var Et=fe((cs,Nl)=>{"use strict";cs.__esModule=!0;var vo=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function Do(t,e){var n=e&&e.loc,r=void 0,i=void 0,o=void 0,u=void 0;n&&(r=n.start.line,i=n.end.line,o=n.start.column,u=n.end.column,t+=" - "+r+":"+o);for(var f=Error.prototype.constructor.call(this,t),d=0;d<vo.length;d++)this[vo[d]]=f[vo[d]];Error.captureStackTrace&&Error.captureStackTrace(this,Do);try{n&&(this.lineNumber=r,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=o,this.endColumn=u))}catch(p){}}Do.prototype=new Error;cs.default=Do;Nl.exports=cs.default});var Bl=fe((fs,Ll)=>{"use strict";fs.__esModule=!0;var bo=at();fs.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,i=n.fn;if(e===!0)return i(this);if(e===!1||e==null)return r(this);if(bo.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var o=bo.createFrame(n.data);o.contextPath=bo.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(e,n)})};Ll.exports=fs.default});var Hl=fe((hs,Rl)=>{"use strict";hs.__esModule=!0;function ym(t){return t&&t.__esModule?t:{default:t}}var ni=at(),vm=Et(),Dm=ym(vm);hs.default=function(t){t.registerHelper("each",function(e,n){if(!n)throw new Dm.default("Must pass iterator to #each");var r=n.fn,i=n.inverse,o=0,u="",f=void 0,d=void 0;n.data&&n.ids&&(d=ni.appendContextPath(n.data.contextPath,n.ids[0])+"."),ni.isFunction(e)&&(e=e.call(this)),n.data&&(f=ni.createFrame(n.data));function p(V,oe,pe){f&&(f.key=V,f.index=oe,f.first=oe===0,f.last=!!pe,d&&(f.contextPath=d+V)),u=u+r(e[V],{data:f,blockParams:ni.blockParams([e[V],V],[d+V,null])})}if(e&&typeof e=="object")if(ni.isArray(e))for(var w=e.length;o<w;o++)o in e&&p(o,o,o===e.length-1);else if(typeof Symbol=="function"&&e[Symbol.iterator]){for(var y=[],_=e[Symbol.iterator](),M=_.next();!M.done;M=_.next())y.push(M.value);e=y;for(var w=e.length;o<w;o++)p(o,o,o===e.length-1)}else(function(){var V=void 0;Object.keys(e).forEach(function(oe){V!==void 0&&p(V,o-1),V=oe,o++}),V!==void 0&&p(V,o-1,!0)})();return o===0&&(u=i(this)),u})};Rl.exports=hs.default});var Vl=fe((ds,Gl)=>{"use strict";ds.__esModule=!0;function bm(t){return t&&t.__esModule?t:{default:t}}var wm=Et(),Em=bm(wm);ds.default=function(t){t.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new Em.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})};Gl.exports=ds.default});var jl=fe((ps,Ul)=>{"use strict";ps.__esModule=!0;function Fm(t){return t&&t.__esModule?t:{default:t}}var Kl=at(),Cm=Et(),ql=Fm(Cm);ps.default=function(t){t.registerHelper("if",function(e,n){if(arguments.length!=2)throw new ql.default("#if requires exactly one argument");return Kl.isFunction(e)&&(e=e.call(this)),!n.hash.includeZero&&!e||Kl.isEmpty(e)?n.inverse(this):n.fn(this)}),t.registerHelper("unless",function(e,n){if(arguments.length!=2)throw new ql.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})};Ul.exports=ps.default});var zl=fe((ms,Wl)=>{"use strict";ms.__esModule=!0;ms.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;n.hash.level!=null?i=n.hash.level:n.data&&n.data.level!=null&&(i=n.data.level),e[0]=i,t.log.apply(t,e)})};Wl.exports=ms.default});var Zl=fe((gs,Yl)=>{"use strict";gs.__esModule=!0;gs.default=function(t){t.registerHelper("lookup",function(e,n,r){return e&&r.lookupProperty(e,n)})};Yl.exports=gs.default});var Ql=fe((ys,Jl)=>{"use strict";ys.__esModule=!0;function _m(t){return t&&t.__esModule?t:{default:t}}var ri=at(),Sm=Et(),km=_m(Sm);ys.default=function(t){t.registerHelper("with",function(e,n){if(arguments.length!=2)throw new km.default("#with requires exactly one argument");ri.isFunction(e)&&(e=e.call(this));var r=n.fn;if(ri.isEmpty(e))return n.inverse(this);var i=n.data;return n.data&&n.ids&&(i=ri.createFrame(n.data),i.contextPath=ri.appendContextPath(n.data.contextPath,n.ids[0])),r(e,{data:i,blockParams:ri.blockParams([e],[i&&i.contextPath])})})};Jl.exports=ys.default});var wo=fe(vs=>{"use strict";vs.__esModule=!0;vs.registerDefaultHelpers=Km;vs.moveHelperToHooks=qm;function Vn(t){return t&&t.__esModule?t:{default:t}}var xm=Bl(),Om=Vn(xm),Tm=Hl(),Mm=Vn(Tm),Am=Vl(),Im=Vn(Am),Pm=jl(),Nm=Vn(Pm),Lm=zl(),Bm=Vn(Lm),Rm=Zl(),Hm=Vn(Rm),Gm=Ql(),Vm=Vn(Gm);function Km(t){Om.default(t),Mm.default(t),Im.default(t),Nm.default(t),Bm.default(t),Hm.default(t),Vm.default(t)}function qm(t,e,n){t.helpers[e]&&(t.hooks[e]=t.helpers[e],n||delete t.helpers[e])}});var Xl=fe((Ds,$l)=>{"use strict";Ds.__esModule=!0;var Um=at();Ds.default=function(t){t.registerDecorator("inline",function(e,n,r,i){var o=e;return n.partials||(n.partials={},o=function(u,f){var d=r.partials;r.partials=Um.extend({},d,n.partials);var p=e(u,f);return r.partials=d,p}),n.partials[i.args[0]]=i.fn,o})};$l.exports=Ds.default});var ec=fe(Eo=>{"use strict";Eo.__esModule=!0;Eo.registerDefaultDecorators=Ym;function jm(t){return t&&t.__esModule?t:{default:t}}var Wm=Xl(),zm=jm(Wm);function Ym(t){zm.default(t)}});var Fo=fe((bs,tc)=>{"use strict";bs.__esModule=!0;var Zm=at(),mr={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if(typeof e=="string"){var n=Zm.indexOf(mr.methodMap,e.toLowerCase());n>=0?e=n:e=parseInt(e,10)}return e},log:function(e){if(e=mr.lookupLevel(e),typeof console!="undefined"&&mr.lookupLevel(mr.level)<=e){var n=mr.methodMap[e];console[n]||(n="log");for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];console[n].apply(console,i)}}};bs.default=mr;tc.exports=bs.default});var nc=fe(Co=>{"use strict";Co.__esModule=!0;Co.createNewLookupObject=Qm;var Jm=at();function Qm(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Jm.extend.apply(void 0,[Object.create(null)].concat(e))}});var _o=fe(ii=>{"use strict";ii.__esModule=!0;ii.createProtoAccessControl=tg;ii.resultIsAllowed=ng;ii.resetLoggedProperties=ig;function $m(t){return t&&t.__esModule?t:{default:t}}var rc=nc(),Xm=Fo(),eg=$m(Xm),ws=Object.create(null);function tg(t){var e=Object.create(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var n=Object.create(null);return n.__proto__=!1,{properties:{whitelist:rc.createNewLookupObject(n,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:rc.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}}function ng(t,e,n){return ic(typeof t=="function"?e.methods:e.properties,n)}function ic(t,e){return t.whitelist[e]!==void 0?t.whitelist[e]===!0:t.defaultValue!==void 0?t.defaultValue:(rg(e),!1)}function rg(t){ws[t]!==!0&&(ws[t]=!0,eg.default.log("error",'Handlebars: Access has been denied to resolve the property "'+t+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function ig(){Object.keys(ws).forEach(function(t){delete ws[t]})}});var Fs=fe(zt=>{"use strict";zt.__esModule=!0;zt.HandlebarsEnvironment=xo;function sc(t){return t&&t.__esModule?t:{default:t}}var Kn=at(),sg=Et(),So=sc(sg),ag=wo(),og=ec(),ug=Fo(),Es=sc(ug),lg=_o(),cg="4.7.8";zt.VERSION=cg;var fg=8;zt.COMPILER_REVISION=fg;var hg=7;zt.LAST_COMPATIBLE_COMPILER_REVISION=hg;var dg={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};zt.REVISION_CHANGES=dg;var ko="[object Object]";function xo(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},ag.registerDefaultHelpers(this),og.registerDefaultDecorators(this)}xo.prototype={constructor:xo,logger:Es.default,log:Es.default.log,registerHelper:function(e,n){if(Kn.toString.call(e)===ko){if(n)throw new So.default("Arg not supported with multiple helpers");Kn.extend(this.helpers,e)}else this.helpers[e]=n},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,n){if(Kn.toString.call(e)===ko)Kn.extend(this.partials,e);else{if(typeof n=="undefined")throw new So.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=n}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,n){if(Kn.toString.call(e)===ko){if(n)throw new So.default("Arg not supported with multiple decorators");Kn.extend(this.decorators,e)}else this.decorators[e]=n},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){lg.resetLoggedProperties()}};var pg=Es.default.log;zt.log=pg;zt.createFrame=Kn.createFrame;zt.logger=Es.default});var oc=fe((Cs,ac)=>{"use strict";Cs.__esModule=!0;function Oo(t){this.string=t}Oo.prototype.toString=Oo.prototype.toHTML=function(){return""+this.string};Cs.default=Oo;ac.exports=Cs.default});var uc=fe(To=>{"use strict";To.__esModule=!0;To.wrapHelper=mg;function mg(t,e){if(typeof t!="function")return t;var n=function(){var i=arguments[arguments.length-1];return arguments[arguments.length-1]=e(i),t.apply(this,arguments)};return n}});var dc=fe(Sn=>{"use strict";Sn.__esModule=!0;Sn.checkRevision=wg;Sn.template=Eg;Sn.wrapProgram=_s;Sn.resolvePartial=Fg;Sn.invokePartial=Cg;Sn.noop=fc;function gg(t){return t&&t.__esModule?t:{default:t}}function yg(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var vg=at(),un=yg(vg),Dg=Et(),ln=gg(Dg),cn=Fs(),lc=wo(),bg=uc(),cc=_o();function wg(t){var e=t&&t[0]||1,n=cn.COMPILER_REVISION;if(!(e>=cn.LAST_COMPATIBLE_COMPILER_REVISION&&e<=cn.COMPILER_REVISION))if(e<cn.LAST_COMPATIBLE_COMPILER_REVISION){var r=cn.REVISION_CHANGES[n],i=cn.REVISION_CHANGES[e];throw new ln.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}else throw new ln.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}function Eg(t,e){if(!e)throw new ln.default("No environment passed to template");if(!t||!t.main)throw new ln.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n=t.compiler&&t.compiler[0]===7;function r(u,f,d){d.hash&&(f=un.extend({},f,d.hash),d.ids&&(d.ids[0]=!0)),u=e.VM.resolvePartial.call(this,u,f,d);var p=un.extend({},d,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),w=e.VM.invokePartial.call(this,u,f,p);if(w==null&&e.compile&&(d.partials[d.name]=e.compile(u,t.compilerOptions,e),w=d.partials[d.name](f,p)),w!=null){if(d.indent){for(var y=w.split(`
`),_=0,M=y.length;_<M&&!(!y[_]&&_+1===M);_++)y[_]=d.indent+y[_];w=y.join(`
`)}return w}else throw new ln.default("The partial "+d.name+" could not be compiled when running in runtime-only mode")}var i={strict:function(f,d,p){if(!f||!(d in f))throw new ln.default('"'+d+'" not defined in '+f,{loc:p});return i.lookupProperty(f,d)},lookupProperty:function(f,d){var p=f[d];if(p==null||Object.prototype.hasOwnProperty.call(f,d)||cc.resultIsAllowed(p,i.protoAccessControl,d))return p},lookup:function(f,d){for(var p=f.length,w=0;w<p;w++){var y=f[w]&&i.lookupProperty(f[w],d);if(y!=null)return f[w][d]}},lambda:function(f,d){return typeof f=="function"?f.call(d):f},escapeExpression:un.escapeExpression,invokePartial:r,fn:function(f){var d=t[f];return d.decorator=t[f+"_d"],d},programs:[],program:function(f,d,p,w,y){var _=this.programs[f],M=this.fn(f);return d||y||w||p?_=_s(this,f,M,d,p,w,y):_||(_=this.programs[f]=_s(this,f,M)),_},data:function(f,d){for(;f&&d--;)f=f._parent;return f},mergeIfNeeded:function(f,d){var p=f||d;return f&&d&&f!==d&&(p=un.extend({},d,f)),p},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:t.compiler};function o(u){var f=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],d=f.data;o._setup(f),!f.partial&&t.useData&&(d=_g(u,d));var p=void 0,w=t.useBlockParams?[]:void 0;t.useDepths&&(f.depths?p=u!=f.depths[0]?[u].concat(f.depths):f.depths:p=[u]);function y(_){return""+t.main(i,_,i.helpers,i.partials,d,w,p)}return y=hc(t.main,y,i,f.depths||[],d,w),y(u,f)}return o.isTop=!0,o._setup=function(u){if(u.partial)i.protoAccessControl=u.protoAccessControl,i.helpers=u.helpers,i.partials=u.partials,i.decorators=u.decorators,i.hooks=u.hooks;else{var f=un.extend({},e.helpers,u.helpers);Sg(f,i),i.helpers=f,t.usePartial&&(i.partials=i.mergeIfNeeded(u.partials,e.partials)),(t.usePartial||t.useDecorators)&&(i.decorators=un.extend({},e.decorators,u.decorators)),i.hooks={},i.protoAccessControl=cc.createProtoAccessControl(u);var d=u.allowCallsToHelperMissing||n;lc.moveHelperToHooks(i,"helperMissing",d),lc.moveHelperToHooks(i,"blockHelperMissing",d)}},o._child=function(u,f,d,p){if(t.useBlockParams&&!d)throw new ln.default("must pass block params");if(t.useDepths&&!p)throw new ln.default("must pass parent depths");return _s(i,u,t[u],f,0,d,p)},o}function _s(t,e,n,r,i,o,u){function f(d){var p=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],w=u;return u&&d!=u[0]&&!(d===t.nullContext&&u[0]===null)&&(w=[d].concat(u)),n(t,d,t.helpers,t.partials,p.data||r,o&&[p.blockParams].concat(o),w)}return f=hc(n,f,t,u,r,o),f.program=e,f.depth=u?u.length:0,f.blockParams=i||0,f}function Fg(t,e,n){return t?!t.call&&!n.name&&(n.name=t,t=n.partials[t]):n.name==="@partial-block"?t=n.data["partial-block"]:t=n.partials[n.name],t}function Cg(t,e,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==fc&&function(){n.data=cn.createFrame(n.data);var o=n.fn;i=n.data["partial-block"]=function(f){var d=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return d.data=cn.createFrame(d.data),d.data["partial-block"]=r,o(f,d)},o.partials&&(n.partials=un.extend({},n.partials,o.partials))}(),t===void 0&&i&&(t=i),t===void 0)throw new ln.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)}function fc(){return""}function _g(t,e){return(!e||!("root"in e))&&(e=e?cn.createFrame(e):{},e.root=t),e}function hc(t,e,n,r,i,o){if(t.decorator){var u={};e=t.decorator(e,u,n,r&&r[0],i,o,r),un.extend(e,u)}return e}function Sg(t,e){Object.keys(t).forEach(function(n){var r=t[n];t[n]=kg(r,e)})}function kg(t,e){var n=e.lookupProperty;return bg.wrapHelper(t,function(r){return un.extend({lookupProperty:n},r)})}});var Mo=fe((Ss,pc)=>{"use strict";Ss.__esModule=!0;Ss.default=function(t){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var e=globalThis.Handlebars;t.noConflict=function(){return globalThis.Handlebars===t&&(globalThis.Handlebars=e),t}};pc.exports=Ss.default});var Dc=fe((ks,vc)=>{"use strict";ks.__esModule=!0;function Io(t){return t&&t.__esModule?t:{default:t}}function Po(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var xg=Fs(),mc=Po(xg),Og=oc(),Tg=Io(Og),Mg=Et(),Ag=Io(Mg),Ig=at(),Ao=Po(Ig),Pg=dc(),gc=Po(Pg),Ng=Mo(),Lg=Io(Ng);function yc(){var t=new mc.HandlebarsEnvironment;return Ao.extend(t,mc),t.SafeString=Tg.default,t.Exception=Ag.default,t.Utils=Ao,t.escapeExpression=Ao.escapeExpression,t.VM=gc,t.template=function(e){return gc.template(e,t)},t}var si=yc();si.create=yc;Lg.default(si);si.default=si;ks.default=si;vc.exports=ks.default});var No=fe((xs,wc)=>{"use strict";xs.__esModule=!0;var bc={helpers:{helperExpression:function(e){return e.type==="SubExpression"||(e.type==="MustacheStatement"||e.type==="BlockStatement")&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return e.parts.length===1&&!bc.helpers.scopedId(e)&&!e.depth}}};xs.default=bc;wc.exports=xs.default});var Fc=fe((Os,Ec)=>{"use strict";Os.__esModule=!0;var Bg=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(i,o,u,f,d,p,w){var y=p.length-1;switch(d){case 1:return p[y-1];case 2:this.$=f.prepareProgram(p[y]);break;case 3:this.$=p[y];break;case 4:this.$=p[y];break;case 5:this.$=p[y];break;case 6:this.$=p[y];break;case 7:this.$=p[y];break;case 8:this.$=p[y];break;case 9:this.$={type:"CommentStatement",value:f.stripComment(p[y]),strip:f.stripFlags(p[y],p[y]),loc:f.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:p[y],value:p[y],loc:f.locInfo(this._$)};break;case 11:this.$=f.prepareRawBlock(p[y-2],p[y-1],p[y],this._$);break;case 12:this.$={path:p[y-3],params:p[y-2],hash:p[y-1]};break;case 13:this.$=f.prepareBlock(p[y-3],p[y-2],p[y-1],p[y],!1,this._$);break;case 14:this.$=f.prepareBlock(p[y-3],p[y-2],p[y-1],p[y],!0,this._$);break;case 15:this.$={open:p[y-5],path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 16:this.$={path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 17:this.$={path:p[y-4],params:p[y-3],hash:p[y-2],blockParams:p[y-1],strip:f.stripFlags(p[y-5],p[y])};break;case 18:this.$={strip:f.stripFlags(p[y-1],p[y-1]),program:p[y]};break;case 19:var _=f.prepareBlock(p[y-2],p[y-1],p[y],p[y],!1,this._$),M=f.prepareProgram([_],p[y-1].loc);M.chained=!0,this.$={strip:p[y-2].strip,program:M,chain:!0};break;case 20:this.$=p[y];break;case 21:this.$={path:p[y-1],strip:f.stripFlags(p[y-2],p[y])};break;case 22:this.$=f.prepareMustache(p[y-3],p[y-2],p[y-1],p[y-4],f.stripFlags(p[y-4],p[y]),this._$);break;case 23:this.$=f.prepareMustache(p[y-3],p[y-2],p[y-1],p[y-4],f.stripFlags(p[y-4],p[y]),this._$);break;case 24:this.$={type:"PartialStatement",name:p[y-3],params:p[y-2],hash:p[y-1],indent:"",strip:f.stripFlags(p[y-4],p[y]),loc:f.locInfo(this._$)};break;case 25:this.$=f.preparePartialBlock(p[y-2],p[y-1],p[y],this._$);break;case 26:this.$={path:p[y-3],params:p[y-2],hash:p[y-1],strip:f.stripFlags(p[y-4],p[y])};break;case 27:this.$=p[y];break;case 28:this.$=p[y];break;case 29:this.$={type:"SubExpression",path:p[y-3],params:p[y-2],hash:p[y-1],loc:f.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:p[y],loc:f.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:f.id(p[y-2]),value:p[y],loc:f.locInfo(this._$)};break;case 32:this.$=f.id(p[y-1]);break;case 33:this.$=p[y];break;case 34:this.$=p[y];break;case 35:this.$={type:"StringLiteral",value:p[y],original:p[y],loc:f.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(p[y]),original:Number(p[y]),loc:f.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:p[y]==="true",original:p[y]==="true",loc:f.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:f.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:f.locInfo(this._$)};break;case 40:this.$=p[y];break;case 41:this.$=p[y];break;case 42:this.$=f.preparePath(!0,p[y],this._$);break;case 43:this.$=f.preparePath(!1,p[y],this._$);break;case 44:p[y-2].push({part:f.id(p[y]),original:p[y],separator:p[y-1]}),this.$=p[y-2];break;case 45:this.$=[{part:f.id(p[y]),original:p[y]}];break;case 46:this.$=[];break;case 47:p[y-1].push(p[y]);break;case 48:this.$=[];break;case 49:p[y-1].push(p[y]);break;case 50:this.$=[];break;case 51:p[y-1].push(p[y]);break;case 58:this.$=[];break;case 59:p[y-1].push(p[y]);break;case 64:this.$=[];break;case 65:p[y-1].push(p[y]);break;case 70:this.$=[];break;case 71:p[y-1].push(p[y]);break;case 78:this.$=[];break;case 79:p[y-1].push(p[y]);break;case 82:this.$=[];break;case 83:p[y-1].push(p[y]);break;case 86:this.$=[];break;case 87:p[y-1].push(p[y]);break;case 90:this.$=[];break;case 91:p[y-1].push(p[y]);break;case 94:this.$=[];break;case 95:p[y-1].push(p[y]);break;case 98:this.$=[p[y]];break;case 99:p[y-1].push(p[y]);break;case 100:this.$=[p[y]];break;case 101:p[y-1].push(p[y]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(i,o){throw new Error(i)},parse:function(i){var o=this,u=[0],f=[null],d=[],p=this.table,w="",y=0,_=0,M=0,V=2,oe=1;this.lexer.setInput(i),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var pe=this.lexer.yylloc;d.push(pe);var me=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function Ce(Te){u.length=u.length-2*Te,f.length=f.length-Te,d.length=d.length-Te}function He(){var Te;return Te=o.lexer.lex()||1,typeof Te!="number"&&(Te=o.symbols_[Te]||Te),Te}for(var R,ue,be,W,re,Fe,je={},Je,Se,vt,We;;){if(be=u[u.length-1],this.defaultActions[be]?W=this.defaultActions[be]:((R===null||typeof R=="undefined")&&(R=He()),W=p[be]&&p[be][R]),typeof W=="undefined"||!W.length||!W[0]){var ze="";if(!M){We=[];for(Je in p[be])this.terminals_[Je]&&Je>2&&We.push("'"+this.terminals_[Je]+"'");this.lexer.showPosition?ze="Parse error on line "+(y+1)+`:
`+this.lexer.showPosition()+`
Expecting `+We.join(", ")+", got '"+(this.terminals_[R]||R)+"'":ze="Parse error on line "+(y+1)+": Unexpected "+(R==1?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(ze,{text:this.lexer.match,token:this.terminals_[R]||R,line:this.lexer.yylineno,loc:pe,expected:We})}}if(W[0]instanceof Array&&W.length>1)throw new Error("Parse Error: multiple actions possible at state: "+be+", token: "+R);switch(W[0]){case 1:u.push(R),f.push(this.lexer.yytext),d.push(this.lexer.yylloc),u.push(W[1]),R=null,ue?(R=ue,ue=null):(_=this.lexer.yyleng,w=this.lexer.yytext,y=this.lexer.yylineno,pe=this.lexer.yylloc,M>0&&M--);break;case 2:if(Se=this.productions_[W[1]][1],je.$=f[f.length-Se],je._$={first_line:d[d.length-(Se||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(Se||1)].first_column,last_column:d[d.length-1].last_column},me&&(je._$.range=[d[d.length-(Se||1)].range[0],d[d.length-1].range[1]]),Fe=this.performAction.call(je,w,_,y,this.yy,W[1],f,d),typeof Fe!="undefined")return Fe;Se&&(u=u.slice(0,-1*Se*2),f=f.slice(0,-1*Se),d=d.slice(0,-1*Se)),u.push(this.productions_[W[1]][0]),f.push(je.$),d.push(je._$),vt=p[u[u.length-2]][u[u.length-1]],u.push(vt);break;case 3:return!0}}return!0}},e=function(){var r={EOF:1,parseError:function(o,u){if(this.yy.parser)this.yy.parser.parseError(o,u);else throw new Error(o)},setInput:function(o){return this._input=o,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var u=o.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var u=o.length,f=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u-1),this.offset-=u;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),f.length-1&&(this.yylineno-=f.length-1);var p=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?(f.length===d.length?this.yylloc.first_column:0)+d[d.length-f.length].length-f[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-u]),this},more:function(){return this._more=!0,this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),u=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+u+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,u,f,d,p,w;this._more||(this.yytext="",this.match="");for(var y=this._currentRules(),_=0;_<y.length&&(f=this._input.match(this.rules[y[_]]),!(f&&(!u||f[0].length>u[0].length)&&(u=f,d=_,!this.options.flex)));_++);return u?(w=u[0].match(/(?:\r\n?|\n).*/g),w&&(this.yylineno+=w.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:w?w[w.length-1].length-w[w.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+u[0].length},this.yytext+=u[0],this.match+=u[0],this.matches=u,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(u[0].length),this.matched+=u[0],o=this.performAction.call(this,this.yy,this,y[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return typeof o!="undefined"?o:this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(o){this.begin(o)}};return r.options={},r.performAction=function(o,u,f,d){function p(y,_){return u.yytext=u.yytext.substring(y,u.yyleng-_+y)}var w=d;switch(f){case 0:if(u.yytext.slice(-2)==="\\\\"?(p(0,1),this.begin("mu")):u.yytext.slice(-1)==="\\"?(p(0,1),this.begin("emu")):this.begin("mu"),u.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;break;case 3:return this.begin("raw"),15;break;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(p(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;break;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;break;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;break;case 16:return this.popState(),44;break;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(u.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;break;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;break;case 30:return this.popState(),33;break;case 31:return u.yytext=p(1,2).replace(/\\"/g,'"'),80;break;case 32:return u.yytext=p(1,2).replace(/\\'/g,"'"),80;break;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return u.yytext=u.yytext.replace(/\\([\\\]])/g,"$1"),72;break;case 43:return"INVALID";case 44:return 5}},r.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],r.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},r}();t.lexer=e;function n(){this.yy={}}return n.prototype=t,t.Parser=n,new n}();Os.default=Bg;Ec.exports=Os.default});var Bo=fe((As,Sc)=>{"use strict";As.__esModule=!0;function Rg(t){return t&&t.__esModule?t:{default:t}}var Hg=Et(),Lo=Rg(Hg);function Ts(){this.parents=[]}Ts.prototype={constructor:Ts,mutating:!1,acceptKey:function(e,n){var r=this.accept(e[n]);if(this.mutating){if(r&&!Ts.prototype[r.type])throw new Lo.default('Unexpected node type "'+r.type+'" found when accepting '+n+" on "+e.type);e[n]=r}},acceptRequired:function(e,n){if(this.acceptKey(e,n),!e[n])throw new Lo.default(e.type+" requires "+n)},acceptArray:function(e){for(var n=0,r=e.length;n<r;n++)this.acceptKey(e,n),e[n]||(e.splice(n,1),n--,r--)},accept:function(e){if(e){if(!this[e.type])throw new Lo.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var n=this[e.type](e);if(this.current=this.parents.shift(),!this.mutating||n)return n;if(n!==!1)return e}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:Ms,Decorator:Ms,BlockStatement:Cc,DecoratorBlock:Cc,PartialStatement:_c,PartialBlockStatement:function(e){_c.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:Ms,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}};function Ms(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function Cc(t){Ms.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function _c(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}As.default=Ts;Sc.exports=As.default});var xc=fe((Is,kc)=>{"use strict";Is.__esModule=!0;function Gg(t){return t&&t.__esModule?t:{default:t}}var Vg=Bo(),Kg=Gg(Vg);function Yt(){var t=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=t}Yt.prototype=new Kg.default;Yt.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=t.body,i=0,o=r.length;i<o;i++){var u=r[i],f=this.accept(u);if(f){var d=Ro(r,i,n),p=Ho(r,i,n),w=f.openStandalone&&d,y=f.closeStandalone&&p,_=f.inlineStandalone&&d&&p;f.close&&qn(r,i,!0),f.open&&kn(r,i,!0),e&&_&&(qn(r,i),kn(r,i)&&u.type==="PartialStatement"&&(u.indent=/([ \t]+$)/.exec(r[i-1].original)[1])),e&&w&&(qn((u.program||u.inverse).body),kn(r,i)),e&&y&&(qn(r,i),kn((u.inverse||u.program).body))}}return t};Yt.prototype.BlockStatement=Yt.prototype.DecoratorBlock=Yt.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,r=n,i=n;if(n&&n.chained)for(r=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var o={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:Ho(e.body),closeStandalone:Ro((r||e).body)};if(t.openStrip.close&&qn(e.body,null,!0),n){var u=t.inverseStrip;u.open&&kn(e.body,null,!0),u.close&&qn(r.body,null,!0),t.closeStrip.open&&kn(i.body,null,!0),!this.options.ignoreStandalone&&Ro(e.body)&&Ho(r.body)&&(kn(e.body),qn(r.body))}else t.closeStrip.open&&kn(e.body,null,!0);return o};Yt.prototype.Decorator=Yt.prototype.MustacheStatement=function(t){return t.strip};Yt.prototype.PartialStatement=Yt.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}};function Ro(t,e,n){e===void 0&&(e=t.length);var r=t[e-1],i=t[e-2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original)}function Ho(t,e,n){e===void 0&&(e=-1);var r=t[e+1],i=t[e+2];if(!r)return n;if(r.type==="ContentStatement")return(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original)}function qn(t,e,n){var r=t[e==null?0:e+1];if(!(!r||r.type!=="ContentStatement"||!n&&r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function kn(t,e,n){var r=t[e==null?t.length-1:e-1];if(!(!r||r.type!=="ContentStatement"||!n&&r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}Is.default=Yt;kc.exports=Is.default});var Oc=fe(Ft=>{"use strict";Ft.__esModule=!0;Ft.SourceLocation=jg;Ft.id=Wg;Ft.stripFlags=zg;Ft.stripComment=Yg;Ft.preparePath=Zg;Ft.prepareMustache=Jg;Ft.prepareRawBlock=Qg;Ft.prepareBlock=$g;Ft.prepareProgram=Xg;Ft.preparePartialBlock=ey;function qg(t){return t&&t.__esModule?t:{default:t}}var Ug=Et(),Go=qg(Ug);function Vo(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new Go.default(t.path.original+" doesn't match "+e,n)}}function jg(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function Wg(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t}function zg(t,e){return{open:t.charAt(2)==="~",close:e.charAt(e.length-3)==="~"}}function Yg(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function Zg(t,e,n){n=this.locInfo(n);for(var r=t?"@":"",i=[],o=0,u=0,f=e.length;u<f;u++){var d=e[u].part,p=e[u].original!==d;if(r+=(e[u].separator||"")+d,!p&&(d===".."||d==="."||d==="this")){if(i.length>0)throw new Go.default("Invalid path: "+r,{loc:n});d===".."&&o++}else i.push(d)}return{type:"PathExpression",data:t,depth:o,parts:i,original:r,loc:n}}function Jg(t,e,n,r,i,o){var u=r.charAt(3)||r.charAt(2),f=u!=="{"&&u!=="&",d=/\*/.test(r);return{type:d?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:f,strip:i,loc:this.locInfo(o)}}function Qg(t,e,n,r){Vo(t,n),r=this.locInfo(r);var i={type:"Program",body:e,strip:{},loc:r};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}}function $g(t,e,n,r,i,o){r&&r.path&&Vo(t,r);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var f=void 0,d=void 0;if(n){if(u)throw new Go.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),d=n.strip,f=n.program}return i&&(i=f,f=e,e=i),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:f,openStrip:t.strip,inverseStrip:d,closeStrip:r&&r.strip,loc:this.locInfo(o)}}function Xg(t,e){if(!e&&t.length){var n=t[0].loc,r=t[t.length-1].loc;n&&r&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function ey(t,e,n,r){return Vo(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}}});var Ac=fe(ai=>{"use strict";ai.__esModule=!0;ai.parseWithoutProcessing=Mc;ai.parse=uy;function ty(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Tc(t){return t&&t.__esModule?t:{default:t}}var ny=Fc(),Ko=Tc(ny),ry=xc(),iy=Tc(ry),sy=Oc(),ay=ty(sy),oy=at();ai.parser=Ko.default;var Ps={};oy.extend(Ps,ay);function Mc(t,e){if(t.type==="Program")return t;Ko.default.yy=Ps,Ps.locInfo=function(r){return new Ps.SourceLocation(e&&e.srcName,r)};var n=Ko.default.parse(t);return n}function uy(t,e){var n=Mc(t,e),r=new iy.default(e);return r.accept(n)}});var Lc=fe(ci=>{"use strict";ci.__esModule=!0;ci.Compiler=qo;ci.precompile=hy;ci.compile=dy;function Pc(t){return t&&t.__esModule?t:{default:t}}var ly=Et(),ui=Pc(ly),li=at(),cy=No(),oi=Pc(cy),fy=[].slice;function qo(){}qo.prototype={compiler:qo,equals:function(e){var n=this.opcodes.length;if(e.opcodes.length!==n)return!1;for(var r=0;r<n;r++){var i=this.opcodes[r],o=e.opcodes[r];if(i.opcode!==o.opcode||!Nc(i.args,o.args))return!1}n=this.children.length;for(var r=0;r<n;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,n){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=n,this.stringParams=n.stringParams,this.trackIds=n.trackIds,n.blockParams=n.blockParams||[],n.knownHelpers=li.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n.knownHelpers),this.accept(e)},compileProgram:function(e){var n=new this.compiler,r=n.compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||r.usePartial,this.children[i]=r,this.useDepths=this.useDepths||r.useDepths,i},accept:function(e){if(!this[e.type])throw new ui.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var n=this[e.type](e);return this.sourceNode.shift(),n},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var n=e.body,r=n.length,i=0;i<r;i++)this.accept(n[i]);return this.options.blockParams.shift(),this.isSimple=r===1,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){Ic(e);var n=e.program,r=e.inverse;n=n&&this.compileProgram(n),r=r&&this.compileProgram(r);var i=this.classifySexpr(e);i==="helper"?this.helperSexpr(e,n,r):i==="simple"?(this.simpleSexpr(e),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var n=e.program&&this.compileProgram(e.program),r=this.setupFullMustacheParams(e,n,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",r.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var n=e.program;n&&(n=this.compileProgram(e.program));var r=e.params;if(r.length>1)throw new ui.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,o=e.name.type==="SubExpression";o&&this.accept(e.name),this.setupFullMustacheParams(e,n,void 0,!0);var u=e.indent||"";this.options.preventIndent&&u&&(this.opcode("appendContent",u),u=""),this.opcode("invokePartial",o,i,u),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){Ic(e);var n=this.classifySexpr(e);n==="simple"?this.simpleSexpr(e):n==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,n,r){var i=e.path,o=i.parts[0],u=n!=null||r!=null;this.opcode("getContext",i.depth),this.opcode("pushProgram",n),this.opcode("pushProgram",r),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",o,u)},simpleSexpr:function(e){var n=e.path;n.strict=!0,this.accept(n),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,n,r){var i=this.setupFullMustacheParams(e,n,r),o=e.path,u=o.parts[0];if(this.options.knownHelpers[u])this.opcode("invokeKnownHelper",i.length,u);else{if(this.options.knownHelpersOnly)throw new ui.default("You specified knownHelpersOnly, but used the unknown helper "+u,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",i.length,o.original,oi.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var n=e.parts[0],r=oi.default.helpers.scopedId(e),i=!e.depth&&!r&&this.blockParamIndex(n);i?this.opcode("lookupBlockParam",i,e.parts):n?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var n=e.pairs,r=0,i=n.length;for(this.opcode("pushHash");r<i;r++)this.pushParam(n[r].value);for(;r--;)this.opcode("assignToHash",n[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:fy.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var n=oi.default.helpers.simpleId(e.path),r=n&&!!this.blockParamIndex(e.path.parts[0]),i=!r&&oi.default.helpers.helperExpression(e),o=!r&&(i||n);if(o&&!i){var u=e.path.parts[0],f=this.options;f.knownHelpers[u]?i=!0:f.knownHelpersOnly&&(o=!1)}return i?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var n=0,r=e.length;n<r;n++)this.pushParam(e[n])},pushParam:function(e){var n=e.value!=null?e.value:e.original||"";if(this.stringParams)n.replace&&(n=n.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",n,e.type),e.type==="SubExpression"&&this.accept(e);else{if(this.trackIds){var r=void 0;if(e.parts&&!oi.default.helpers.scopedId(e)&&!e.depth&&(r=this.blockParamIndex(e.parts[0])),r){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",r,i)}else n=e.original||n,n.replace&&(n=n.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,n)}this.accept(e)}},setupFullMustacheParams:function(e,n,r,i){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",n),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),o},blockParamIndex:function(e){for(var n=0,r=this.options.blockParams.length;n<r;n++){var i=this.options.blockParams[n],o=i&&li.indexOf(i,e);if(i&&o>=0)return[n,o]}}};function hy(t,e,n){if(t==null||typeof t!="string"&&t.type!=="Program")throw new ui.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var r=n.parse(t,e),i=new n.Compiler().compile(r,e);return new n.JavaScriptCompiler().compile(i,e)}function dy(t,e,n){if(e===void 0&&(e={}),t==null||typeof t!="string"&&t.type!=="Program")throw new ui.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=li.extend({},e),"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var r=void 0;function i(){var u=n.parse(t,e),f=new n.Compiler().compile(u,e),d=new n.JavaScriptCompiler().compile(f,e,void 0,!0);return n.template(d)}function o(u,f){return r||(r=i()),r.call(this,u,f)}return o._setup=function(u){return r||(r=i()),r._setup(u)},o._child=function(u,f,d,p){return r||(r=i()),r._child(u,f,d,p)},o}function Nc(t,e){if(t===e)return!0;if(li.isArray(t)&&li.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!Nc(t[n],e[n]))return!1;return!0}}function Ic(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}});var Rc=fe(Uo=>{var Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Uo.encode=function(t){if(0<=t&&t<Bc.length)return Bc[t];throw new TypeError("Must be between 0 and 63: "+t)};Uo.decode=function(t){var e=65,n=90,r=97,i=122,o=48,u=57,f=43,d=47,p=26,w=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+p:o<=t&&t<=u?t-o+w:t==f?62:t==d?63:-1}});var zo=fe(Wo=>{var Hc=Rc(),jo=5,Gc=1<<jo,Vc=Gc-1,Kc=Gc;function py(t){return t<0?(-t<<1)+1:(t<<1)+0}function my(t){var e=(t&1)===1,n=t>>1;return e?-n:n}Wo.encode=function(e){var n="",r,i=py(e);do r=i&Vc,i>>>=jo,i>0&&(r|=Kc),n+=Hc.encode(r);while(i>0);return n};Wo.decode=function(e,n,r){var i=e.length,o=0,u=0,f,d;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(d=Hc.decode(e.charCodeAt(n++)),d===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));f=!!(d&Kc),d&=Vc,o=o+(d<<u),u+=jo}while(f);r.value=my(o),r.rest=n}});var vr=fe(tt=>{function gy(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}tt.getArg=gy;var qc=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,yy=/^data:.+\,.+$/;function fi(t){var e=t.match(qc);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}tt.urlParse=fi;function gr(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}tt.urlGenerate=gr;function Yo(t){var e=t,n=fi(t);if(n){if(!n.path)return t;e=n.path}for(var r=tt.isAbsolute(e),i=e.split(/\/+/),o,u=0,f=i.length-1;f>=0;f--)o=i[f],o==="."?i.splice(f,1):o===".."?u++:u>0&&(o===""?(i.splice(f+1,u),u=0):(i.splice(f,2),u--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,gr(n)):e}tt.normalize=Yo;function Uc(t,e){t===""&&(t="."),e===""&&(e=".");var n=fi(e),r=fi(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),gr(n);if(n||e.match(yy))return e;if(r&&!r.host&&!r.path)return r.host=e,gr(r);var i=e.charAt(0)==="/"?e:Yo(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,gr(r)):i}tt.join=Uc;tt.isAbsolute=function(t){return t.charAt(0)==="/"||qc.test(t)};function vy(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}tt.relative=vy;var jc=function(){var t=Object.create(null);return!("__proto__"in t)}();function Wc(t){return t}function Dy(t){return zc(t)?"$"+t:t}tt.toSetString=jc?Wc:Dy;function by(t){return zc(t)?t.slice(1):t}tt.fromSetString=jc?Wc:by;function zc(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}function wy(t,e,n){var r=yr(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:yr(t.name,e.name)}tt.compareByOriginalPositions=wy;function Ey(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=yr(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:yr(t.name,e.name)}tt.compareByGeneratedPositionsDeflated=Ey;function yr(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Fy(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=yr(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:yr(t.name,e.name)}tt.compareByGeneratedPositionsInflated=Fy;function Cy(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}tt.parseSourceMapInput=Cy;function _y(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=fi(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=Uc(gr(r),e)}return Yo(e)}tt.computeSourceURL=_y});var Qo=fe(Yc=>{var Zo=vr(),Jo=Object.prototype.hasOwnProperty,Un=typeof Map!="undefined";function fn(){this._array=[],this._set=Un?new Map:Object.create(null)}fn.fromArray=function(e,n){for(var r=new fn,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r};fn.prototype.size=function(){return Un?this._set.size:Object.getOwnPropertyNames(this._set).length};fn.prototype.add=function(e,n){var r=Un?e:Zo.toSetString(e),i=Un?this.has(e):Jo.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(Un?this._set.set(e,o):this._set[r]=o)};fn.prototype.has=function(e){if(Un)return this._set.has(e);var n=Zo.toSetString(e);return Jo.call(this._set,n)};fn.prototype.indexOf=function(e){if(Un){var n=this._set.get(e);if(n>=0)return n}else{var r=Zo.toSetString(e);if(Jo.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')};fn.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};fn.prototype.toArray=function(){return this._array.slice()};Yc.ArraySet=fn});var Qc=fe(Jc=>{var Zc=vr();function Sy(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||Zc.compareByGeneratedPositionsInflated(t,e)<=0}function Ns(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Ns.prototype.unsortedForEach=function(e,n){this._array.forEach(e,n)};Ns.prototype.add=function(e){Sy(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Ns.prototype.toArray=function(){return this._sorted||(this._array.sort(Zc.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};Jc.MappingList=Ns});var $o=fe($c=>{var hi=zo(),Be=vr(),Ls=Qo().ArraySet,ky=Qc().MappingList;function Ct(t){t||(t={}),this._file=Be.getArg(t,"file",null),this._sourceRoot=Be.getArg(t,"sourceRoot",null),this._skipValidation=Be.getArg(t,"skipValidation",!1),this._sources=new Ls,this._names=new Ls,this._mappings=new ky,this._sourcesContents=null}Ct.prototype._version=3;Ct.fromSourceMap=function(e){var n=e.sourceRoot,r=new Ct({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Be.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Be.relative(n,i)),r._sources.has(o)||r._sources.add(o);var u=e.sourceContentFor(i);u!=null&&r.setSourceContent(i,u)}),r};Ct.prototype.addMapping=function(e){var n=Be.getArg(e,"generated"),r=Be.getArg(e,"original",null),i=Be.getArg(e,"source",null),o=Be.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})};Ct.prototype.setSourceContent=function(e,n){var r=e;this._sourceRoot!=null&&(r=Be.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Be.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Be.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ct.prototype.applySourceMap=function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Be.relative(o,i));var u=new Ls,f=new Ls;this._mappings.unsortedForEach(function(d){if(d.source===i&&d.originalLine!=null){var p=e.originalPositionFor({line:d.originalLine,column:d.originalColumn});p.source!=null&&(d.source=p.source,r!=null&&(d.source=Be.join(r,d.source)),o!=null&&(d.source=Be.relative(o,d.source)),d.originalLine=p.line,d.originalColumn=p.column,p.name!=null&&(d.name=p.name))}var w=d.source;w!=null&&!u.has(w)&&u.add(w);var y=d.name;y!=null&&!f.has(y)&&f.add(y)},this),this._sources=u,this._names=f,e.sources.forEach(function(d){var p=e.sourceContentFor(d);p!=null&&(r!=null&&(d=Be.join(r,d)),o!=null&&(d=Be.relative(o,d)),this.setSourceContent(d,p))},this)};Ct.prototype._validateMapping=function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}};Ct.prototype._serializeMappings=function(){for(var e=0,n=1,r=0,i=0,o=0,u=0,f="",d,p,w,y,_=this._mappings.toArray(),M=0,V=_.length;M<V;M++){if(p=_[M],d="",p.generatedLine!==n)for(e=0;p.generatedLine!==n;)d+=";",n++;else if(M>0){if(!Be.compareByGeneratedPositionsInflated(p,_[M-1]))continue;d+=","}d+=hi.encode(p.generatedColumn-e),e=p.generatedColumn,p.source!=null&&(y=this._sources.indexOf(p.source),d+=hi.encode(y-u),u=y,d+=hi.encode(p.originalLine-1-i),i=p.originalLine-1,d+=hi.encode(p.originalColumn-r),r=p.originalColumn,p.name!=null&&(w=this._names.indexOf(p.name),d+=hi.encode(w-o),o=w)),f+=d}return f};Ct.prototype._generateSourcesContent=function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Be.relative(n,r));var i=Be.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)};Ct.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Ct.prototype.toString=function(){return JSON.stringify(this.toJSON())};$c.SourceMapGenerator=Ct});var Xc=fe(jn=>{jn.GREATEST_LOWER_BOUND=1;jn.LEAST_UPPER_BOUND=2;function Xo(t,e,n,r,i,o){var u=Math.floor((e-t)/2)+t,f=i(n,r[u],!0);return f===0?u:f>0?e-u>1?Xo(u,e,n,r,i,o):o==jn.LEAST_UPPER_BOUND?e<r.length?e:-1:u:u-t>1?Xo(t,u,n,r,i,o):o==jn.LEAST_UPPER_BOUND?u:t<0?-1:t}jn.search=function(e,n,r,i){if(n.length===0)return-1;var o=Xo(-1,n.length,e,n,r,i||jn.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o}});var tf=fe(ef=>{function eu(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function xy(t,e){return Math.round(t+Math.random()*(e-t))}function tu(t,e,n,r){if(n<r){var i=xy(n,r),o=n-1;eu(t,i,r);for(var u=t[r],f=n;f<r;f++)e(t[f],u)<=0&&(o+=1,eu(t,o,f));eu(t,o+1,f);var d=o+1;tu(t,e,n,d-1),tu(t,e,d+1,r)}}ef.quickSort=function(t,e){tu(t,e,0,t.length-1)}});var rf=fe(Bs=>{var te=vr(),nu=Xc(),Dr=Qo().ArraySet,Oy=zo(),di=tf().quickSort;function ke(t,e){var n=t;return typeof t=="string"&&(n=te.parseSourceMapInput(t)),n.sections!=null?new Pt(n,e):new Ye(n,e)}ke.fromSourceMap=function(t,e){return Ye.fromSourceMap(t,e)};ke.prototype._version=3;ke.prototype.__generatedMappings=null;Object.defineProperty(ke.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});ke.prototype.__originalMappings=null;Object.defineProperty(ke.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});ke.prototype._charIsMappingSeparator=function(e,n){var r=e.charAt(n);return r===";"||r===","};ke.prototype._parseMappings=function(e,n){throw new Error("Subclasses must implement _parseMappings")};ke.GENERATED_ORDER=1;ke.ORIGINAL_ORDER=2;ke.GREATEST_LOWER_BOUND=1;ke.LEAST_UPPER_BOUND=2;ke.prototype.eachMapping=function(e,n,r){var i=n||null,o=r||ke.GENERATED_ORDER,u;switch(o){case ke.GENERATED_ORDER:u=this._generatedMappings;break;case ke.ORIGINAL_ORDER:u=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var f=this.sourceRoot;u.map(function(d){var p=d.source===null?null:this._sources.at(d.source);return p=te.computeSourceURL(f,p,this._sourceMapURL),{source:p,generatedLine:d.generatedLine,generatedColumn:d.generatedColumn,originalLine:d.originalLine,originalColumn:d.originalColumn,name:d.name===null?null:this._names.at(d.name)}},this).forEach(e,i)};ke.prototype.allGeneratedPositionsFor=function(e){var n=te.getArg(e,"line"),r={source:te.getArg(e,"source"),originalLine:n,originalColumn:te.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",te.compareByOriginalPositions,nu.LEAST_UPPER_BOUND);if(o>=0){var u=this._originalMappings[o];if(e.column===void 0)for(var f=u.originalLine;u&&u.originalLine===f;)i.push({line:te.getArg(u,"generatedLine",null),column:te.getArg(u,"generatedColumn",null),lastColumn:te.getArg(u,"lastGeneratedColumn",null)}),u=this._originalMappings[++o];else for(var d=u.originalColumn;u&&u.originalLine===n&&u.originalColumn==d;)i.push({line:te.getArg(u,"generatedLine",null),column:te.getArg(u,"generatedColumn",null),lastColumn:te.getArg(u,"lastGeneratedColumn",null)}),u=this._originalMappings[++o]}return i};Bs.SourceMapConsumer=ke;function Ye(t,e){var n=t;typeof t=="string"&&(n=te.parseSourceMapInput(t));var r=te.getArg(n,"version"),i=te.getArg(n,"sources"),o=te.getArg(n,"names",[]),u=te.getArg(n,"sourceRoot",null),f=te.getArg(n,"sourcesContent",null),d=te.getArg(n,"mappings"),p=te.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);u&&(u=te.normalize(u)),i=i.map(String).map(te.normalize).map(function(w){return u&&te.isAbsolute(u)&&te.isAbsolute(w)?te.relative(u,w):w}),this._names=Dr.fromArray(o.map(String),!0),this._sources=Dr.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(w){return te.computeSourceURL(u,w,e)}),this.sourceRoot=u,this.sourcesContent=f,this._mappings=d,this._sourceMapURL=e,this.file=p}Ye.prototype=Object.create(ke.prototype);Ye.prototype.consumer=ke;Ye.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=te.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};Ye.fromSourceMap=function(e,n){var r=Object.create(Ye.prototype),i=r._names=Dr.fromArray(e._names.toArray(),!0),o=r._sources=Dr.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(M){return te.computeSourceURL(r.sourceRoot,M,n)});for(var u=e._mappings.toArray().slice(),f=r.__generatedMappings=[],d=r.__originalMappings=[],p=0,w=u.length;p<w;p++){var y=u[p],_=new nf;_.generatedLine=y.generatedLine,_.generatedColumn=y.generatedColumn,y.source&&(_.source=o.indexOf(y.source),_.originalLine=y.originalLine,_.originalColumn=y.originalColumn,y.name&&(_.name=i.indexOf(y.name)),d.push(_)),f.push(_)}return di(r.__originalMappings,te.compareByOriginalPositions),r};Ye.prototype._version=3;Object.defineProperty(Ye.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function nf(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Ye.prototype._parseMappings=function(e,n){for(var r=1,i=0,o=0,u=0,f=0,d=0,p=e.length,w=0,y={},_={},M=[],V=[],oe,pe,me,Ce,He;w<p;)if(e.charAt(w)===";")r++,w++,i=0;else if(e.charAt(w)===",")w++;else{for(oe=new nf,oe.generatedLine=r,Ce=w;Ce<p&&!this._charIsMappingSeparator(e,Ce);Ce++);if(pe=e.slice(w,Ce),me=y[pe],me)w+=pe.length;else{for(me=[];w<Ce;)Oy.decode(e,w,_),He=_.value,w=_.rest,me.push(He);if(me.length===2)throw new Error("Found a source, but no line and column");if(me.length===3)throw new Error("Found a source and line, but no column");y[pe]=me}oe.generatedColumn=i+me[0],i=oe.generatedColumn,me.length>1&&(oe.source=f+me[1],f+=me[1],oe.originalLine=o+me[2],o=oe.originalLine,oe.originalLine+=1,oe.originalColumn=u+me[3],u=oe.originalColumn,me.length>4&&(oe.name=d+me[4],d+=me[4])),V.push(oe),typeof oe.originalLine=="number"&&M.push(oe)}di(V,te.compareByGeneratedPositionsDeflated),this.__generatedMappings=V,di(M,te.compareByOriginalPositions),this.__originalMappings=M};Ye.prototype._findMapping=function(e,n,r,i,o,u){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return nu.search(e,n,o,u)};Ye.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}};Ye.prototype.originalPositionFor=function(e){var n={generatedLine:te.getArg(e,"line"),generatedColumn:te.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",te.compareByGeneratedPositionsDeflated,te.getArg(e,"bias",ke.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=te.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=te.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var u=te.getArg(i,"name",null);return u!==null&&(u=this._names.at(u)),{source:o,line:te.getArg(i,"originalLine",null),column:te.getArg(i,"originalColumn",null),name:u}}}return{source:null,line:null,column:null,name:null}};Ye.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Ye.prototype.sourceContentFor=function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=te.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=te.urlParse(this.sourceRoot))){var u=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(u))return this.sourcesContent[this._sources.indexOf(u)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')};Ye.prototype.generatedPositionFor=function(e){var n=te.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:te.getArg(e,"line"),originalColumn:te.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",te.compareByOriginalPositions,te.getArg(e,"bias",ke.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:te.getArg(o,"generatedLine",null),column:te.getArg(o,"generatedColumn",null),lastColumn:te.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Bs.BasicSourceMapConsumer=Ye;function Pt(t,e){var n=t;typeof t=="string"&&(n=te.parseSourceMapInput(t));var r=te.getArg(n,"version"),i=te.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new Dr,this._names=new Dr;var o={line:-1,column:0};this._sections=i.map(function(u){if(u.url)throw new Error("Support for url field in sections not implemented.");var f=te.getArg(u,"offset"),d=te.getArg(f,"line"),p=te.getArg(f,"column");if(d<o.line||d===o.line&&p<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=f,{generatedOffset:{generatedLine:d+1,generatedColumn:p+1},consumer:new ke(te.getArg(u,"map"),e)}})}Pt.prototype=Object.create(ke.prototype);Pt.prototype.constructor=ke;Pt.prototype._version=3;Object.defineProperty(Pt.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t}});Pt.prototype.originalPositionFor=function(e){var n={generatedLine:te.getArg(e,"line"),generatedColumn:te.getArg(e,"column")},r=nu.search(n,this._sections,function(o,u){var f=o.generatedLine-u.generatedOffset.generatedLine;return f||o.generatedColumn-u.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Pt.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Pt.prototype.sourceContentFor=function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Pt.prototype.generatedPositionFor=function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(te.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Pt.prototype._parseMappings=function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,u=0;u<o.length;u++){var f=o[u],d=i.consumer._sources.at(f.source);d=te.computeSourceURL(i.consumer.sourceRoot,d,this._sourceMapURL),this._sources.add(d),d=this._sources.indexOf(d);var p=null;f.name&&(p=i.consumer._names.at(f.name),this._names.add(p),p=this._names.indexOf(p));var w={source:d,generatedLine:f.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:f.generatedColumn+(i.generatedOffset.generatedLine===f.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:f.originalLine,originalColumn:f.originalColumn,name:p};this.__generatedMappings.push(w),typeof w.originalLine=="number"&&this.__originalMappings.push(w)}di(this.__generatedMappings,te.compareByGeneratedPositionsDeflated),di(this.__originalMappings,te.compareByOriginalPositions)};Bs.IndexedSourceMapConsumer=Pt});var af=fe(sf=>{var Ty=$o().SourceMapGenerator,Rs=vr(),My=/(\r?\n)/,Ay=10,br="$$$isSourceNode$$$";function mt(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t==null?null:t,this.column=e==null?null:e,this.source=n==null?null:n,this.name=i==null?null:i,this[br]=!0,r!=null&&this.add(r)}mt.fromStringWithSourceMap=function(e,n,r){var i=new mt,o=e.split(My),u=0,f=function(){var _=V(),M=V()||"";return _+M;function V(){return u<o.length?o[u++]:void 0}},d=1,p=0,w=null;return n.eachMapping(function(_){if(w!==null)if(d<_.generatedLine)y(w,f()),d++,p=0;else{var M=o[u]||"",V=M.substr(0,_.generatedColumn-p);o[u]=M.substr(_.generatedColumn-p),p=_.generatedColumn,y(w,V),w=_;return}for(;d<_.generatedLine;)i.add(f()),d++;if(p<_.generatedColumn){var M=o[u]||"";i.add(M.substr(0,_.generatedColumn)),o[u]=M.substr(_.generatedColumn),p=_.generatedColumn}w=_},this),u<o.length&&(w&&y(w,f()),i.add(o.splice(u).join(""))),n.sources.forEach(function(_){var M=n.sourceContentFor(_);M!=null&&(r!=null&&(_=Rs.join(r,_)),i.setSourceContent(_,M))}),i;function y(_,M){if(_===null||_.source===void 0)i.add(M);else{var V=r?Rs.join(r,_.source):_.source;i.add(new mt(_.originalLine,_.originalColumn,V,M,_.name))}}};mt.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[br]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};mt.prototype.prepend=function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[br]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};mt.prototype.walk=function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[br]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})};mt.prototype.join=function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this};mt.prototype.replaceRight=function(e,n){var r=this.children[this.children.length-1];return r[br]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this};mt.prototype.setSourceContent=function(e,n){this.sourceContents[Rs.toSetString(e)]=n};mt.prototype.walkSourceContents=function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][br]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(Rs.fromSetString(i[n]),this.sourceContents[i[n]])};mt.prototype.toString=function(){var e="";return this.walk(function(n){e+=n}),e};mt.prototype.toStringWithSourceMap=function(e){var n={code:"",line:1,column:0},r=new Ty(e),i=!1,o=null,u=null,f=null,d=null;return this.walk(function(p,w){n.code+=p,w.source!==null&&w.line!==null&&w.column!==null?((o!==w.source||u!==w.line||f!==w.column||d!==w.name)&&r.addMapping({source:w.source,original:{line:w.line,column:w.column},generated:{line:n.line,column:n.column},name:w.name}),o=w.source,u=w.line,f=w.column,d=w.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var y=0,_=p.length;y<_;y++)p.charCodeAt(y)===Ay?(n.line++,n.column=0,y+1===_?(o=null,i=!1):i&&r.addMapping({source:w.source,original:{line:w.line,column:w.column},generated:{line:n.line,column:n.column},name:w.name})):n.column++}),this.walkSourceContents(function(p,w){r.setSourceContent(p,w)}),{code:n.code,map:r}};sf.SourceNode=mt});var of=fe(Hs=>{Hs.SourceMapGenerator=$o().SourceMapGenerator;Hs.SourceMapConsumer=rf().SourceMapConsumer;Hs.SourceNode=af().SourceNode});var ff=fe((Gs,cf)=>{"use strict";Gs.__esModule=!0;var iu=at(),Wn=void 0;try{(typeof define!="function"||!define.amd)&&(uf=of(),Wn=uf.SourceNode)}catch(t){}var uf;Wn||(Wn=function(t,e,n,r){this.src="",r&&this.add(r)},Wn.prototype={add:function(e){iu.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){iu.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function ru(t,e,n){if(iu.isArray(t)){for(var r=[],i=0,o=t.length;i<o;i++)r.push(e.wrap(t[i],n));return r}else if(typeof t=="boolean"||typeof t=="number")return t+"";return t}function lf(t){this.srcFile=t,this.source=[]}lf.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,n){this.source.unshift(this.wrap(e,n))},push:function(e,n){this.source.push(this.wrap(e,n))},merge:function(){var e=this.empty();return this.each(function(n){e.add(["  ",n,`
`])}),e},each:function(e){for(var n=0,r=this.source.length;n<r;n++)e(this.source[n])},empty:function(){var e=this.currentLocation||{start:{}};return new Wn(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var n=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return e instanceof Wn?e:(e=ru(e,this,n),new Wn(n.start.line,n.start.column,this.srcFile,e))},functionCall:function(e,n,r){return r=this.generateList(r),this.wrap([e,n?"."+n+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var n=this,r=[];Object.keys(e).forEach(function(o){var u=ru(e[o],n);u!=="undefined"&&r.push([n.quotedString(o),":",u])});var i=this.generateList(r);return i.prepend("{"),i.add("}"),i},generateList:function(e){for(var n=this.empty(),r=0,i=e.length;r<i;r++)r&&n.add(","),n.add(ru(e[r],this));return n},generateArray:function(e){var n=this.generateList(e);return n.prepend("["),n.add("]"),n}};Gs.default=lf;cf.exports=Gs.default});var gf=fe((Vs,mf)=>{"use strict";Vs.__esModule=!0;function pf(t){return t&&t.__esModule?t:{default:t}}var hf=Fs(),Iy=Et(),su=pf(Iy),Py=at(),Ny=ff(),df=pf(Ny);function wr(t){this.value=t}function Er(){}Er.prototype={nameLookup:function(e,n){return this.internalNameLookup(e,n)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=hf.COMPILER_REVISION,n=hf.REVISION_CHANGES[e];return[e,n]},appendToBuffer:function(e,n,r){return Py.isArray(e)||(e=[e]),e=this.source.wrap(e,n),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,n){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(n),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,n,r,i){this.environment=e,this.options=n,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,n),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,u=void 0,f=void 0,d=void 0,p=void 0;for(d=0,p=o.length;d<p;d++)u=o[d],this.source.currentLocation=u.loc,f=f||u.loc,this[u.opcode].apply(this,u.args);if(this.source.currentLocation=f,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new su.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var w=this.createFunctionContext(i);if(this.isChild)return w;var y={compiler:this.compilerInfo(),main:w};this.decorators&&(y.main_d=this.decorators,y.useDecorators=!0);var _=this.context,M=_.programs,V=_.decorators;for(d=0,p=M.length;d<p;d++)M[d]&&(y[d]=M[d],V[d]&&(y[d+"_d"]=V[d],y.useDecorators=!0));return this.environment.usePartial&&(y.usePartial=!0),this.options.data&&(y.useData=!0),this.useDepths&&(y.useDepths=!0),this.useBlockParams&&(y.useBlockParams=!0),this.options.compat&&(y.compat=!0),i?y.compilerOptions=this.options:(y.compiler=JSON.stringify(y.compiler),this.source.currentLocation={start:{line:1,column:0}},y=this.objectLiteral(y),n.srcName?(y=y.toStringWithSourceMap({file:n.destName}),y.map=y.map&&y.map.toString()):y=y.toString()),y},preamble:function(){this.lastContext=0,this.source=new df.default(this.options.srcName),this.decorators=new df.default(this.options.srcName)},createFunctionContext:function(e){var n=this,r="",i=this.stackVars.concat(this.registers.list);i.length>0&&(r+=", "+i.join(", "));var o=0;Object.keys(this.aliases).forEach(function(d){var p=n.aliases[d];p.children&&p.referenceCount>1&&(r+=", alias"+ ++o+"="+d,p.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(r+=", "+this.lookupPropertyFunctionVarDeclaration());var u=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&u.push("blockParams"),this.useDepths&&u.push("depths");var f=this.mergeSource(r);return e?(u.push(f),Function.apply(this,u)):this.source.wrap(["function(",u.join(","),`) {
  `,f,"}"])},mergeSource:function(e){var n=this.environment.isSimple,r=!this.forceBuffer,i=void 0,o=void 0,u=void 0,f=void 0;return this.source.each(function(d){d.appendToBuffer?(u?d.prepend("  + "):u=d,f=d):(u&&(o?u.prepend("buffer += "):i=!0,f.add(";"),u=f=void 0),o=!0,n||(r=!1))}),r?u?(u.prepend("return "),f.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),u?(u.prepend("return buffer + "),f.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(e){var n=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)];this.setupHelperArgs(e,0,r);var i=this.popStack();r.splice(1,0,i),this.push(this.source.functionCall(n,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs("",0,n,!0),this.flushInline();var r=this.topStack();n.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",n),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(n){return[" != null ? ",n,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,n,r,i){var o=0;!i&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(e[o++])):this.pushContext(),this.resolvePath("context",e,o,n,r)},lookupBlockParam:function(e,n){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",n,1)},lookupData:function(e,n,r){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",n,0,!0,r)},resolvePath:function(e,n,r,i,o){var u=this;if(this.options.strict||this.options.assumeObjects){this.push(Ly(this.options.strict&&o,this,n,r,e));return}for(var f=n.length;r<f;r++)this.replaceStack(function(d){var p=u.nameLookup(d,n[r],e);return i?[" && ",p]:[" != null ? ",p," : ",d]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,n){this.pushContext(),this.pushString(n),n!=="SubExpression"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,n){var r=this.nameLookup("decorators",n,"decorator"),i=this.setupHelperArgs(n,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,n,r){var i=this.popStack(),o=this.setupHelper(e,n),u=[];r&&u.push(o.name),u.push(i),this.options.strict||u.push(this.aliasable("container.hooks.helperMissing"));var f=["(",this.itemsSeparatedBy(u,"||"),")"],d=this.source.functionCall(f,"call",o.callParams);this.push(d)},itemsSeparatedBy:function(e,n){var r=[];r.push(e[0]);for(var i=1;i<e.length;i++)r.push(n,e[i]);return r},invokeKnownHelper:function(e,n){var r=this.setupHelper(e,n);this.push(this.source.functionCall(r.name,"call",r.callParams))},invokeAmbiguous:function(e,n){this.useRegister("helper");var r=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,n),o=this.lastHelper=this.nameLookup("helpers",e,"helper"),u=["(","(helper = ",o," || ",r,")"];this.options.strict||(u[0]="(helper = ",u.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",u,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,n,r){var i=[],o=this.setupParams(n,1,i);e&&(n=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?i.unshift(n):i.unshift(this.nameLookup("partials",n,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),i.push(o),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var n=this.popStack(),r=void 0,i=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(i=this.popStack(),r=this.popStack());var u=this.hash;r&&(u.contexts[e]=r),i&&(u.types[e]=i),o&&(u.ids[e]=o),u.values[e]=n},pushId:function(e,n,r){e==="BlockParam"?this.pushStackLiteral("blockParams["+n[0]+"].path["+n[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):e==="PathExpression"?this.pushString(n):e==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:Er,compileChildren:function(e,n){for(var r=e.children,i=void 0,o=void 0,u=0,f=r.length;u<f;u++){i=r[u],o=new this.compiler;var d=this.matchExistingProgram(i);if(d==null){this.context.programs.push("");var p=this.context.programs.length;i.index=p,i.name="program"+p,this.context.programs[p]=o.compile(i,n,this.context,!this.precompile),this.context.decorators[p]=o.decorators,this.context.environments[p]=i,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=d.index,i.name="program"+d.index,this.useDepths=this.useDepths||d.useDepths,this.useBlockParams=this.useBlockParams||d.useBlockParams}},matchExistingProgram:function(e){for(var n=0,r=this.context.environments.length;n<r;n++){var i=this.context.environments[n];if(i&&i.equals(e))return i}},programExpression:function(e){var n=this.environment.children[e],r=[n.index,"data",n.blockParams];return(this.useBlockParams||this.useDepths)&&r.push("blockParams"),this.useDepths&&r.push("depths"),"container.program("+r.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof wr||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new wr(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var n=["("],r=void 0,i=void 0,o=void 0;if(!this.isInline())throw new su.default("replaceStack on non-inline");var u=this.popStack(!0);if(u instanceof wr)r=[u.value],n=["(",r],o=!0;else{i=!0;var f=this.incrStack();n=["((",this.push(f)," = ",u,")"],r=this.topStack()}var d=e.call(this,r);o||this.popStack(),i&&this.stackSlot--,this.push(n.concat(d,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i instanceof wr)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var n=this.isInline(),r=(n?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof wr)return r.value;if(!n){if(!this.stackSlot)throw new su.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return n instanceof wr?n.value:n},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var n=this.aliases[e];return n?(n.referenceCount++,n):(n=this.aliases[e]=this.source.wrap(e),n.aliasable=!0,n.referenceCount=1,n)},setupHelper:function(e,n,r){var i=[],o=this.setupHelperArgs(n,e,i,r),u=this.nameLookup("helpers",n,"helper"),f=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:i,paramsInit:o,name:u,callParams:[f].concat(i)}},setupParams:function(e,n,r){var i={},o=[],u=[],f=[],d=!r,p=void 0;d&&(r=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var w=this.popStack(),y=this.popStack();(y||w)&&(i.fn=y||"container.noop",i.inverse=w||"container.noop");for(var _=n;_--;)p=this.popStack(),r[_]=p,this.trackIds&&(f[_]=this.popStack()),this.stringParams&&(u[_]=this.popStack(),o[_]=this.popStack());return d&&(i.args=this.source.generateArray(r)),this.trackIds&&(i.ids=this.source.generateArray(f)),this.stringParams&&(i.types=this.source.generateArray(u),i.contexts=this.source.generateArray(o)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,n,r,i){var o=this.setupParams(e,n,r);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),i?(this.useRegister("options"),r.push("options"),["options=",o]):r?(r.push(o),""):o}};(function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=Er.RESERVED_WORDS={},n=0,r=t.length;n<r;n++)e[t[n]]=!0})();Er.isValidJavaScriptVariableName=function(t){return!Er.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)};function Ly(t,e,n,r,i){var o=e.popStack(),u=n.length;for(t&&u--;r<u;r++)o=e.nameLookup(o,n[r],i);return t?[e.aliasable("container.strict"),"(",o,", ",e.quotedString(n[r]),", ",JSON.stringify(e.source.currentLocation)," )"]:o}Vs.default=Er;mf.exports=Vs.default});var uu=fe((Ks,vf)=>{"use strict";Ks.__esModule=!0;function pi(t){return t&&t.__esModule?t:{default:t}}var By=Dc(),Ry=pi(By),Hy=No(),Gy=pi(Hy),au=Ac(),ou=Lc(),Vy=gf(),Ky=pi(Vy),qy=Bo(),Uy=pi(qy),jy=Mo(),Wy=pi(jy),zy=Ry.default.create;function yf(){var t=zy();return t.compile=function(e,n){return ou.compile(e,n,t)},t.precompile=function(e,n){return ou.precompile(e,n,t)},t.AST=Gy.default,t.Compiler=ou.Compiler,t.JavaScriptCompiler=Ky.default,t.Parser=au.parser,t.parse=au.parse,t.parseWithoutProcessing=au.parseWithoutProcessing,t}var Fr=yf();Fr.create=yf;Wy.default(Fr);Fr.Visitor=Uy.default;Fr.default=Fr;Ks.default=Fr;vf.exports=Ks.default});var Fd=fe($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});require("obsidian");var pn=class extends Error{},bu=class extends pn{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},wu=class extends pn{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Eu=class extends pn{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Jn=class extends pn{},aa=class extends pn{constructor(e){super(`Invalid unit ${e}`)}},ht=class extends pn{},Jt=class extends pn{constructor(){super("Zone is an abstract class")}},J="numeric",Rt="short",yt="long",oa={year:J,month:J,day:J},Fh={year:J,month:Rt,day:J},Ov={year:J,month:Rt,day:J,weekday:Rt},Ch={year:J,month:yt,day:J},_h={year:J,month:yt,day:J,weekday:yt},Sh={hour:J,minute:J},kh={hour:J,minute:J,second:J},xh={hour:J,minute:J,second:J,timeZoneName:Rt},Oh={hour:J,minute:J,second:J,timeZoneName:yt},Th={hour:J,minute:J,hourCycle:"h23"},Mh={hour:J,minute:J,second:J,hourCycle:"h23"},Ah={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:Rt},Ih={hour:J,minute:J,second:J,hourCycle:"h23",timeZoneName:yt},Ph={year:J,month:J,day:J,hour:J,minute:J},Nh={year:J,month:J,day:J,hour:J,minute:J,second:J},Lh={year:J,month:Rt,day:J,hour:J,minute:J},Bh={year:J,month:Rt,day:J,hour:J,minute:J,second:J},Tv={year:J,month:Rt,day:J,weekday:Rt,hour:J,minute:J},Rh={year:J,month:yt,day:J,hour:J,minute:J,timeZoneName:Rt},Hh={year:J,month:yt,day:J,hour:J,minute:J,second:J,timeZoneName:Rt},Gh={year:J,month:yt,day:J,weekday:yt,hour:J,minute:J,timeZoneName:yt},Vh={year:J,month:yt,day:J,weekday:yt,hour:J,minute:J,second:J,timeZoneName:yt},Xn=class{get type(){throw new Jt}get name(){throw new Jt}get ianaName(){return this.name}get isUniversal(){throw new Jt}offsetName(e,n){throw new Jt}formatOffset(e,n){throw new Jt}offset(e){throw new Jt}equals(e){throw new Jt}get isValid(){throw new Jt}},hu=null,Or=class extends Xn{static get instance(){return hu===null&&(hu=new Or),hu}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return qh(e,n,r)}formatOffset(e,n){return _i(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},ia={};function Mv(t){return ia[t]||(ia[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ia[t]}var Av={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Iv(t,e){let n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,o,u,f,d,p,w]=r;return[u,i,o,f,d,p,w]}function Pv(t,e){let n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){let{type:o,value:u}=n[i],f=Av[o];o==="era"?r[f]=u:ye(f)||(r[f]=parseInt(u,10))}return r}var $s={},Ht=class extends Xn{static create(e){return $s[e]||($s[e]=new Ht(e)),$s[e]}static resetCache(){$s={},ia={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(n){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ht.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return qh(e,n,r,this.name)}formatOffset(e,n){return _i(this.offset(e),n)}offset(e){let n=new Date(e);if(isNaN(n))return NaN;let r=Mv(this.name),[i,o,u,f,d,p,w]=r.formatToParts?Pv(r,n):Iv(r,n);f==="BC"&&(i=-Math.abs(i)+1);let _=ma({year:i,month:o,day:u,hour:d===24?0:d,minute:p,second:w,millisecond:0}),M=+n,V=M%1e3;return M-=V>=0?V:1e3+V,(_-M)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},Wf={};function Nv(t,e={}){let n=JSON.stringify([t,e]),r=Wf[n];return r||(r=new Intl.ListFormat(t,e),Wf[n]=r),r}var Fu={};function Cu(t,e={}){let n=JSON.stringify([t,e]),r=Fu[n];return r||(r=new Intl.DateTimeFormat(t,e),Fu[n]=r),r}var _u={};function Lv(t,e={}){let n=JSON.stringify([t,e]),r=_u[n];return r||(r=new Intl.NumberFormat(t,e),_u[n]=r),r}var Su={};function Bv(t,e={}){let{base:n,...r}=e,i=JSON.stringify([t,r]),o=Su[i];return o||(o=new Intl.RelativeTimeFormat(t,e),Su[i]=o),o}var Fi=null;function Rv(){return Fi||(Fi=new Intl.DateTimeFormat().resolvedOptions().locale,Fi)}function Hv(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=Cu(t).resolvedOptions(),i=t}catch(f){let d=t.substring(0,n);r=Cu(d).resolvedOptions(),i=d}let{numberingSystem:o,calendar:u}=r;return[i,o,u]}}function Gv(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function Vv(t){let e=[];for(let n=1;n<=12;n++){let r=ne.utc(2009,n,1);e.push(t(r))}return e}function Kv(t){let e=[];for(let n=1;n<=7;n++){let r=ne.utc(2016,11,13+n);e.push(t(r))}return e}function Xs(t,e,n,r){let i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function qv(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var ku=class{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:o,...u}=r;if(!n||Object.keys(u).length>0){let f={useGrouping:!1,...r};r.padTo>0&&(f.minimumIntegerDigits=r.padTo),this.inf=Lv(e,f)}}format(e){if(this.inf){let n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{let n=this.floor?Math.floor(e):Hu(e,3);return Re(n,this.padTo)}}},xu=class{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let u=-1*(e.offset/60),f=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&Ht.create(f).valid?(i=f,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=Cu(n,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},Ou=class{constructor(e,n,r){this.opts={style:"long",...r},!n&&Kh()&&(this.rtf=Bv(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):sD(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}},_e=class{static fromOpts(e){return _e.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,r,i=!1){let o=e||Ie.defaultLocale,u=o||(i?"en-US":Rv()),f=n||Ie.defaultNumberingSystem,d=r||Ie.defaultOutputCalendar;return new _e(u,f,d,o)}static resetCache(){Fi=null,Fu={},_u={},Su={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r}={}){return _e.create(e,n,r)}constructor(e,n,r,i){let[o,u,f]=Hv(e);this.locale=o,this.numberingSystem=n||u||null,this.outputCalendar=r||f||null,this.intl=Gv(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=qv(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:_e.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return Xs(this,e,Wh,()=>{let r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=Vv(o=>this.extract(o,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Xs(this,e,Zh,()=>{let r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Kv(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Xs(this,void 0,()=>Jh,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ne.utc(2016,11,13,9),ne.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Xs(this,e,Qh,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[ne.utc(-40,1,1),ne.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){let i=this.dtFormatter(e,n),o=i.formatToParts(),u=o.find(f=>f.type.toLowerCase()===r);return u?u.value:null}numberFormatter(e={}){return new ku(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new xu(e,this.intl,n)}relFormatter(e={}){return new Ou(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Nv(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},du=null,Ze=class extends Xn{static get utcInstance(){return du===null&&(du=new Ze(0)),du}static instance(e){return e===0?Ze.utcInstance:new Ze(e)}static parseSpecifier(e){if(e){let n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Ze(ga(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_i(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_i(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return _i(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Tu=class extends Xn{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function An(t,e){if(ye(t)||t===null)return e;if(t instanceof Xn)return t;if(Uv(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Or.instance:n==="utc"||n==="gmt"?Ze.utcInstance:Ze.parseSpecifier(n)||Ht.create(t)}else return $n(t)?Ze.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Tu(t)}var zf=()=>Date.now(),Yf="system",Zf=null,Jf=null,Qf=null,$f=60,Xf,Ie=class{static get now(){return zf}static set now(e){zf=e}static set defaultZone(e){Yf=e}static get defaultZone(){return An(Yf,Or.instance)}static get defaultLocale(){return Zf}static set defaultLocale(e){Zf=e}static get defaultNumberingSystem(){return Jf}static set defaultNumberingSystem(e){Jf=e}static get defaultOutputCalendar(){return Qf}static set defaultOutputCalendar(e){Qf=e}static get twoDigitCutoffYear(){return $f}static set twoDigitCutoffYear(e){$f=e%100}static get throwOnInvalid(){return Xf}static set throwOnInvalid(e){Xf=e}static resetCaches(){_e.resetCache(),Ht.resetCache()}};function ye(t){return typeof t=="undefined"}function $n(t){return typeof t=="number"}function pa(t){return typeof t=="number"&&t%1===0}function Uv(t){return typeof t=="string"}function jv(t){return Object.prototype.toString.call(t)==="[object Date]"}function Kh(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(t){return!1}}function Wv(t){return Array.isArray(t)?t:[t]}function eh(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{let o=[e(i),i];return r&&n(r[0],o[0])===r[0]?r:o},null)[1]}function zv(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function Tr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dn(t,e,n){return pa(t)&&t>=e&&t<=n}function Yv(t,e){return t-e*Math.floor(t/e)}function Re(t,e=2){let n=t<0,r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Mn(t){if(!(ye(t)||t===null||t===""))return parseInt(t,10)}function Yn(t){if(!(ye(t)||t===null||t===""))return parseFloat(t)}function Ru(t){if(!(ye(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Hu(t,e,n=!1){let r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Ti(t){return t%4===0&&(t%100!==0||t%400===0)}function Ci(t){return Ti(t)?366:365}function ua(t,e){let n=Yv(e-1,12)+1,r=t+(e-n)/12;return n===2?Ti(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ma(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function la(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||r===3?53:52}function Mu(t){return t>99?t:t>Ie.twoDigitCutoffYear?1900+t:2e3+t}function qh(t,e,n,r=null){let i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);let u={timeZoneName:e,...o},f=new Intl.DateTimeFormat(n,u).formatToParts(i).find(d=>d.type.toLowerCase()==="timezonename");return f?f.value:null}function ga(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);let r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Uh(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ht(`Invalid unit value ${t}`);return e}function ca(t,e){let n={};for(let r in t)if(Tr(t,r)){let i=t[r];if(i==null)continue;n[e(r)]=Uh(i)}return n}function _i(t,e){let n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Re(n,2)}:${Re(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Re(n,2)}${Re(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function ya(t){return zv(t,["hour","minute","second","millisecond"])}var Zv=["January","February","March","April","May","June","July","August","September","October","November","December"],jh=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Jv=["J","F","M","A","M","J","J","A","S","O","N","D"];function Wh(t){switch(t){case"narrow":return[...Jv];case"short":return[...jh];case"long":return[...Zv];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var zh=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Yh=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Qv=["M","T","W","T","F","S","S"];function Zh(t){switch(t){case"narrow":return[...Qv];case"short":return[...Yh];case"long":return[...zh];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Jh=["AM","PM"],$v=["Before Christ","Anno Domini"],Xv=["BC","AD"],eD=["B","A"];function Qh(t){switch(t){case"narrow":return[...eD];case"short":return[...Xv];case"long":return[...$v];default:return null}}function tD(t){return Jh[t.hour<12?0:1]}function nD(t,e){return Zh(e)[t.weekday-1]}function rD(t,e){return Wh(e)[t.month-1]}function iD(t,e){return Qh(e)[t.year<0?0:1]}function sD(t,e,n="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&o){let y=t==="days";switch(e){case 1:return y?"tomorrow":`next ${i[t][0]}`;case-1:return y?"yesterday":`last ${i[t][0]}`;case 0:return y?"today":`this ${i[t][0]}`}}let u=Object.is(e,-0)||e<0,f=Math.abs(e),d=f===1,p=i[t],w=r?d?p[1]:p[2]||p[1]:d?i[t][0]:t;return u?`${f} ${w} ago`:`in ${f} ${w}`}function th(t,e){let n="";for(let r of t)r.literal?n+=r.val:n+=e(r.val);return n}var aD={D:oa,DD:Fh,DDD:Ch,DDDD:_h,t:Sh,tt:kh,ttt:xh,tttt:Oh,T:Th,TT:Mh,TTT:Ah,TTTT:Ih,f:Ph,ff:Lh,fff:Rh,ffff:Gh,F:Nh,FF:Bh,FFF:Hh,FFFF:Vh},Ue=class{static create(e,n={}){return new Ue(e,n)}static parseFormat(e){let n=null,r="",i=!1,o=[];for(let u=0;u<e.length;u++){let f=e.charAt(u);f==="'"?(r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||f===n?r+=f:(r.length>0&&o.push({literal:/^\s+$/.test(r),val:r}),r=f,n=f)}return r.length>0&&o.push({literal:i||/^\s+$/.test(r),val:r}),o}static macroTokenToFormatOpts(e){return aD[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Re(e,n);let r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(M,V)=>this.loc.extract(e,M,V),u=M=>e.isOffsetFixed&&e.offset===0&&M.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,M.format):"",f=()=>r?tD(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),d=(M,V)=>r?rD(e,M):o(V?{month:M}:{month:M,day:"numeric"},"month"),p=(M,V)=>r?nD(e,M):o(V?{weekday:M}:{weekday:M,month:"long",day:"numeric"},"weekday"),w=M=>{let V=Ue.macroTokenToFormatOpts(M);return V?this.formatWithSystemDefault(e,V):M},y=M=>r?iD(e,M):o({era:M},"era"),_=M=>{switch(M){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return f();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return p("short",!0);case"cccc":return p("long",!0);case"ccccc":return p("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return p("short",!1);case"EEEE":return p("long",!1);case"EEEEE":return p("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return d("short",!0);case"LLLL":return d("long",!0);case"LLLLL":return d("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return d("short",!1);case"MMMM":return d("long",!1);case"MMMMM":return d("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return y("short");case"GG":return y("long");case"GGGGG":return y("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return w(M)}};return th(Ue.parseFormat(n),_)}formatDurationFromString(e,n){let r=d=>{switch(d[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=d=>p=>{let w=r(p);return w?this.num(d.get(w),p.length):p},o=Ue.parseFormat(n),u=o.reduce((d,{literal:p,val:w})=>p?d:d.concat(w),[]),f=e.shiftTo(...u.map(r).filter(d=>d));return th(o,i(f))}},gt=class{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},$h=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Mr(...t){let e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Ar(...t){return e=>t.reduce(([n,r,i],o)=>{let[u,f,d]=o(e,i);return[{...n,...u},f||r,d]},[{},null,1]).slice(0,2)}function Ir(t,...e){if(t==null)return[null,null];for(let[n,r]of e){let i=n.exec(t);if(i)return r(i)}return[null,null]}function Xh(...t){return(e,n)=>{let r={},i;for(i=0;i<t.length;i++)r[t[i]]=Mn(e[n+i]);return[r,null,n+i]}}var ed=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,oD=`(?:${ed.source}?(?:\\[(${$h.source})\\])?)?`,Gu=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,td=RegExp(`${Gu.source}${oD}`),Vu=RegExp(`(?:T${td.source})?`),uD=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,lD=/(\d{4})-?W(\d\d)(?:-?(\d))?/,cD=/(\d{4})-?(\d{3})/,fD=Xh("weekYear","weekNumber","weekDay"),hD=Xh("year","ordinal"),dD=/(\d{4})-(\d\d)-(\d\d)/,nd=RegExp(`${Gu.source} ?(?:${ed.source}|(${$h.source}))?`),pD=RegExp(`(?: ${nd.source})?`);function xr(t,e,n){let r=t[e];return ye(r)?n:Mn(r)}function mD(t,e){return[{year:xr(t,e),month:xr(t,e+1,1),day:xr(t,e+2,1)},null,e+3]}function Pr(t,e){return[{hours:xr(t,e,0),minutes:xr(t,e+1,0),seconds:xr(t,e+2,0),milliseconds:Ru(t[e+3])},null,e+4]}function Mi(t,e){let n=!t[e]&&!t[e+1],r=ga(t[e+1],t[e+2]),i=n?null:Ze.instance(r);return[{},i,e+3]}function Ai(t,e){let n=t[e]?Ht.create(t[e]):null;return[{},n,e+1]}var gD=RegExp(`^T?${Gu.source}$`),yD=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function vD(t){let[e,n,r,i,o,u,f,d,p]=t,w=e[0]==="-",y=d&&d[0]==="-",_=(M,V=!1)=>M!==void 0&&(V||M&&w)?-M:M;return[{years:_(Yn(n)),months:_(Yn(r)),weeks:_(Yn(i)),days:_(Yn(o)),hours:_(Yn(u)),minutes:_(Yn(f)),seconds:_(Yn(d),d==="-0"),milliseconds:_(Ru(p),y)}]}var DD={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Ku(t,e,n,r,i,o,u){let f={year:e.length===2?Mu(Mn(e)):Mn(e),month:jh.indexOf(n)+1,day:Mn(r),hour:Mn(i),minute:Mn(o)};return u&&(f.second=Mn(u)),t&&(f.weekday=t.length>3?zh.indexOf(t)+1:Yh.indexOf(t)+1),f}var bD=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function wD(t){let[,e,n,r,i,o,u,f,d,p,w,y]=t,_=Ku(e,i,r,n,o,u,f),M;return d?M=DD[d]:p?M=0:M=ga(w,y),[_,new Ze(M)]}function ED(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var FD=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,CD=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,_D=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function nh(t){let[,e,n,r,i,o,u,f]=t;return[Ku(e,i,r,n,o,u,f),Ze.utcInstance]}function SD(t){let[,e,n,r,i,o,u,f]=t;return[Ku(e,f,n,r,i,o,u),Ze.utcInstance]}var kD=Mr(uD,Vu),xD=Mr(lD,Vu),OD=Mr(cD,Vu),TD=Mr(td),rd=Ar(mD,Pr,Mi,Ai),MD=Ar(fD,Pr,Mi,Ai),AD=Ar(hD,Pr,Mi,Ai),ID=Ar(Pr,Mi,Ai);function PD(t){return Ir(t,[kD,rd],[xD,MD],[OD,AD],[TD,ID])}function ND(t){return Ir(ED(t),[bD,wD])}function LD(t){return Ir(t,[FD,nh],[CD,nh],[_D,SD])}function BD(t){return Ir(t,[yD,vD])}var RD=Ar(Pr);function HD(t){return Ir(t,[gD,RD])}var GD=Mr(dD,pD),VD=Mr(nd),KD=Ar(Pr,Mi,Ai);function qD(t){return Ir(t,[GD,rd],[VD,KD])}var rh="Invalid Duration",id={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},UD={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...id},_t=146097/400,_r=146097/4800,jD={years:{quarters:4,months:12,weeks:_t/7,days:_t,hours:_t*24,minutes:_t*24*60,seconds:_t*24*60*60,milliseconds:_t*24*60*60*1e3},quarters:{months:3,weeks:_t/28,days:_t/4,hours:_t*24/4,minutes:_t*24*60/4,seconds:_t*24*60*60/4,milliseconds:_t*24*60*60*1e3/4},months:{weeks:_r/7,days:_r,hours:_r*24,minutes:_r*24*60,seconds:_r*24*60*60,milliseconds:_r*24*60*60*1e3},...id},Qn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],WD=Qn.slice(0).reverse();function Tn(t,e,n=!1){let r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new X(r)}function sd(t,e){var r;let n=(r=e.milliseconds)!=null?r:0;for(let i of WD.slice(1))e[i]&&(n+=e[i]*t[i].milliseconds);return n}function ih(t,e){let n=sd(t,e)<0?-1:1;Qn.reduceRight((r,i)=>{if(ye(e[i]))return r;if(r){let o=e[r]*n,u=t[i][r],f=Math.floor(o/u);e[i]+=f*n,e[r]-=f*u*n}return i},null),Qn.reduce((r,i)=>{if(ye(e[i]))return r;if(r){let o=e[r]%1;e[r]-=o,e[i]+=o*t[r][i]}return i},null)}function zD(t){let e={};for(let[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}var X=class{constructor(e){let n=e.conversionAccuracy==="longterm"||!1,r=n?jD:UD;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||_e.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return X.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ht(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new X({values:ca(e,X.normalizeUnit),loc:_e.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if($n(e))return X.fromMillis(e);if(X.isDuration(e))return e;if(typeof e=="object")return X.fromObject(e);throw new ht(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){let[r]=BD(e);return r?X.fromObject(r,n):X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){let[r]=HD(e);return r?X.fromObject(r,n):X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ht("need to specify a reason the Duration is invalid");let r=e instanceof gt?e:new gt(e,n);if(Ie.throwOnInvalid)throw new Eu(r);return new X({invalid:r})}static normalizeUnit(e){let n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new aa(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){let r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Ue.create(this.loc,r).formatDurationFromString(this,e):rh}toHuman(e={}){if(!this.isValid)return rh;let n=Qn.map(r=>{let i=this.values[r];return ye(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Hu(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},ne.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?sd(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e),r={};for(let i of Qn)(Tr(n.values,i)||Tr(this.values,i))&&(r[i]=n.get(i)+this.get(i));return Tn(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;let n={};for(let r of Object.keys(this.values))n[r]=Uh(e(this.values[r],r));return Tn(this,{values:n},!0)}get(e){return this[X.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let n={...this.values,...ca(e,X.normalizeUnit)};return Tn(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){let u={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return Tn(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return ih(this.matrix,e),Tn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=zD(this.normalize().shiftToAll().toObject());return Tn(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>X.normalizeUnit(u));let n={},r={},i=this.toObject(),o;for(let u of Qn)if(e.indexOf(u)>=0){o=u;let f=0;for(let p in r)f+=this.matrix[p][u]*r[p],r[p]=0;$n(i[u])&&(f+=i[u]);let d=Math.trunc(f);n[u]=d,r[u]=(f*1e3-d*1e3)/1e3}else $n(i[u])&&(r[u]=i[u]);for(let u in r)r[u]!==0&&(n[o]+=u===o?r[u]:r[u]/this.matrix[o][u]);return ih(this.matrix,n),Tn(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return Tn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of Qn)if(!n(this.values[r],e.values[r]))return!1;return!0}},Sr="Invalid Interval";function YD(t,e){return!t||!t.isValid?Oe.invalid("missing or invalid start"):!e||!e.isValid?Oe.invalid("missing or invalid end"):e<t?Oe.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var Oe=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ht("need to specify a reason the Interval is invalid");let r=e instanceof gt?e:new gt(e,n);if(Ie.throwOnInvalid)throw new wu(r);return new Oe({invalid:r})}static fromDateTimes(e,n){let r=wi(e),i=wi(n),o=YD(r,i);return o==null?new Oe({start:r,end:i}):o}static after(e,n){let r=X.fromDurationLike(n),i=wi(e);return Oe.fromDateTimes(i,i.plus(r))}static before(e,n){let r=X.fromDurationLike(n),i=wi(e);return Oe.fromDateTimes(i.minus(r),i)}static fromISO(e,n){let[r,i]=(e||"").split("/",2);if(r&&i){let o,u;try{o=ne.fromISO(r,n),u=o.isValid}catch(p){u=!1}let f,d;try{f=ne.fromISO(i,n),d=f.isValid}catch(p){d=!1}if(u&&d)return Oe.fromDateTimes(o,f);if(u){let p=X.fromISO(i,n);if(p.isValid)return Oe.after(o,p)}else if(d){let p=X.fromISO(r,n);if(p.isValid)return Oe.before(f,p)}}return Oe.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let n=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Oe.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];let n=e.map(wi).filter(u=>this.contains(u)).sort(),r=[],{s:i}=this,o=0;for(;i<this.e;){let u=n[o]||this.e,f=+u>+this.e?this.e:u;r.push(Oe.fromDateTimes(i,f)),i=f,o+=1}return r}splitBy(e){let n=X.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,o,u=[];for(;r<this.e;){let f=this.start.plus(n.mapUnits(d=>d*i));o=+f>+this.e?this.e:f,u.push(Oe.fromDateTimes(r,o)),r=o,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Oe.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;let n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Oe.fromDateTimes(n,r)}static merge(e){let[n,r]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],u)=>o?o.overlaps(u)||o.abutsStart(u)?[i,o.union(u)]:[i.concat([o]),u]:[i,u],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0,i=[],o=e.map(d=>[{time:d.s,type:"s"},{time:d.e,type:"e"}]),u=Array.prototype.concat(...o),f=u.sort((d,p)=>d.time-p.time);for(let d of f)r+=d.type==="s"?1:-1,r===1?n=d.time:(n&&+n!=+d.time&&i.push(Oe.fromDateTimes(n,d.time)),n=null);return Oe.merge(i)}difference(...e){return Oe.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Sr}toLocaleString(e=oa,n={}){return this.isValid?Ue.create(this.s.loc.clone(n),e).formatInterval(this):Sr}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Sr}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Sr}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Sr}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Sr}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):X.invalid(this.invalidReason)}mapEndpoints(e){return Oe.fromDateTimes(e(this.s),e(this.e))}},kr=class{static hasDST(e=Ie.defaultZone){let n=ne.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Ht.isValidZone(e)}static normalizeZone(e){return An(e,Ie.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||_e.create(n,r,o)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||_e.create(n,r,o)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return _e.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return _e.create(n,null,"gregory").eras(e)}static features(){return{relative:Kh()}}};function sh(t,e){let n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(X.fromMillis(r).as("days"))}function ZD(t,e,n){let r=[["years",(d,p)=>p.year-d.year],["quarters",(d,p)=>p.quarter-d.quarter+(p.year-d.year)*4],["months",(d,p)=>p.month-d.month+(p.year-d.year)*12],["weeks",(d,p)=>{let w=sh(d,p);return(w-w%7)/7}],["days",sh]],i={},o=t,u,f;for(let[d,p]of r)n.indexOf(d)>=0&&(u=d,i[d]=p(t,e),f=o.plus(i),f>e?(i[d]--,t=o.plus(i),t>e&&(f=t,i[d]--,t=o.plus(i))):t=f);return[t,i,f,u]}function JD(t,e,n,r){let[i,o,u,f]=ZD(t,e,n),d=e-i,p=n.filter(y=>["hours","minutes","seconds","milliseconds"].indexOf(y)>=0);p.length===0&&(u<e&&(u=i.plus({[f]:1})),u!==i&&(o[f]=(o[f]||0)+d/(u-i)));let w=X.fromObject(o,r);return p.length>0?X.fromMillis(d,r).shiftTo(...p).plus(w):w}var qu={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},ah={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},QD=qu.hanidec.replace(/[\[|\]]/g,"").split("");function $D(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(t[n].search(qu.hanidec)!==-1)e+=QD.indexOf(t[n]);else for(let i in ah){let[o,u]=ah[i];r>=o&&r<=u&&(e+=r-o)}}return parseInt(e,10)}else return e}function Nt({numberingSystem:t},e=""){return new RegExp(`${qu[t||"latn"]}${e}`)}var XD="missing Intl.DateTimeFormat.formatToParts support";function Ee(t,e=n=>n){return{regex:t,deser:([n])=>e($D(n))}}var e2=String.fromCharCode(160),ad=`[ ${e2}]`,od=new RegExp(ad,"g");function t2(t){return t.replace(/\./g,"\\.?").replace(od,ad)}function oh(t){return t.replace(/\./g,"").replace(od," ").toLowerCase()}function Lt(t,e){return t===null?null:{regex:RegExp(t.map(t2).join("|")),deser:([n])=>t.findIndex(r=>oh(n)===oh(r))+e}}function uh(t,e){return{regex:t,deser:([,n,r])=>ga(n,r),groups:e}}function ea(t){return{regex:t,deser:([e])=>e}}function n2(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r2(t,e){let n=Nt(e),r=Nt(e,"{2}"),i=Nt(e,"{3}"),o=Nt(e,"{4}"),u=Nt(e,"{6}"),f=Nt(e,"{1,2}"),d=Nt(e,"{1,3}"),p=Nt(e,"{1,6}"),w=Nt(e,"{1,9}"),y=Nt(e,"{2,4}"),_=Nt(e,"{4,6}"),M=pe=>({regex:RegExp(n2(pe.val)),deser:([me])=>me,literal:!0}),oe=(pe=>{if(t.literal)return M(pe);switch(pe.val){case"G":return Lt(e.eras("short"),0);case"GG":return Lt(e.eras("long"),0);case"y":return Ee(p);case"yy":return Ee(y,Mu);case"yyyy":return Ee(o);case"yyyyy":return Ee(_);case"yyyyyy":return Ee(u);case"M":return Ee(f);case"MM":return Ee(r);case"MMM":return Lt(e.months("short",!0),1);case"MMMM":return Lt(e.months("long",!0),1);case"L":return Ee(f);case"LL":return Ee(r);case"LLL":return Lt(e.months("short",!1),1);case"LLLL":return Lt(e.months("long",!1),1);case"d":return Ee(f);case"dd":return Ee(r);case"o":return Ee(d);case"ooo":return Ee(i);case"HH":return Ee(r);case"H":return Ee(f);case"hh":return Ee(r);case"h":return Ee(f);case"mm":return Ee(r);case"m":return Ee(f);case"q":return Ee(f);case"qq":return Ee(r);case"s":return Ee(f);case"ss":return Ee(r);case"S":return Ee(d);case"SSS":return Ee(i);case"u":return ea(w);case"uu":return ea(f);case"uuu":return Ee(n);case"a":return Lt(e.meridiems(),0);case"kkkk":return Ee(o);case"kk":return Ee(y,Mu);case"W":return Ee(f);case"WW":return Ee(r);case"E":case"c":return Ee(n);case"EEE":return Lt(e.weekdays("short",!1),1);case"EEEE":return Lt(e.weekdays("long",!1),1);case"ccc":return Lt(e.weekdays("short",!0),1);case"cccc":return Lt(e.weekdays("long",!0),1);case"Z":case"ZZ":return uh(new RegExp(`([+-]${f.source})(?::(${r.source}))?`),2);case"ZZZ":return uh(new RegExp(`([+-]${f.source})(${r.source})?`),2);case"z":return ea(/[a-z_+-/]{1,256}?/i);case" ":return ea(/[^\S\n\r]/);default:return M(pe)}})(t)||{invalidReason:XD};return oe.token=t,oe}var i2={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function s2(t,e,n){let{type:r,value:i}=t;if(r==="literal"){let d=/^\s+$/.test(i);return{literal:!d,val:d?" ":i}}let o=e[r],u=r;r==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=n.hour12?"hour12":"hour24");let f=i2[u];if(typeof f=="object"&&(f=f[o]),f)return{literal:!1,val:f}}function a2(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function o2(t,e,n){let r=t.match(e);if(r){let i={},o=1;for(let u in n)if(Tr(n,u)){let f=n[u],d=f.groups?f.groups+1:1;!f.literal&&f.token&&(i[f.token.val[0]]=f.deser(r.slice(o,o+d))),o+=d}return[r,i]}else return[r,{}]}function u2(t){let e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},n=null,r;return ye(t.z)||(n=Ht.create(t.z)),ye(t.Z)||(n||(n=new Ze(t.Z)),r=t.Z),ye(t.q)||(t.M=(t.q-1)*3+1),ye(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),ye(t.u)||(t.S=Ru(t.u)),[Object.keys(t).reduce((o,u)=>{let f=e(u);return f&&(o[f]=t[u]),o},{}),n,r]}var pu=null;function l2(){return pu||(pu=ne.fromMillis(1555555555555)),pu}function c2(t,e){if(t.literal)return t;let n=Ue.macroTokenToFormatOpts(t.val),r=cd(n,e);return r==null||r.includes(void 0)?t:r}function ud(t,e){return Array.prototype.concat(...t.map(n=>c2(n,e)))}function ld(t,e,n){let r=ud(Ue.parseFormat(n),t),i=r.map(u=>r2(u,t)),o=i.find(u=>u.invalidReason);if(o)return{input:e,tokens:r,invalidReason:o.invalidReason};{let[u,f]=a2(i),d=RegExp(u,"i"),[p,w]=o2(e,d,f),[y,_,M]=w?u2(w):[null,null,void 0];if(Tr(w,"a")&&Tr(w,"H"))throw new Jn("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:d,rawMatches:p,matches:w,result:y,zone:_,specificOffset:M}}}function f2(t,e,n){let{result:r,zone:i,specificOffset:o,invalidReason:u}=ld(t,e,n);return[r,i,o,u]}function cd(t,e){if(!t)return null;let r=Ue.create(e,t).dtFormatter(l2()),i=r.formatToParts(),o=r.resolvedOptions();return i.map(u=>s2(u,t,o))}var fd=[0,31,59,90,120,151,181,212,243,273,304,334],hd=[0,31,60,91,121,152,182,213,244,274,305,335];function St(t,e){return new gt("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function dd(t,e,n){let r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function pd(t,e,n){return n+(Ti(t)?hd:fd)[e-1]}function md(t,e){let n=Ti(t)?hd:fd,r=n.findIndex(o=>o<e),i=e-n[r];return{month:r+1,day:i}}function Au(t){let{year:e,month:n,day:r}=t,i=pd(e,n,r),o=dd(e,n,r),u=Math.floor((i-o+10)/7),f;return u<1?(f=e-1,u=la(f)):u>la(e)?(f=e+1,u=1):f=e,{weekYear:f,weekNumber:u,weekday:o,...ya(t)}}function lh(t){let{weekYear:e,weekNumber:n,weekday:r}=t,i=dd(e,1,4),o=Ci(e),u=n*7+r-i-3,f;u<1?(f=e-1,u+=Ci(f)):u>o?(f=e+1,u-=Ci(e)):f=e;let{month:d,day:p}=md(f,u);return{year:f,month:d,day:p,...ya(t)}}function mu(t){let{year:e,month:n,day:r}=t,i=pd(e,n,r);return{year:e,ordinal:i,...ya(t)}}function ch(t){let{year:e,ordinal:n}=t,{month:r,day:i}=md(e,n);return{year:e,month:r,day:i,...ya(t)}}function h2(t){let e=pa(t.weekYear),n=dn(t.weekNumber,1,la(t.weekYear)),r=dn(t.weekday,1,7);return e?n?r?!1:St("weekday",t.weekday):St("week",t.week):St("weekYear",t.weekYear)}function d2(t){let e=pa(t.year),n=dn(t.ordinal,1,Ci(t.year));return e?n?!1:St("ordinal",t.ordinal):St("year",t.year)}function gd(t){let e=pa(t.year),n=dn(t.month,1,12),r=dn(t.day,1,ua(t.year,t.month));return e?n?r?!1:St("day",t.day):St("month",t.month):St("year",t.year)}function yd(t){let{hour:e,minute:n,second:r,millisecond:i}=t,o=dn(e,0,23)||e===24&&n===0&&r===0&&i===0,u=dn(n,0,59),f=dn(r,0,59),d=dn(i,0,999);return o?u?f?d?!1:St("millisecond",i):St("second",r):St("minute",n):St("hour",e)}var gu="Invalid DateTime",fh=864e13;function ta(t){return new gt("unsupported zone",`the zone "${t.name}" is not supported`)}function yu(t){return t.weekData===null&&(t.weekData=Au(t.c)),t.weekData}function Zn(t,e){let n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new ne({...n,...e,old:n})}function vd(t,e,n){let r=t-e*60*1e3,i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let o=n.offset(r);return i===o?[r,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function na(t,e){t+=e*60*1e3;let n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function sa(t,e,n){return vd(ma(t),e,n)}function hh(t,e){let n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:r,month:i,day:Math.min(t.c.day,ua(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=X.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),f=ma(o),[d,p]=vd(f,n,t.zone);return u!==0&&(d+=u,p=t.zone.offset(d)),{ts:d,o:p}}function bi(t,e,n,r,i,o){let{setZone:u,zone:f}=n;if(t&&Object.keys(t).length!==0||e){let d=e||f,p=ne.fromObject(t,{...n,zone:d,specificOffset:o});return u?p:p.setZone(f)}else return ne.invalid(new gt("unparsable",`the input "${i}" can't be parsed as ${r}`))}function ra(t,e,n=!0){return t.isValid?Ue.create(_e.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function vu(t,e){let n=t.c.year>9999||t.c.year<0,r="";return n&&t.c.year>=0&&(r+="+"),r+=Re(t.c.year,n?6:4),e?(r+="-",r+=Re(t.c.month),r+="-",r+=Re(t.c.day)):(r+=Re(t.c.month),r+=Re(t.c.day)),r}function dh(t,e,n,r,i,o){let u=Re(t.c.hour);return e?(u+=":",u+=Re(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(u+=":")):u+=Re(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(u+=Re(t.c.second),(t.c.millisecond!==0||!r)&&(u+=".",u+=Re(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?u+="Z":t.o<0?(u+="-",u+=Re(Math.trunc(-t.o/60)),u+=":",u+=Re(Math.trunc(-t.o%60))):(u+="+",u+=Re(Math.trunc(t.o/60)),u+=":",u+=Re(Math.trunc(t.o%60)))),o&&(u+="["+t.zone.ianaName+"]"),u}var Dd={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},p2={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},m2={ordinal:1,hour:0,minute:0,second:0,millisecond:0},bd=["year","month","day","hour","minute","second","millisecond"],g2=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],y2=["year","ordinal","hour","minute","second","millisecond"];function ph(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new aa(t);return e}function mh(t,e){let n=An(e.zone,Ie.defaultZone),r=_e.fromObject(e),i=Ie.now(),o,u;if(ye(t.year))o=i;else{for(let p of bd)ye(t[p])&&(t[p]=Dd[p]);let f=gd(t)||yd(t);if(f)return ne.invalid(f);let d=n.offset(i);[o,u]=sa(t,d,n)}return new ne({ts:o,zone:n,loc:r,o:u})}function gh(t,e,n){let r=ye(n.round)?!0:n.round,i=(u,f)=>(u=Hu(u,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(u,f)),o=u=>n.calendary?e.hasSame(t,u)?0:e.startOf(u).diff(t.startOf(u),u).get(u):e.diff(t,u).get(u);if(n.unit)return i(o(n.unit),n.unit);for(let u of n.units){let f=o(u);if(Math.abs(f)>=1)return i(f,u)}return i(t>e?-0:0,n.units[n.units.length-1])}function yh(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}var ne=class{constructor(e){let n=e.zone||Ie.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new gt("invalid input"):null)||(n.isValid?null:ta(n));this.ts=ye(e.ts)?Ie.now():e.ts;let i=null,o=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,o]=[e.old.c,e.old.o];else{let f=n.offset(this.ts);i=na(this.ts,f),r=Number.isNaN(i.year)?new gt("invalid input"):null,i=r?null:i,o=r?null:f}this._zone=n,this.loc=e.loc||_e.create(),this.invalid=r,this.weekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new ne({})}static local(){let[e,n]=yh(arguments),[r,i,o,u,f,d,p]=n;return mh({year:r,month:i,day:o,hour:u,minute:f,second:d,millisecond:p},e)}static utc(){let[e,n]=yh(arguments),[r,i,o,u,f,d,p]=n;return e.zone=Ze.utcInstance,mh({year:r,month:i,day:o,hour:u,minute:f,second:d,millisecond:p},e)}static fromJSDate(e,n={}){let r=jv(e)?e.valueOf():NaN;if(Number.isNaN(r))return ne.invalid("invalid input");let i=An(n.zone,Ie.defaultZone);return i.isValid?new ne({ts:r,zone:i,loc:_e.fromObject(n)}):ne.invalid(ta(i))}static fromMillis(e,n={}){if($n(e))return e<-fh||e>fh?ne.invalid("Timestamp out of range"):new ne({ts:e,zone:An(n.zone,Ie.defaultZone),loc:_e.fromObject(n)});throw new ht(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if($n(e))return new ne({ts:e*1e3,zone:An(n.zone,Ie.defaultZone),loc:_e.fromObject(n)});throw new ht("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};let r=An(n.zone,Ie.defaultZone);if(!r.isValid)return ne.invalid(ta(r));let i=Ie.now(),o=ye(n.specificOffset)?r.offset(i):n.specificOffset,u=ca(e,ph),f=!ye(u.ordinal),d=!ye(u.year),p=!ye(u.month)||!ye(u.day),w=d||p,y=u.weekYear||u.weekNumber,_=_e.fromObject(n);if((w||f)&&y)throw new Jn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&f)throw new Jn("Can't mix ordinal dates with month/day");let M=y||u.weekday&&!w,V,oe,pe=na(i,o);M?(V=g2,oe=p2,pe=Au(pe)):f?(V=y2,oe=m2,pe=mu(pe)):(V=bd,oe=Dd);let me=!1;for(let re of V){let Fe=u[re];ye(Fe)?me?u[re]=oe[re]:u[re]=pe[re]:me=!0}let Ce=M?h2(u):f?d2(u):gd(u),He=Ce||yd(u);if(He)return ne.invalid(He);let R=M?lh(u):f?ch(u):u,[ue,be]=sa(R,o,r),W=new ne({ts:ue,zone:r,o:be,loc:_});return u.weekday&&w&&e.weekday!==W.weekday?ne.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${W.toISO()}`):W}static fromISO(e,n={}){let[r,i]=PD(e);return bi(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){let[r,i]=ND(e);return bi(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){let[r,i]=LD(e);return bi(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(ye(e)||ye(n))throw new ht("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:o=null}=r,u=_e.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[f,d,p,w]=f2(u,e,n);return w?ne.invalid(w):bi(f,d,r,`format ${n}`,e,p)}static fromString(e,n,r={}){return ne.fromFormat(e,n,r)}static fromSQL(e,n={}){let[r,i]=qD(e);return bi(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ht("need to specify a reason the DateTime is invalid");let r=e instanceof gt?e:new gt(e,n);if(Ie.throwOnInvalid)throw new bu(r);return new ne({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){let r=cd(e,_e.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return ud(Ue.parseFormat(e),_e.fromObject(n)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?yu(this).weekYear:NaN}get weekNumber(){return this.isValid?yu(this).weekNumber:NaN}get weekday(){return this.isValid?yu(this).weekday:NaN}get ordinal(){return this.isValid?mu(this.c).ordinal:NaN}get monthShort(){return this.isValid?kr.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?kr.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?kr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?kr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,n=6e4,r=ma(this.c),i=this.zone.offset(r-e),o=this.zone.offset(r+e),u=this.zone.offset(r-i*n),f=this.zone.offset(r-o*n);if(u===f)return[this];let d=r-u*n,p=r-f*n,w=na(d,u),y=na(p,f);return w.hour===y.hour&&w.minute===y.minute&&w.second===y.second&&w.millisecond===y.millisecond?[Zn(this,{ts:d}),Zn(this,{ts:p})]:[this]}get isInLeapYear(){return Ti(this.year)}get daysInMonth(){return ua(this.year,this.month)}get daysInYear(){return this.isValid?Ci(this.year):NaN}get weeksInWeekYear(){return this.isValid?la(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:n,numberingSystem:r,calendar:i}=Ue.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Ze.instance(e),n)}toLocal(){return this.setZone(Ie.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=An(e,Ie.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){let o=e.offset(this.ts),u=this.toObject();[i]=sa(u,o,e)}return Zn(this,{ts:i,zone:e})}else return ne.invalid(ta(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Zn(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let n=ca(e,ph),r=!ye(n.weekYear)||!ye(n.weekNumber)||!ye(n.weekday),i=!ye(n.ordinal),o=!ye(n.year),u=!ye(n.month)||!ye(n.day),f=o||u,d=n.weekYear||n.weekNumber;if((f||i)&&d)throw new Jn("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&i)throw new Jn("Can't mix ordinal dates with month/day");let p;r?p=lh({...Au(this.c),...n}):ye(n.ordinal)?(p={...this.toObject(),...n},ye(n.day)&&(p.day=Math.min(ua(p.year,p.month),p.day))):p=ch({...mu(this.c),...n});let[w,y]=sa(p,this.o,this.zone);return Zn(this,{ts:w,o:y})}plus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e);return Zn(this,hh(this,n))}minus(e){if(!this.isValid)return this;let n=X.fromDurationLike(e).negate();return Zn(this,hh(this,n))}startOf(e){if(!this.isValid)return this;let n={},r=X.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks"&&(n.weekday=1),r==="quarters"){let i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?Ue.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):gu}toLocaleString(e=oa,n={}){return this.isValid?Ue.create(this.loc.clone(n),e).formatDateTime(this):gu}toLocaleParts(e={}){return this.isValid?Ue.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let u=e==="extended",f=vu(this,u);return f+="T",f+=dh(this,u,n,r,i,o),f}toISODate({format:e="extended"}={}){return this.isValid?vu(this,e==="extended"):null}toISOWeekDate(){return ra(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:o=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+dh(this,u==="extended",n,e,r,o):null}toRFC2822(){return ra(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ra(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?vu(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),ra(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():gu}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return X.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},o=Wv(n).map(X.normalizeUnit),u=e.valueOf()>this.valueOf(),f=u?this:e,d=u?e:this,p=JD(f,d,o,i);return u?p.negate():p}diffNow(e="milliseconds",n={}){return this.diff(ne.now(),e,n)}until(e){return this.isValid?Oe.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(n)<=r&&r<=i.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let n=e.base||ne.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),gh(n,this.plus(r),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?gh(e.base||ne.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(ne.isDateTime))throw new ht("min requires all arguments be DateTimes");return eh(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(ne.isDateTime))throw new ht("max requires all arguments be DateTimes");return eh(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){let{locale:i=null,numberingSystem:o=null}=r,u=_e.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return ld(u,e,n)}static fromStringExplain(e,n,r={}){return ne.fromFormatExplain(e,n,r)}static get DATE_SHORT(){return oa}static get DATE_MED(){return Fh}static get DATE_MED_WITH_WEEKDAY(){return Ov}static get DATE_FULL(){return Ch}static get DATE_HUGE(){return _h}static get TIME_SIMPLE(){return Sh}static get TIME_WITH_SECONDS(){return kh}static get TIME_WITH_SHORT_OFFSET(){return xh}static get TIME_WITH_LONG_OFFSET(){return Oh}static get TIME_24_SIMPLE(){return Th}static get TIME_24_WITH_SECONDS(){return Mh}static get TIME_24_WITH_SHORT_OFFSET(){return Ah}static get TIME_24_WITH_LONG_OFFSET(){return Ih}static get DATETIME_SHORT(){return Ph}static get DATETIME_SHORT_WITH_SECONDS(){return Nh}static get DATETIME_MED(){return Lh}static get DATETIME_MED_WITH_SECONDS(){return Bh}static get DATETIME_MED_WITH_WEEKDAY(){return Tv}static get DATETIME_FULL(){return Rh}static get DATETIME_FULL_WITH_SECONDS(){return Hh}static get DATETIME_HUGE(){return Gh}static get DATETIME_HUGE_WITH_SECONDS(){return Vh}};function wi(t){if(ne.isDateTime(t))return t;if(t&&t.valueOf&&$n(t.valueOf()))return ne.fromJSDate(t);if(t&&typeof t=="object")return ne.fromObject(t);throw new ht(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var Uu={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},v2={allowHtml:!0};({...Uu,...v2});var Si=class{constructor(e){st(this,"value");st(this,"successful");this.value=e,this.successful=!0}map(e){return new Si(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,n){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},ki=class{constructor(e){st(this,"error");st(this,"successful");this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new ki(e(this.error))}bimap(e,n){return this.mapErr(n)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},fa;(function(t){function e(o){return new Si(o)}t.success=e;function n(o){return new ki(o)}t.failure=n;function r(o,u,f){return o.successful?u.successful?f(o.value,u.value):n(u.error):n(o.error)}t.flatMap2=r;function i(o,u,f){return r(o,u,(d,p)=>e(f(d,p)))}t.map2=i})(fa||(fa={}));var D2=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ha={exports:{}};ha.exports;(function(t,e){(function(n,r){t.exports=r()})(typeof self!="undefined"?self:D2,function(){return function(n){var r={};function i(o){if(r[o])return r[o].exports;var u=r[o]={i:o,l:!1,exports:{}};return n[o].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=n,i.c=r,i.d=function(o,u,f){i.o(o,u)||Object.defineProperty(o,u,{configurable:!1,enumerable:!0,get:f})},i.r=function(o){Object.defineProperty(o,"__esModule",{value:!0})},i.n=function(o){var u=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(u,"a",u),u},i.o=function(o,u){return Object.prototype.hasOwnProperty.call(o,u)},i.p="",i(i.s=0)}([function(n,r,i){function o(v){if(!(this instanceof o))return new o(v);this._=v}var u=o.prototype;function f(v,C){for(var T=0;T<v;T++)C(T)}function d(v,C,T){return function(B,q){f(q.length,function(j){B(q[j],j,q)})}(function(B,q,j){C=v(C,B,q,j)},T),C}function p(v,C){return d(function(T,B,q,j){return T.concat([v(B,q,j)])},[],C)}function w(v,C){var T={v:0,buf:C};return f(v,function(){var B;T={v:T.v<<1|(B=T.buf,B[0]>>7),buf:function(q){var j=d(function(z,ce,ve,Le){return z.concat(ve===Le.length-1?Buffer.from([ce,0]).readUInt16BE(0):Le.readUInt16BE(ve))},[],q);return Buffer.from(p(function(z){return(z<<1&65535)>>8},j))}(T.buf)}}),T}function y(){return typeof Buffer!="undefined"}function _(){if(!y())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function M(v){_();var C=d(function(j,z){return j+z},0,v);if(C%8!=0)throw new Error("The bits ["+v.join(", ")+"] add up to "+C+" which is not an even number of bytes; the total should be divisible by 8");var T,B=C/8,q=(T=function(j){return j>48},d(function(j,z){return j||(T(z)?z:j)},null,v));if(q)throw new Error(q+" bit range requested exceeds 48 bit (6 byte) Number max.");return new o(function(j,z){var ce=B+z;return ce>j.length?re(z,B.toString()+" bytes"):W(ce,d(function(ve,Le){var Pe=w(Le,ve.buf);return{coll:ve.coll.concat(Pe.v),buf:Pe.buf}},{coll:[],buf:j.slice(z,ce)},v).coll)})}function V(v,C){return new o(function(T,B){return _(),B+C>T.length?re(B,C+" bytes for "+v):W(B+C,T.slice(B,B+C))})}function oe(v,C){if(typeof(T=C)!="number"||Math.floor(T)!==T||C<0||C>6)throw new Error(v+" requires integer length in range [0, 6].");var T}function pe(v){return oe("uintBE",v),V("uintBE("+v+")",v).map(function(C){return C.readUIntBE(0,v)})}function me(v){return oe("uintLE",v),V("uintLE("+v+")",v).map(function(C){return C.readUIntLE(0,v)})}function Ce(v){return oe("intBE",v),V("intBE("+v+")",v).map(function(C){return C.readIntBE(0,v)})}function He(v){return oe("intLE",v),V("intLE("+v+")",v).map(function(C){return C.readIntLE(0,v)})}function R(v){return v instanceof o}function ue(v){return{}.toString.call(v)==="[object Array]"}function be(v){return y()&&Buffer.isBuffer(v)}function W(v,C){return{status:!0,index:v,value:C,furthest:-1,expected:[]}}function re(v,C){return ue(C)||(C=[C]),{status:!1,index:-1,value:null,furthest:v,expected:C}}function Fe(v,C){if(!C||v.furthest>C.furthest)return v;var T=v.furthest===C.furthest?function(B,q){if(function(){if(o._supportsSet!==void 0)return o._supportsSet;var it=typeof Set!="undefined";return o._supportsSet=it,it}()&&Array.from){for(var j=new Set(B),z=0;z<q.length;z++)j.add(q[z]);var ce=Array.from(j);return ce.sort(),ce}for(var ve={},Le=0;Le<B.length;Le++)ve[B[Le]]=!0;for(var Pe=0;Pe<q.length;Pe++)ve[q[Pe]]=!0;var Ve=[];for(var $ in ve)({}).hasOwnProperty.call(ve,$)&&Ve.push($);return Ve.sort(),Ve}(v.expected,C.expected):C.expected;return{status:v.status,index:v.index,value:v.value,furthest:C.furthest,expected:T}}var je={};function Je(v,C){if(be(v))return{offset:C,line:-1,column:-1};v in je||(je[v]={});for(var T=je[v],B=0,q=0,j=0,z=C;z>=0;){if(z in T){B=T[z].line,j===0&&(j=T[z].lineStart);break}(v.charAt(z)===`
`||v.charAt(z)==="\r"&&v.charAt(z+1)!==`
`)&&(q++,j===0&&(j=z+1)),z--}var ce=B+q,ve=C-j;return T[C]={line:ce,lineStart:j},{offset:C,line:ce+1,column:ve+1}}function Se(v){if(!R(v))throw new Error("not a parser: "+v)}function vt(v,C){return typeof v=="string"?v.charAt(C):v[C]}function We(v){if(typeof v!="number")throw new Error("not a number: "+v)}function ze(v){if(typeof v!="function")throw new Error("not a function: "+v)}function Te(v){if(typeof v!="string")throw new Error("not a string: "+v)}var xt=2,Dt=3,rt=8,In=5*rt,gn=4*rt,Xt="  ";function Qe(v,C){return new Array(C+1).join(v)}function Ge(v,C,T){var B=C-v.length;return B<=0?v:Qe(T,B)+v}function en(v,C,T,B){return{from:v-C>0?v-C:0,to:v+T>B?B:v+T}}function Ot(v,C){var T,B,q,j,z,ce=C.index,ve=ce.offset,Le=1;if(ve===v.length)return"Got the end of the input";if(be(v)){var Pe=ve-ve%rt,Ve=ve-Pe,$=en(Pe,In,gn+rt,v.length),it=p(function(U){return p(function(Vt){return Ge(Vt.toString(16),2,"0")},U)},function(U,Vt){var rn=U.length,Kt=[],qt=0;if(rn<=Vt)return[U.slice()];for(var sn=0;sn<rn;sn++)Kt[qt]||Kt.push([]),Kt[qt].push(U[sn]),(sn+1)%Vt==0&&qt++;return Kt}(v.slice($.from,$.to).toJSON().data,rt));j=function(U){return U.from===0&&U.to===1?{from:U.from,to:U.to}:{from:U.from/rt,to:Math.floor(U.to/rt)}}($),B=Pe/rt,T=3*Ve,Ve>=4&&(T+=1),Le=2,q=p(function(U){return U.length<=4?U.join(" "):U.slice(0,4).join(" ")+"  "+U.slice(4).join(" ")},it),(z=(8*(j.to>0?j.to-1:j.to)).toString(16).length)<2&&(z=2)}else{var ot=v.split(/\r\n|[\n\r\u2028\u2029]/);T=ce.column-1,B=ce.line-1,j=en(B,xt,Dt,ot.length),q=ot.slice(j.from,j.to),z=j.to.toString().length}var ur=B-j.from;return be(v)&&(z=(8*(j.to>0?j.to-1:j.to)).toString(16).length)<2&&(z=2),d(function(U,Vt,rn){var Kt,qt=rn===ur,sn=qt?"> ":Xt;return Kt=be(v)?Ge((8*(j.from+rn)).toString(16),z,"0"):Ge((j.from+rn+1).toString(),z," "),[].concat(U,[sn+Kt+" | "+Vt],qt?[Xt+Qe(" ",z)+" | "+Ge("",T," ")+Qe("^",Le)]:[])},[],q).join(`
`)}function nr(v,C){return[`
`,"-- PARSING FAILED "+Qe("-",50),`

`,Ot(v,C),`

`,(T=C.expected,T.length===1?`Expected:

`+T[0]:`Expected one of the following: 

`+T.join(", ")),`
`].join("");var T}function Pi(v){return v.flags!==void 0?v.flags:[v.global?"g":"",v.ignoreCase?"i":"",v.multiline?"m":"",v.unicode?"u":"",v.sticky?"y":""].join("")}function Pn(){for(var v=[].slice.call(arguments),C=v.length,T=0;T<C;T+=1)Se(v[T]);return o(function(B,q){for(var j,z=new Array(C),ce=0;ce<C;ce+=1){if(!(j=Fe(v[ce]._(B,q),j)).status)return j;z[ce]=j.value,q=j.index}return Fe(W(q,z),j)})}function Tt(){var v=[].slice.call(arguments);if(v.length===0)throw new Error("seqMap needs at least one argument");var C=v.pop();return ze(C),Pn.apply(null,v).map(function(T){return C.apply(null,T)})}function rr(){var v=[].slice.call(arguments),C=v.length;if(C===0)return sr("zero alternates");for(var T=0;T<C;T+=1)Se(v[T]);return o(function(B,q){for(var j,z=0;z<v.length;z+=1)if((j=Fe(v[z]._(B,q),j)).status)return j;return j})}function tn(v,C){return ir(v,C).or(Mt([]))}function ir(v,C){return Se(v),Se(C),Tt(v,C.then(v).many(),function(T,B){return[T].concat(B)})}function Gt(v){Te(v);var C="'"+v+"'";return o(function(T,B){var q=B+v.length,j=T.slice(B,q);return j===v?W(q,j):re(B,C)})}function $e(v,C){(function(q){if(!(q instanceof RegExp))throw new Error("not a regexp: "+q);for(var j=Pi(q),z=0;z<j.length;z++){var ce=j.charAt(z);if(ce!=="i"&&ce!=="m"&&ce!=="u"&&ce!=="s")throw new Error('unsupported regexp flag "'+ce+'": '+q)}})(v),arguments.length>=2?We(C):C=0;var T=function(q){return RegExp("^(?:"+q.source+")",Pi(q))}(v),B=""+v;return o(function(q,j){var z=T.exec(q.slice(j));if(z){if(0<=C&&C<=z.length){var ce=z[0],ve=z[C];return W(j+ce.length,ve)}return re(j,"valid match group (0 to "+z.length+") in "+B)}return re(j,B)})}function Mt(v){return o(function(C,T){return W(T,v)})}function sr(v){return o(function(C,T){return re(T,v)})}function ie(v){if(R(v))return o(function(C,T){var B=v._(C,T);return B.index=T,B.value="",B});if(typeof v=="string")return ie(Gt(v));if(v instanceof RegExp)return ie($e(v));throw new Error("not a string, regexp, or parser: "+v)}function Hr(v){return Se(v),o(function(C,T){var B=v._(C,T),q=C.slice(T,B.index);return B.status?re(T,'not "'+q+'"'):W(T,null)})}function ar(v){return ze(v),o(function(C,T){var B=vt(C,T);return T<C.length&&v(B)?W(T+1,B):re(T,"a character/byte matching "+v)})}function Nn(v,C){arguments.length<2&&(C=v,v=void 0);var T=o(function(B,q){return T._=C()._,T._(B,q)});return v?T.desc(v):T}function we(){return sr("fantasy-land/empty")}u.parse=function(v){if(typeof v!="string"&&!be(v))throw new Error(".parse must be called with a string or Buffer as its argument");var C,T=this.skip(Gr)._(v,0);return C=T.status?{status:!0,value:T.value}:{status:!1,index:Je(v,T.furthest),expected:T.expected},delete je[v],C},u.tryParse=function(v){var C=this.parse(v);if(C.status)return C.value;var T=nr(v,C),B=new Error(T);throw B.type="ParsimmonError",B.result=C,B},u.assert=function(v,C){return this.chain(function(T){return v(T)?Mt(T):sr(C)})},u.or=function(v){return rr(this,v)},u.trim=function(v){return this.wrap(v,v)},u.wrap=function(v,C){return Tt(v,this,C,function(T,B){return B})},u.thru=function(v){return v(this)},u.then=function(v){return Se(v),Pn(this,v).map(function(C){return C[1]})},u.many=function(){var v=this;return o(function(C,T){for(var B=[],q=void 0;;){if(!(q=Fe(v._(C,T),q)).status)return Fe(W(T,B),q);if(T===q.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");T=q.index,B.push(q.value)}})},u.tieWith=function(v){return Te(v),this.map(function(C){if(function(q){if(!ue(q))throw new Error("not an array: "+q)}(C),C.length){Te(C[0]);for(var T=C[0],B=1;B<C.length;B++)Te(C[B]),T+=v+C[B];return T}return""})},u.tie=function(){return this.tieWith("")},u.times=function(v,C){var T=this;return arguments.length<2&&(C=v),We(v),We(C),o(function(B,q){for(var j=[],z=void 0,ce=void 0,ve=0;ve<v;ve+=1){if(ce=Fe(z=T._(B,q),ce),!z.status)return ce;q=z.index,j.push(z.value)}for(;ve<C&&(ce=Fe(z=T._(B,q),ce),z.status);ve+=1)q=z.index,j.push(z.value);return Fe(W(q,j),ce)})},u.result=function(v){return this.map(function(){return v})},u.atMost=function(v){return this.times(0,v)},u.atLeast=function(v){return Tt(this.times(v),this.many(),function(C,T){return C.concat(T)})},u.map=function(v){ze(v);var C=this;return o(function(T,B){var q=C._(T,B);return q.status?Fe(W(q.index,v(q.value)),q):q})},u.contramap=function(v){ze(v);var C=this;return o(function(T,B){var q=C.parse(v(T.slice(B)));return q.status?W(B+T.length,q.value):q})},u.promap=function(v,C){return ze(v),ze(C),this.contramap(v).map(C)},u.skip=function(v){return Pn(this,v).map(function(C){return C[0]})},u.mark=function(){return Tt(At,this,At,function(v,C,T){return{start:v,value:C,end:T}})},u.node=function(v){return Tt(At,this,At,function(C,T,B){return{name:v,value:T,start:C,end:B}})},u.sepBy=function(v){return tn(this,v)},u.sepBy1=function(v){return ir(this,v)},u.lookahead=function(v){return this.skip(ie(v))},u.notFollowedBy=function(v){return this.skip(Hr(v))},u.desc=function(v){ue(v)||(v=[v]);var C=this;return o(function(T,B){var q=C._(T,B);return q.status||(q.expected=v),q})},u.fallback=function(v){return this.or(Mt(v))},u.ap=function(v){return Tt(v,this,function(C,T){return C(T)})},u.chain=function(v){var C=this;return o(function(T,B){var q=C._(T,B);return q.status?Fe(v(q.value)._(T,q.index),q):q})},u.concat=u.or,u.empty=we,u.of=Mt,u["fantasy-land/ap"]=u.ap,u["fantasy-land/chain"]=u.chain,u["fantasy-land/concat"]=u.concat,u["fantasy-land/empty"]=u.empty,u["fantasy-land/of"]=u.of,u["fantasy-land/map"]=u.map;var At=o(function(v,C){return W(C,Je(v,C))}),Ia=o(function(v,C){return C>=v.length?re(C,"any character/byte"):W(C+1,vt(v,C))}),nn=o(function(v,C){return W(v.length,v.slice(C))}),Gr=o(function(v,C){return C<v.length?re(C,"EOF"):W(C,null)}),Pa=$e(/[0-9]/).desc("a digit"),Na=$e(/[0-9]*/).desc("optional digits"),La=$e(/[a-z]/i).desc("a letter"),Vr=$e(/[a-z]*/i).desc("optional letters"),bt=$e(/\s*/).desc("optional whitespace"),Ni=$e(/\s+/).desc("whitespace"),yn=Gt("\r"),Kr=Gt(`
`),or=Gt(`\r
`),qr=rr(or,Kr,yn).desc("newline"),Li=rr(qr,Gr);o.all=nn,o.alt=rr,o.any=Ia,o.cr=yn,o.createLanguage=function(v){var C={};for(var T in v)({}).hasOwnProperty.call(v,T)&&function(B){C[B]=Nn(function(){return v[B](C)})}(T);return C},o.crlf=or,o.custom=function(v){return o(v(W,re))},o.digit=Pa,o.digits=Na,o.empty=we,o.end=Li,o.eof=Gr,o.fail=sr,o.formatError=nr,o.index=At,o.isParser=R,o.lazy=Nn,o.letter=La,o.letters=Vr,o.lf=Kr,o.lookahead=ie,o.makeFailure=re,o.makeSuccess=W,o.newline=qr,o.noneOf=function(v){return ar(function(C){return v.indexOf(C)<0}).desc("none of '"+v+"'")},o.notFollowedBy=Hr,o.of=Mt,o.oneOf=function(v){for(var C=v.split(""),T=0;T<C.length;T++)C[T]="'"+C[T]+"'";return ar(function(B){return v.indexOf(B)>=0}).desc(C)},o.optWhitespace=bt,o.Parser=o,o.range=function(v,C){return ar(function(T){return v<=T&&T<=C}).desc(v+"-"+C)},o.regex=$e,o.regexp=$e,o.sepBy=tn,o.sepBy1=ir,o.seq=Pn,o.seqMap=Tt,o.seqObj=function(){for(var v,C={},T=0,B=(v=arguments,Array.prototype.slice.call(v)),q=B.length,j=0;j<q;j+=1){var z=B[j];if(!R(z)){if(ue(z)&&z.length===2&&typeof z[0]=="string"&&R(z[1])){var ce=z[0];if(Object.prototype.hasOwnProperty.call(C,ce))throw new Error("seqObj: duplicate key "+ce);C[ce]=!0,T++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(T===0)throw new Error("seqObj expects at least one named parser, found zero");return o(function(ve,Le){for(var Pe,Ve={},$=0;$<q;$+=1){var it,ot;if(ue(B[$])?(it=B[$][0],ot=B[$][1]):(it=null,ot=B[$]),!(Pe=Fe(ot._(ve,Le),Pe)).status)return Pe;it&&(Ve[it]=Pe.value),Le=Pe.index}return Fe(W(Le,Ve),Pe)})},o.string=Gt,o.succeed=Mt,o.takeWhile=function(v){return ze(v),o(function(C,T){for(var B=T;B<C.length&&v(vt(C,B));)B++;return W(B,C.slice(T,B))})},o.test=ar,o.whitespace=Ni,o["fantasy-land/empty"]=we,o["fantasy-land/of"]=Mt,o.Binary={bitSeq:M,bitSeqObj:function(v){_();var C={},T=0,B=p(function(j){if(ue(j)){var z=j;if(z.length!==2)throw new Error("["+z.join(", ")+"] should be length 2, got length "+z.length);if(Te(z[0]),We(z[1]),Object.prototype.hasOwnProperty.call(C,z[0]))throw new Error("duplicate key in bitSeqObj: "+z[0]);return C[z[0]]=!0,T++,z}return We(j),[null,j]},v);if(T<1)throw new Error("bitSeqObj expects at least one named pair, got ["+v.join(", ")+"]");var q=p(function(j){return j[0]},B);return M(p(function(j){return j[1]},B)).map(function(j){return d(function(z,ce){return ce[0]!==null&&(z[ce[0]]=ce[1]),z},{},p(function(z,ce){return[z,j[ce]]},q))})},byte:function(v){if(_(),We(v),v>255)throw new Error("Value specified to byte constructor ("+v+"=0x"+v.toString(16)+") is larger in value than a single byte.");var C=(v>15?"0x":"0x0")+v.toString(16);return o(function(T,B){var q=vt(T,B);return q===v?W(B+1,q):re(B,C)})},buffer:function(v){return V("buffer",v).map(function(C){return Buffer.from(C)})},encodedString:function(v,C){return V("string",C).map(function(T){return T.toString(v)})},uintBE:pe,uint8BE:pe(1),uint16BE:pe(2),uint32BE:pe(4),uintLE:me,uint8LE:me(1),uint16LE:me(2),uint32LE:me(4),intBE:Ce,int8BE:Ce(1),int16BE:Ce(2),int32BE:Ce(4),intLE:He,int8LE:He(1),int16LE:He(2),int32LE:He(4),floatBE:V("floatBE",4).map(function(v){return v.readFloatBE(0)}),floatLE:V("floatLE",4).map(function(v){return v.readFloatLE(0)}),doubleBE:V("doubleBE",8).map(function(v){return v.readDoubleBE(0)}),doubleLE:V("doubleLE",8).map(function(v){return v.readDoubleLE(0)})},n.exports=o}])})})(ha,ha.exports);var E=ha.exports,ju=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function wd(t){return t==null?t:t.shiftToAll().normalize()}function vh(t){return t.includes("/")&&(t=t.substring(t.lastIndexOf("/")+1)),t.endsWith(".md")&&(t=t.substring(0,t.length-3)),t}E.alt(E.regex(new RegExp(ju(),"")),E.regex(/[0-9\p{Letter}_-]+/u).map(t=>t.toLocaleLowerCase()),E.whitespace.map(t=>"-"),E.any.map(t=>"")).many().map(t=>t.join(""));var b2=E.alt(E.regex(new RegExp(ju(),"")),E.regex(/[0-9\p{Letter}_-]+/u),E.whitespace.map(t=>" "),E.any.map(t=>" ")).many().map(t=>t.join("").split(/\s+/).join(" ").trim());function w2(t){return b2.tryParse(t)}function E2(t){return t=wd(t),t=X.fromObject(Object.fromEntries(Object.entries(t.toObject()).filter(([,e])=>e!=0))),t.toHuman()}var xi;(function(t){function e(R,ue=Uu,be=!1){let W=n(R);if(!W)return ue.renderNullAs;switch(W.type){case"null":return ue.renderNullAs;case"string":return W.value;case"number":case"boolean":return""+W.value;case"html":return W.value.outerHTML;case"widget":return W.value.markdown();case"link":return W.value.markdown();case"function":return"<function>";case"array":let re="";return be&&(re+="["),re+=W.value.map(Fe=>e(Fe,ue,!0)).join(", "),be&&(re+="]"),re;case"object":return"{ "+Object.entries(W.value).map(Fe=>Fe[0]+": "+e(Fe[1],ue,!0)).join(", ")+" }";case"date":return W.value.second==0&&W.value.hour==0&&W.value.minute==0?W.value.toFormat(ue.defaultDateFormat):W.value.toFormat(ue.defaultDateTimeFormat);case"duration":return E2(W.value)}}t.toString=e;function n(R){return _(R)?{type:"null",value:R}:p(R)?{type:"number",value:R}:d(R)?{type:"string",value:R}:V(R)?{type:"boolean",value:R}:y(R)?{type:"duration",value:R}:w(R)?{type:"date",value:R}:pe(R)?{type:"widget",value:R}:M(R)?{type:"array",value:R}:oe(R)?{type:"link",value:R}:He(R)?{type:"function",value:R}:me(R)?{type:"html",value:R}:Ce(R)?{type:"object",value:R}:void 0}t.wrapValue=n;function r(R,ue){if(Ce(R)){let be={};for(let[W,re]of Object.entries(R))be[W]=r(re,ue);return be}else if(M(R)){let be=[];for(let W of R)be.push(r(W,ue));return be}else return ue(R)}t.mapLeaves=r;function i(R,ue,be){var Fe,je;if(R===void 0&&(R=null),ue===void 0&&(ue=null),R===null&&ue===null)return 0;if(R===null)return-1;if(ue===null)return 1;let W=n(R),re=n(ue);if(W===void 0&&re===void 0)return 0;if(W===void 0)return-1;if(re===void 0)return 1;if(W.type!=re.type)return W.type.localeCompare(re.type);if(W.value===re.value)return 0;switch(W.type){case"string":return W.value.localeCompare(re.value);case"number":return W.value<re.value?-1:W.value==re.value?0:1;case"null":return 0;case"boolean":return W.value==re.value?0:W.value?1:-1;case"link":let Je=W.value,Se=re.value,vt=be!=null?be:Qe=>Qe,We=vt(Je.path).localeCompare(vt(Se.path));if(We!=0)return We;let ze=Je.type.localeCompare(Se.type);return ze!=0?ze:Je.subpath&&!Se.subpath?1:!Je.subpath&&Se.subpath?-1:!Je.subpath&&!Se.subpath?0:((Fe=Je.subpath)!=null?Fe:"").localeCompare((je=Se.subpath)!=null?je:"");case"date":return W.value<re.value?-1:W.value.equals(re.value)?0:1;case"duration":return W.value<re.value?-1:W.value.equals(re.value)?0:1;case"array":let Te=W.value,xt=re.value;for(let Qe=0;Qe<Math.min(Te.length,xt.length);Qe++){let Ge=i(Te[Qe],xt[Qe]);if(Ge!=0)return Ge}return Te.length-xt.length;case"object":let Dt=W.value,rt=re.value,In=Array.from(Object.keys(Dt)),gn=Array.from(Object.keys(rt));In.sort(),gn.sort();let Xt=i(In,gn);if(Xt!=0)return Xt;for(let Qe of In){let Ge=i(Dt[Qe],rt[Qe]);if(Ge!=0)return Ge}return 0;case"widget":case"html":case"function":return 0}}t.compareValue=i;function o(R){var ue;return(ue=n(R))==null?void 0:ue.type}t.typeOf=o;function u(R){let ue=n(R);if(!ue)return!1;switch(ue.type){case"number":return ue.value!=0;case"string":return ue.value.length>0;case"boolean":return ue.value;case"link":return!!ue.value.path;case"date":return ue.value.toMillis()!=0;case"duration":return ue.value.as("seconds")!=0;case"object":return Object.keys(ue.value).length>0;case"array":return ue.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}t.isTruthy=u;function f(R){if(R==null)return R;if(t.isArray(R))return[].concat(R.map(ue=>f(ue)));if(t.isObject(R)){let ue={};for(let[be,W]of Object.entries(R))ue[be]=f(W);return ue}else return R}t.deepCopy=f;function d(R){return typeof R=="string"}t.isString=d;function p(R){return typeof R=="number"}t.isNumber=p;function w(R){return R instanceof ne}t.isDate=w;function y(R){return R instanceof X}t.isDuration=y;function _(R){return R==null}t.isNull=_;function M(R){return Array.isArray(R)}t.isArray=M;function V(R){return typeof R=="boolean"}t.isBoolean=V;function oe(R){return R instanceof qe}t.isLink=oe;function pe(R){return R instanceof Oi}t.isWidget=pe;function me(R){return typeof HTMLElement!="undefined"?R instanceof HTMLElement:!1}t.isHtml=me;function Ce(R){return typeof R=="object"&&!me(R)&&!pe(R)&&!M(R)&&!y(R)&&!w(R)&&!oe(R)&&R!==void 0&&!_(R)}t.isObject=Ce;function He(R){return typeof R=="function"}t.isFunction=He})(xi||(xi={}));var Dh;(function(t){function e(i){return xi.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}t.isElementGroup=e;function n(i){for(let o of i)if(!e(o))return!1;return!0}t.isGrouping=n;function r(i){if(n(i)){let o=0;for(let u of i)o+=r(u.rows);return o}else return i.length}t.count=r})(Dh||(Dh={}));var qe=class{constructor(e){st(this,"path");st(this,"display");st(this,"subpath");st(this,"embed");st(this,"type");Object.assign(this,e)}static file(e,n=!1,r){return new qe({path:e,embed:n,display:r,subpath:void 0,type:"file"})}static infer(e,n=!1,r){if(e.includes("#^")){let i=e.split("#^");return qe.block(i[0],i[1],n,r)}else if(e.includes("#")){let i=e.split("#");return qe.header(i[0],i[1],n,r)}else return qe.file(e,n,r)}static header(e,n,r,i){return new qe({path:e,embed:r,display:i,subpath:w2(n),type:"header"})}static block(e,n,r,i){return new qe({path:e,embed:r,display:i,subpath:n,type:"block"})}static fromObject(e){return new qe(e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new qe(Object.assign({},this,{path:e}))}withDisplay(e){return new qe(Object.assign({},this,{display:e}))}withHeader(e){return qe.header(this.path,e,this.embed,this.display)}toFile(){return qe.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new qe(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new qe(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+vh(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var n,r;let e=this.path.replaceAll("|","\\|");return this.type=="header"?e+"#"+((n=this.subpath)==null?void 0:n.replaceAll("|","\\|")):this.type=="block"?e+"#^"+((r=this.subpath)==null?void 0:r.replaceAll("|","\\|")):e}fileName(){return vh(this.path).replace(".md","")}},Oi=class{constructor(e){st(this,"$widget");this.$widget=e}},Iu=class extends Oi{constructor(n,r){super("dataview:list-pair");st(this,"key");st(this,"value");this.key=n,this.value=r}markdown(){return`${xi.toString(this.key)}: ${xi.toString(this.value)}`}},Pu=class extends Oi{constructor(n,r){super("dataview:external-link");st(this,"url");st(this,"display");this.url=n,this.display=r}markdown(){var n;return`[${(n=this.display)!=null?n:this.url}](${this.url})`}},bh;(function(t){function e(u,f){return new Iu(u,f)}t.listPair=e;function n(u,f){return new Pu(u,f)}t.externalLink=n;function r(u){return u.$widget==="dataview:list-pair"}t.isListPair=r;function i(u){return u.$widget==="dataview:external-link"}t.isExternalLink=i;function o(u){return r(u)||i(u)}t.isBuiltin=o})(bh||(bh={}));var Ae;(function(t){function e(_){return{type:"variable",name:_}}t.variable=e;function n(_){return{type:"literal",value:_}}t.literal=n;function r(_,M,V){return{type:"binaryop",left:_,op:M,right:V}}t.binaryOp=r;function i(_,M){return{type:"index",object:_,index:M}}t.index=i;function o(_){let M=_.split("."),V=t.variable(M[0]);for(let oe=1;oe<M.length;oe++)V=t.index(V,t.literal(M[oe]));return V}t.indexVariable=o;function u(_,M){return{type:"lambda",arguments:_,value:M}}t.lambda=u;function f(_,M){return{type:"function",func:_,arguments:M}}t.func=f;function d(_){return{type:"list",values:_}}t.list=d;function p(_){return{type:"object",values:_}}t.object=p;function w(_){return{type:"negated",child:_}}t.negate=w;function y(_){return _=="<="||_=="<"||_==">"||_==">="||_=="!="||_=="="}t.isCompareOp=y,t.NULL=t.literal(null)})(Ae||(Ae={}));var Qt;(function(t){function e(w){return{type:"tag",tag:w}}t.tag=e;function n(w){return{type:"csv",path:w}}t.csv=n;function r(w){return{type:"folder",folder:w}}t.folder=r;function i(w,y){return{type:"link",file:w,direction:y?"incoming":"outgoing"}}t.link=i;function o(w,y,_){return{type:"binaryop",left:w,op:y,right:_}}t.binaryOp=o;function u(w,y){return{type:"binaryop",left:w,op:"&",right:y}}t.and=u;function f(w,y){return{type:"binaryop",left:w,op:"|",right:y}}t.or=f;function d(w){return{type:"negate",child:w}}t.negate=d;function p(){return{type:"empty"}}t.empty=p})(Qt||(Qt={}));var wh=new RegExp(ju(),""),Nu={year:X.fromObject({years:1}),years:X.fromObject({years:1}),yr:X.fromObject({years:1}),yrs:X.fromObject({years:1}),month:X.fromObject({months:1}),months:X.fromObject({months:1}),mo:X.fromObject({months:1}),mos:X.fromObject({months:1}),week:X.fromObject({weeks:1}),weeks:X.fromObject({weeks:1}),wk:X.fromObject({weeks:1}),wks:X.fromObject({weeks:1}),w:X.fromObject({weeks:1}),day:X.fromObject({days:1}),days:X.fromObject({days:1}),d:X.fromObject({days:1}),hour:X.fromObject({hours:1}),hours:X.fromObject({hours:1}),hr:X.fromObject({hours:1}),hrs:X.fromObject({hours:1}),h:X.fromObject({hours:1}),minute:X.fromObject({minutes:1}),minutes:X.fromObject({minutes:1}),min:X.fromObject({minutes:1}),mins:X.fromObject({minutes:1}),m:X.fromObject({minutes:1}),second:X.fromObject({seconds:1}),seconds:X.fromObject({seconds:1}),sec:X.fromObject({seconds:1}),secs:X.fromObject({seconds:1}),s:X.fromObject({seconds:1})},Lu={now:()=>ne.local(),today:()=>ne.local().startOf("day"),yesterday:()=>ne.local().startOf("day").minus(X.fromObject({days:1})),tomorrow:()=>ne.local().startOf("day").plus(X.fromObject({days:1})),sow:()=>ne.local().startOf("week"),"start-of-week":()=>ne.local().startOf("week"),eow:()=>ne.local().endOf("week"),"end-of-week":()=>ne.local().endOf("week"),soy:()=>ne.local().startOf("year"),"start-of-year":()=>ne.local().startOf("year"),eoy:()=>ne.local().endOf("year"),"end-of-year":()=>ne.local().endOf("year"),som:()=>ne.local().startOf("month"),"start-of-month":()=>ne.local().startOf("month"),eom:()=>ne.local().endOf("month"),"end-of-month":()=>ne.local().endOf("month")},Bu=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function F2(t){let e=-1;for(;(e=t.indexOf("|",e+1))>=0;)if(!(e>0&&t[e-1]=="\\"))return[t.substring(0,e).replace(/\\\|/g,"|"),t.substring(e+1)];return[t.replace(/\\\|/g,"|"),void 0]}function C2(t){let[e,n]=F2(t);return qe.infer(e,!1,n)}function Ei(t,e,n){return E.seqMap(t,E.seq(E.optWhitespace,e,E.optWhitespace,t).many(),(r,i)=>{if(i.length==0)return r;let o=n(r,i[0][1],i[0][3]);for(let u=1;u<i.length;u++)o=n(o,i[u][1],i[u][3]);return o})}function _2(t,...e){return E.custom((n,r)=>(i,o)=>{let u=t._(i,o);if(!u.status)return u;for(let f of e){let d=f(u.value)._(i,u.index);if(!d.status)return u;u=d}return u})}var Bt=E.createLanguage({number:t=>E.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:t=>E.string('"').then(E.alt(t.escapeCharacter,E.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(E.string('"')).desc("string"),escapeCharacter:t=>E.string("\\").then(E.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:t=>E.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:t=>E.seqMap(E.string("#"),E.alt(E.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,n)=>e+n.join("")).desc("tag ('#hello/stuff')"),identifier:t=>E.seqMap(E.alt(E.regexp(/\p{Letter}/u),E.regexp(wh).desc("text")),E.alt(E.regexp(/[0-9\p{Letter}_-]/u),E.regexp(wh).desc("text")).many(),(e,n)=>e+n.join("")).desc("variable identifier"),link:t=>E.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>C2(e)).desc("file link"),embedLink:t=>E.seqMap(E.string("!").atMost(1),t.link,(e,n)=>(e.length>0&&(n.embed=!0),n)).desc("file link"),binaryPlusMinus:t=>E.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:t=>E.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:t=>E.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:t=>E.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:t=>E.seqMap(E.regexp(/\d{4}/),E.string("-"),E.regexp(/\d{2}/),(e,n,r)=>ne.fromObject({year:Number.parseInt(e),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:t=>E.alt(...Object.keys(Lu).sort((e,n)=>n.length-e.length).map(E.string)),date:t=>_2(t.rootDate,e=>E.seqMap(E.string("-"),E.regexp(/\d{2}/),(n,r)=>e.set({day:Number.parseInt(r)})),e=>E.seqMap(E.string("T"),E.regexp(/\d{2}/),(n,r)=>e.set({hour:Number.parseInt(r)})),e=>E.seqMap(E.string(":"),E.regexp(/\d{2}/),(n,r)=>e.set({minute:Number.parseInt(r)})),e=>E.seqMap(E.string(":"),E.regexp(/\d{2}/),(n,r)=>e.set({second:Number.parseInt(r)})),e=>E.alt(E.seqMap(E.string("."),E.regexp(/\d{3}/),(n,r)=>e.set({millisecond:Number.parseInt(r)})),E.succeed(e)),e=>E.alt(E.seqMap(E.string("+").or(E.string("-")),E.regexp(/\d{1,2}(:\d{2})?/),(n,r)=>e.setZone("UTC"+n+r,{keepLocalTime:!0})),E.seqMap(E.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),E.seqMap(E.string("["),E.regexp(/[0-9A-Za-z+-\/]+/u),E.string("]"),(n,r,i)=>e.setZone(r,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:t=>E.alt(t.dateShorthand.map(e=>Lu[e]()),t.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:t=>E.alt(...Object.keys(Nu).sort((e,n)=>n.length-e.length).map(E.string)),duration:t=>E.seqMap(t.number,E.optWhitespace,t.durationType,(e,n,r)=>Nu[r].mapUnits(i=>i*e)).sepBy1(E.string(",").trim(E.optWhitespace).or(E.optWhitespace)).map(e=>e.reduce((n,r)=>n.plus(r))).desc("duration like 4hr2min"),rawNull:t=>E.string("null"),tagSource:t=>t.tag.map(e=>Qt.tag(e)),csvSource:t=>E.seqMap(E.string("csv(").skip(E.optWhitespace),t.string,E.string(")"),(e,n,r)=>Qt.csv(n)),linkIncomingSource:t=>t.link.map(e=>Qt.link(e.path,!0)),linkOutgoingSource:t=>E.seqMap(E.string("outgoing(").skip(E.optWhitespace),t.link,E.string(")"),(e,n,r)=>Qt.link(n.path,!1)),folderSource:t=>t.string.map(e=>Qt.folder(e)),parensSource:t=>E.seqMap(E.string("("),E.optWhitespace,t.source,E.optWhitespace,E.string(")"),(e,n,r,i,o)=>r),negateSource:t=>E.seqMap(E.alt(E.string("-"),E.string("!")),t.atomSource,(e,n)=>Qt.negate(n)),atomSource:t=>E.alt(t.parensSource,t.negateSource,t.linkOutgoingSource,t.linkIncomingSource,t.folderSource,t.tagSource,t.csvSource),binaryOpSource:t=>Ei(t.atomSource,t.binaryBooleanOp.map(e=>e),Qt.binaryOp),source:t=>t.binaryOpSource,variableField:t=>t.identifier.chain(e=>Bu.includes(e.toUpperCase())?E.fail("Variable fields cannot be a keyword ("+Bu.join(" or ")+")"):E.succeed(Ae.variable(e))).desc("variable"),numberField:t=>t.number.map(e=>Ae.literal(e)).desc("number"),stringField:t=>t.string.map(e=>Ae.literal(e)).desc("string"),boolField:t=>t.bool.map(e=>Ae.literal(e)).desc("boolean"),dateField:t=>E.seqMap(E.string("date("),E.optWhitespace,t.datePlus,E.optWhitespace,E.string(")"),(e,n,r,i,o)=>Ae.literal(r)).desc("date"),durationField:t=>E.seqMap(E.string("dur("),E.optWhitespace,t.duration,E.optWhitespace,E.string(")"),(e,n,r,i,o)=>Ae.literal(r)).desc("duration"),nullField:t=>t.rawNull.map(e=>Ae.NULL),linkField:t=>t.link.map(e=>Ae.literal(e)),listField:t=>t.field.sepBy(E.string(",").trim(E.optWhitespace)).wrap(E.string("[").skip(E.optWhitespace),E.optWhitespace.then(E.string("]"))).map(e=>Ae.list(e)).desc("list ('[1, 2, 3]')"),objectField:t=>E.seqMap(t.identifier.or(t.string),E.string(":").trim(E.optWhitespace),t.field,(e,n,r)=>({name:e,value:r})).sepBy(E.string(",").trim(E.optWhitespace)).wrap(E.string("{").skip(E.optWhitespace),E.optWhitespace.then(E.string("}"))).map(e=>{let n={};for(let r of e)n[r.name]=r.value;return Ae.object(n)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:t=>E.alt(t.date,t.duration.map(e=>wd(e)),t.string,t.tag,t.embedLink,t.bool,t.number,t.rawNull),inlineFieldList:t=>t.atomInlineField.sepBy(E.string(",").trim(E.optWhitespace).lookahead(t.atomInlineField)),inlineField:t=>E.alt(E.seqMap(t.atomInlineField,E.string(",").trim(E.optWhitespace),t.inlineFieldList,(e,n,r)=>[e].concat(r)),t.atomInlineField),atomField:t=>E.alt(t.embedLink.map(e=>Ae.literal(e)),t.negatedField,t.linkField,t.listField,t.objectField,t.lambdaField,t.parensField,t.boolField,t.numberField,t.stringField,t.dateField,t.durationField,t.nullField,t.variableField),indexField:t=>E.seqMap(t.atomField,E.alt(t.dotPostfix,t.indexPostfix,t.functionPostfix).many(),(e,n)=>{let r=e;for(let i of n)switch(i.type){case"dot":r=Ae.index(r,Ae.literal(i.field));break;case"index":r=Ae.index(r,i.field);break;case"function":r=Ae.func(r,i.fields);break}return r}),negatedField:t=>E.seqMap(E.string("!"),t.indexField,(e,n)=>Ae.negate(n)).desc("negated field"),parensField:t=>E.seqMap(E.string("("),E.optWhitespace,t.field,E.optWhitespace,E.string(")"),(e,n,r,i,o)=>r),lambdaField:t=>E.seqMap(t.identifier.sepBy(E.string(",").trim(E.optWhitespace)).wrap(E.string("(").trim(E.optWhitespace),E.string(")").trim(E.optWhitespace)),E.string("=>").trim(E.optWhitespace),t.field,(e,n,r)=>({type:"lambda",arguments:e,value:r})),dotPostfix:t=>E.seqMap(E.string("."),t.identifier,(e,n)=>({type:"dot",field:n})),indexPostfix:t=>E.seqMap(E.string("["),E.optWhitespace,t.field,E.optWhitespace,E.string("]"),(e,n,r,i,o)=>({type:"index",field:r})),functionPostfix:t=>E.seqMap(E.string("("),E.optWhitespace,t.field.sepBy(E.string(",").trim(E.optWhitespace)),E.optWhitespace,E.string(")"),(e,n,r,i,o)=>({type:"function",fields:r})),binaryMulDivField:t=>Ei(t.indexField,t.binaryMulDiv,Ae.binaryOp),binaryPlusMinusField:t=>Ei(t.binaryMulDivField,t.binaryPlusMinus,Ae.binaryOp),binaryCompareField:t=>Ei(t.binaryPlusMinusField,t.binaryCompareOp,Ae.binaryOp),binaryBooleanField:t=>Ei(t.binaryCompareField,t.binaryBooleanOp,Ae.binaryOp),binaryOpField:t=>t.binaryBooleanField,field:t=>t.binaryOpField});function S2(t){try{return fa.success(Bt.field.tryParse(t))}catch(e){return fa.failure(""+e)}}var da;(function(t){function e(r,i){return{name:r,field:i}}t.named=e;function n(r,i){return{field:r,direction:i}}t.sortBy=n})(da||(da={}));function k2(t){return E.custom((e,n)=>(r,i)=>{let o=t._(r,i);return o.status?Object.assign({},o,{value:[o.value,r.substring(i,o.index)]}):o})}function x2(t){return t.split(/[\r\n]+/).map(e=>e.trim()).join("")}function Eh(t,e){return E.eof.map(t).or(E.whitespace.then(e))}var Ed=E.createLanguage({queryType:t=>E.alt(E.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:t=>E.seqMap(Bt.field.skip(E.whitespace),E.regexp(/AS/i).skip(E.whitespace),Bt.identifier.or(Bt.string),(e,n,r)=>da.named(r,e)),comment:()=>E.Parser((t,e)=>{let n=t.substring(e);if(!n.startsWith("//"))return E.makeFailure(e,"Not a comment");n=n.split(`
`)[0];let r=n.substring(2).trim();return E.makeSuccess(e+n.length,r)}),namedField:t=>E.alt(t.explicitNamedField,k2(Bt.field).map(([e,n])=>da.named(x2(n),e))),sortField:t=>E.seqMap(Bt.field.skip(E.optWhitespace),E.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,n)=>{let r=n.length==0?"ascending":n[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:e,direction:r}}),headerClause:t=>t.queryType.chain(e=>{switch(e){case"table":return Eh(()=>({type:e,fields:[],showId:!0}),E.seqMap(E.regexp(/WITHOUT\s+ID/i).skip(E.optWhitespace).atMost(1),E.sepBy(t.namedField,E.string(",").trim(E.optWhitespace)),(n,r)=>({type:e,fields:r,showId:n.length==0})));case"list":return Eh(()=>({type:e,format:void 0,showId:!0}),E.seqMap(E.regexp(/WITHOUT\s+ID/i).skip(E.optWhitespace).atMost(1),Bt.field.atMost(1),(n,r)=>({type:e,format:r.length==1?r[0]:void 0,showId:n.length==0})));case"task":return E.succeed({type:e});case"calendar":return E.whitespace.then(E.seqMap(t.namedField,n=>({type:e,showId:!0,field:n})));default:return E.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:t=>E.seqMap(E.regexp(/FROM/i),E.whitespace,Bt.source,(e,n,r)=>r),whereClause:t=>E.seqMap(E.regexp(/WHERE/i),E.whitespace,Bt.field,(e,n,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:t=>E.seqMap(E.regexp(/SORT/i),E.whitespace,t.sortField.sepBy1(E.string(",").trim(E.optWhitespace)),(e,n,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:t=>E.seqMap(E.regexp(/LIMIT/i),E.whitespace,Bt.field,(e,n,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:t=>E.seqMap(E.regexp(/FLATTEN/i).skip(E.whitespace),t.namedField,(e,n)=>({type:"flatten",field:n})).desc("FLATTEN <value> [AS <name>]"),groupByClause:t=>E.seqMap(E.regexp(/GROUP BY/i).skip(E.whitespace),t.namedField,(e,n)=>({type:"group",field:n})).desc("GROUP BY <value> [AS <name>]"),clause:t=>E.alt(t.fromClause,t.whereClause,t.sortByClause,t.limitClause,t.groupByClause,t.flattenClause),query:t=>E.seqMap(t.headerClause.trim(Du),t.fromClause.trim(Du).atMost(1),t.clause.trim(Du).many(),(e,n,r)=>({header:e,source:n.length==0?Qt.folder(""):n[0],operations:r,settings:Uu}))}),Du=E.alt(E.whitespace,Ed.comment).many().map(t=>t.join("")),O2=t=>{var e;return t?(e=t.plugins.plugins.dataview)==null?void 0:e.api:window.DataviewAPI},T2=t=>t.plugins.enabledPlugins.has("dataview");$t.DATE_SHORTHANDS=Lu;$t.DURATION_TYPES=Nu;$t.EXPRESSION=Bt;$t.KEYWORDS=Bu;$t.QUERY_LANGUAGE=Ed;$t.getAPI=O2;$t.isPluginEnabled=T2;$t.parseField=S2});var Ad=fe(($u,Xu)=>{(function(t,e){typeof $u=="object"&&typeof Xu!="undefined"?Xu.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis!="undefined"?globalThis:t||self,t.Dexie=e())})($u,function(){"use strict";var t=function(s,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(l[h]=c[h])},t(s,a)};function e(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}var n=function(){return n=Object.assign||function(a){for(var l,c=1,h=arguments.length;c<h;c++){l=arguments[c];for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(a[m]=l[m])}return a},n.apply(this,arguments)};function r(s,a,l){if(l||arguments.length===2)for(var c=0,h=a.length,m;c<h;c++)(m||!(c in a))&&(m||(m=Array.prototype.slice.call(a,0,c)),m[c]=a[c]);return s.concat(m||Array.prototype.slice.call(a))}var i=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,o=Object.keys,u=Array.isArray;typeof Promise!="undefined"&&!i.Promise&&(i.Promise=Promise);function f(s,a){return typeof a!="object"||o(a).forEach(function(l){s[l]=a[l]}),s}var d=Object.getPrototypeOf,p={}.hasOwnProperty;function w(s,a){return p.call(s,a)}function y(s,a){typeof a=="function"&&(a=a(d(s))),(typeof Reflect=="undefined"?o:Reflect.ownKeys)(a).forEach(function(l){M(s,l,a[l])})}var _=Object.defineProperty;function M(s,a,l,c){_(s,a,f(l&&w(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function V(s){return{from:function(a){return s.prototype=Object.create(a.prototype),M(s.prototype,"constructor",s),{extend:y.bind(null,s.prototype)}}}}var oe=Object.getOwnPropertyDescriptor;function pe(s,a){var l=oe(s,a),c;return l||(c=d(s))&&pe(c,a)}var me=[].slice;function Ce(s,a,l){return me.call(s,a,l)}function He(s,a){return a(s)}function R(s){if(!s)throw new Error("Assertion Failed")}function ue(s){i.setImmediate?setImmediate(s):setTimeout(s,0)}function be(s,a){return s.reduce(function(l,c,h){var m=a(c,h);return m&&(l[m[0]]=m[1]),l},{})}function W(s,a){if(typeof a=="string"&&w(s,a))return s[a];if(!a)return s;if(typeof a!="string"){for(var l=[],c=0,h=a.length;c<h;++c){var m=W(s,a[c]);l.push(m)}return l}var g=a.indexOf(".");if(g!==-1){var D=s[a.substr(0,g)];return D==null?void 0:W(D,a.substr(g+1))}}function re(s,a,l){if(!(!s||a===void 0)&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof a!="string"&&"length"in a){R(typeof l!="string"&&"length"in l);for(var c=0,h=a.length;c<h;++c)re(s,a[c],l[c])}else{var m=a.indexOf(".");if(m!==-1){var g=a.substr(0,m),D=a.substr(m+1);if(D==="")l===void 0?u(s)&&!isNaN(parseInt(g))?s.splice(g,1):delete s[g]:s[g]=l;else{var b=s[g];(!b||!w(s,g))&&(b=s[g]={}),re(b,D,l)}}else l===void 0?u(s)&&!isNaN(parseInt(a))?s.splice(a,1):delete s[a]:s[a]=l}}function Fe(s,a){typeof a=="string"?re(s,a,void 0):"length"in a&&[].map.call(a,function(l){re(s,l,void 0)})}function je(s){var a={};for(var l in s)w(s,l)&&(a[l]=s[l]);return a}var Je=[].concat;function Se(s){return Je.apply([],s)}var vt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Se([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(a){return a+s+"Array"})}))).filter(function(s){return i[s]}),We=new Set(vt.map(function(s){return i[s]}));function ze(s){var a={};for(var l in s)if(w(s,l)){var c=s[l];a[l]=!c||typeof c!="object"||We.has(c.constructor)?c:ze(c)}return a}function Te(s){for(var a in s)if(w(s,a))return!1;return!0}var xt=null;function Dt(s){xt=new WeakMap;var a=rt(s);return xt=null,a}function rt(s){if(!s||typeof s!="object")return s;var a=xt.get(s);if(a)return a;if(u(s)){a=[],xt.set(s,a);for(var l=0,c=s.length;l<c;++l)a.push(rt(s[l]))}else if(We.has(s.constructor))a=s;else{var h=d(s);a=h===Object.prototype?{}:Object.create(h),xt.set(s,a);for(var m in s)w(s,m)&&(a[m]=rt(s[m]))}return a}var In={}.toString;function gn(s){return In.call(s).slice(8,-1)}var Xt=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Qe=typeof Xt=="symbol"?function(s){var a;return s!=null&&(a=s[Xt])&&a.apply(s)}:function(){return null};function Ge(s,a){var l=s.indexOf(a);return l>=0&&s.splice(l,1),l>=0}var en={};function Ot(s){var a,l,c,h;if(arguments.length===1){if(u(s))return s.slice();if(this===en&&typeof s=="string")return[s];if(h=Qe(s)){for(l=[];c=h.next(),!c.done;)l.push(c.value);return l}if(s==null)return[s];if(a=s.length,typeof a=="number"){for(l=new Array(a);a--;)l[a]=s[a];return l}return[s]}for(a=arguments.length,l=new Array(a);a--;)l[a]=arguments[a];return l}var nr=typeof Symbol!="undefined"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Pn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tt=Pi.concat(Pn),rr={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function tn(s,a){this.name=s,this.message=a}V(tn).from(Error).extend({toString:function(){return this.name+": "+this.message}});function ir(s,a){return s+". Errors: "+Object.keys(a).map(function(l){return a[l].toString()}).filter(function(l,c,h){return h.indexOf(l)===c}).join(`
`)}function Gt(s,a,l,c){this.failures=a,this.failedKeys=c,this.successCount=l,this.message=ir(s,a)}V(Gt).from(tn);function $e(s,a){this.name="BulkError",this.failures=Object.keys(a).map(function(l){return a[l]}),this.failuresByPos=a,this.message=ir(s,this.failures)}V($e).from(tn);var Mt=Tt.reduce(function(s,a){return s[a]=a+"Error",s},{}),sr=tn,ie=Tt.reduce(function(s,a){var l=a+"Error";function c(h,m){this.name=l,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=rr[a]||l,this.inner=null)}return V(c).from(sr),s[a]=c,s},{});ie.Syntax=SyntaxError,ie.Type=TypeError,ie.Range=RangeError;var Hr=Pn.reduce(function(s,a){return s[a+"Error"]=ie[a],s},{});function ar(s,a){if(!s||s instanceof tn||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Hr[s.name])return s;var l=new Hr[s.name](a||s.message,s);return"stack"in s&&M(l,"stack",{get:function(){return this.inner.stack}}),l}var Nn=Tt.reduce(function(s,a){return["Syntax","Type","Range"].indexOf(a)===-1&&(s[a+"Error"]=ie[a]),s},{});Nn.ModifyError=Gt,Nn.DexieError=tn,Nn.BulkError=$e;function we(){}function At(s){return s}function Ia(s,a){return s==null||s===At?a:function(l){return a(s(l))}}function nn(s,a){return function(){s.apply(this,arguments),a.apply(this,arguments)}}function Gr(s,a){return s===we?a:function(){var l=s.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=a.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?nn(c,this.onsuccess):c),h&&(this.onerror=this.onerror?nn(h,this.onerror):h),m!==void 0?m:l}}function Pa(s,a){return s===we?a:function(){s.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,a.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?nn(l,this.onsuccess):l),c&&(this.onerror=this.onerror?nn(c,this.onerror):c)}}function Na(s,a){return s===we?a:function(l){var c=s.apply(this,arguments);f(l,c);var h=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var g=a.apply(this,arguments);return h&&(this.onsuccess=this.onsuccess?nn(h,this.onsuccess):h),m&&(this.onerror=this.onerror?nn(m,this.onerror):m),c===void 0?g===void 0?void 0:g:f(c,g)}}function La(s,a){return s===we?a:function(){return a.apply(this,arguments)===!1?!1:s.apply(this,arguments)}}function Vr(s,a){return s===we?a:function(){var l=s.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return l.then(function(){return a.apply(c,m)})}return a.apply(this,arguments)}}var bt=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ni(s,a){bt=s}var yn={},Kr=100,or=typeof Promise=="undefined"?[]:function(){var s=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[s,d(s),s];var a=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[a,d(a),s]}(),qr=or[0],Li=or[1],v=or[2],C=Li&&Li.then,T=qr&&qr.constructor,B=!!v;function q(){queueMicrotask(Hd)}var j=function(s,a){it.push([s,a]),ce&&(q(),ce=!1)},z=!0,ce=!0,ve=[],Le=[],Pe=At,Ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:we,pgp:!1,env:{},finalize:we},$=Ve,it=[],ot=0,ur=[];function U(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var a=this._PSD=$;if(typeof s!="function"){if(s!==yn)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&qt(this,this._value);return}this._state=null,this._value=null,++a.ref,Kt(this,s)}var Vt={get:function(){var s=$,a=Gi;function l(c,h){var m=this,g=!s.global&&(s!==$||a!==Gi),D=g&&!Dn(),b=new U(function(F,x){Ba(m,new rn(rl(c,s,g,D),rl(h,s,g,D),F,x,s))});return this._consoleTask&&(b._consoleTask=this._consoleTask),b}return l.prototype=yn,l},set:function(s){M(this,"then",s&&s.prototype===yn?Vt:{get:function(){return s},set:Vt.set})}};y(U.prototype,{then:Vt,_then:function(s,a){Ba(this,new rn(null,null,s,a,$))},catch:function(s){if(arguments.length===1)return this.then(null,s);var a=arguments[0],l=arguments[1];return typeof a=="function"?this.then(null,function(c){return c instanceof a?l(c):Bi(c)}):this.then(null,function(c){return c&&c.name===a?l(c):Bi(c)})},finally:function(s){return this.then(function(a){return U.resolve(s()).then(function(){return a})},function(a){return U.resolve(s()).then(function(){return Bi(a)})})},timeout:function(s,a){var l=this;return s<1/0?new U(function(c,h){var m=setTimeout(function(){return h(new ie.Timeout(a))},s);l.then(c,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&M(U.prototype,Symbol.toStringTag,"Dexie.Promise"),Ve.env=nl();function rn(s,a,l,c,h){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof a=="function"?a:null,this.resolve=l,this.reject=c,this.psd=h}y(U,{all:function(){var s=Ot.apply(null,arguments).map(Vi);return new U(function(a,l){s.length===0&&a([]);var c=s.length;s.forEach(function(h,m){return U.resolve(h).then(function(g){s[m]=g,--c||a(s)},l)})})},resolve:function(s){if(s instanceof U)return s;if(s&&typeof s.then=="function")return new U(function(l,c){s.then(l,c)});var a=new U(yn,!0,s);return a},reject:Bi,race:function(){var s=Ot.apply(null,arguments).map(Vi);return new U(function(a,l){s.map(function(c){return U.resolve(c).then(a,l)})})},PSD:{get:function(){return $},set:function(s){return $=s}},totalEchoes:{get:function(){return Gi}},newPSD:vn,usePSD:Ln,scheduler:{get:function(){return j},set:function(s){j=s}},rejectionMapper:{get:function(){return Pe},set:function(s){Pe=s}},follow:function(s,a){return new U(function(l,c){return vn(function(h,m){var g=$;g.unhandleds=[],g.onunhandled=m,g.finalize=nn(function(){var D=this;Gd(function(){D.unhandleds.length===0?h():m(D.unhandleds[0])})},g.finalize),s()},a,l,c)})}}),T&&(T.allSettled&&M(U,"allSettled",function(){var s=Ot.apply(null,arguments).map(Vi);return new U(function(a){s.length===0&&a([]);var l=s.length,c=new Array(l);s.forEach(function(h,m){return U.resolve(h).then(function(g){return c[m]={status:"fulfilled",value:g}},function(g){return c[m]={status:"rejected",reason:g}}).then(function(){return--l||a(c)})})})}),T.any&&typeof AggregateError!="undefined"&&M(U,"any",function(){var s=Ot.apply(null,arguments).map(Vi);return new U(function(a,l){s.length===0&&l(new AggregateError([]));var c=s.length,h=new Array(c);s.forEach(function(m,g){return U.resolve(m).then(function(D){return a(D)},function(D){h[g]=D,--c||l(new AggregateError(h))})})})}),T.withResolvers&&(U.withResolvers=T.withResolvers));function Kt(s,a){try{a(function(l){if(s._state===null){if(l===s)throw new TypeError("A promise cannot be resolved with itself.");var c=s._lib&&lr();l&&typeof l.then=="function"?Kt(s,function(h,m){l instanceof U?l._then(h,m):l.then(h,m)}):(s._state=!0,s._value=l,sn(s)),c&&cr()}},qt.bind(null,s))}catch(l){qt(s,l)}}function qt(s,a){if(Le.push(a),s._state===null){var l=s._lib&&lr();a=Pe(a),s._state=!1,s._value=a,Vd(s),sn(s),l&&cr()}}function sn(s){var a=s._listeners;s._listeners=[];for(var l=0,c=a.length;l<c;++l)Ba(s,a[l]);var h=s._PSD;--h.ref||h.finalize(),ot===0&&(++ot,j(function(){--ot===0&&Ra()},[]))}function Ba(s,a){if(s._state===null){s._listeners.push(a);return}var l=s._state?a.onFulfilled:a.onRejected;if(l===null)return(s._state?a.resolve:a.reject)(s._value);++a.psd.ref,++ot,j(Rd,[l,s,a])}function Rd(s,a,l){try{var c,h=a._value;!a._state&&Le.length&&(Le=[]),c=bt&&a._consoleTask?a._consoleTask.run(function(){return s(h)}):s(h),!a._state&&Le.indexOf(h)===-1&&Kd(a),l.resolve(c)}catch(m){l.reject(m)}finally{--ot===0&&Ra(),--l.psd.ref||l.psd.finalize()}}function Hd(){Ln(Ve,function(){lr()&&cr()})}function lr(){var s=z;return z=!1,ce=!1,s}function cr(){var s,a,l;do for(;it.length>0;)for(s=it,it=[],l=s.length,a=0;a<l;++a){var c=s[a];c[0].apply(null,c[1])}while(it.length>0);z=!0,ce=!0}function Ra(){var s=ve;ve=[],s.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var a=ur.slice(0),l=a.length;l;)a[--l]()}function Gd(s){function a(){s(),ur.splice(ur.indexOf(a),1)}ur.push(a),++ot,j(function(){--ot===0&&Ra()},[])}function Vd(s){ve.some(function(a){return a._value===s._value})||ve.push(s)}function Kd(s){for(var a=ve.length;a;)if(ve[--a]._value===s._value){ve.splice(a,1);return}}function Bi(s){return new U(yn,!1,s)}function xe(s,a){var l=$;return function(){var c=lr(),h=$;try{return bn(l,!0),s.apply(this,arguments)}catch(m){a&&a(m)}finally{bn(h,!1),c&&cr()}}}var Ke={awaits:0,echoes:0,id:0},qd=0,Ri=[],Hi=0,Gi=0,Ud=0;function vn(s,a,l,c){var h=$,m=Object.create(h);m.parent=h,m.ref=0,m.global=!1,m.id=++Ud,Ve.env,m.env=B?{Promise:U,PromiseProp:{value:U,configurable:!0,writable:!0},all:U.all,race:U.race,allSettled:U.allSettled,any:U.any,resolve:U.resolve,reject:U.reject}:{},a&&f(m,a),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()};var g=Ln(m,s,l,c);return m.ref===0&&m.finalize(),g}function fr(){return Ke.id||(Ke.id=++qd),++Ke.awaits,Ke.echoes+=Kr,Ke.id}function Dn(){return Ke.awaits?(--Ke.awaits===0&&(Ke.id=0),Ke.echoes=Ke.awaits*Kr,!0):!1}(""+C).indexOf("[native code]")===-1&&(fr=Dn=we);function Vi(s){return Ke.echoes&&s&&s.constructor===T?(fr(),s.then(function(a){return Dn(),a},function(a){return Dn(),Ne(a)})):s}function jd(s){++Gi,(!Ke.echoes||--Ke.echoes===0)&&(Ke.echoes=Ke.awaits=Ke.id=0),Ri.push($),bn(s,!0)}function Wd(){var s=Ri[Ri.length-1];Ri.pop(),bn(s,!1)}function bn(s,a){var l=$;if((a?Ke.echoes&&(!Hi++||s!==$):Hi&&(!--Hi||s!==$))&&queueMicrotask(a?jd.bind(null,s):Wd),s!==$&&($=s,l===Ve&&(Ve.env=nl()),B)){var c=Ve.env.Promise,h=s.env;(l.global||s.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),c.all=h.all,c.race=h.race,c.resolve=h.resolve,c.reject=h.reject,h.allSettled&&(c.allSettled=h.allSettled),h.any&&(c.any=h.any))}}function nl(){var s=i.Promise;return B?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function Ln(s,a,l,c,h){var m=$;try{return bn(s,!0),a(l,c,h)}finally{bn(m,!1)}}function rl(s,a,l,c){return typeof s!="function"?s:function(){var h=$;l&&fr(),bn(a,!0);try{return s.apply(this,arguments)}finally{bn(h,!1),c&&queueMicrotask(Dn)}}}function Ha(s){Promise===T&&Ke.echoes===0?Hi===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}var Ne=U.reject;function Ga(s,a,l,c){if(!s.idbdb||!s._state.openComplete&&!$.letThrough&&!s._vip){if(s._state.openComplete)return Ne(new ie.DatabaseClosed(s._state.dbOpenError));if(!s._state.isBeingOpened){if(!s._state.autoOpen)return Ne(new ie.DatabaseClosed);s.open().catch(we)}return s._state.dbReadyPromise.then(function(){return Ga(s,a,l,c)})}else{var h=s._createTransaction(a,l,s._dbSchema);try{h.create(),s._state.PR1398_maxLoop=3}catch(m){return m.name===Mt.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return Ga(s,a,l,c)})):Ne(m)}return h._promise(a,function(m,g){return vn(function(){return $.trans=h,c(m,g,h)})}).then(function(m){if(a==="readwrite")try{h.idbtrans.commit()}catch(g){}return a==="readonly"?m:h._completion.then(function(){return m})})}}var il="4.0.10",Bn=String.fromCharCode(65535),Va=-1/0,an="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",sl="String expected.",hr=[],Ki="__dbnames",Ka="readonly",qa="readwrite";function Rn(s,a){return s?a?function(){return s.apply(this,arguments)&&a.apply(this,arguments)}:s:a}var al={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function qi(s){return typeof s=="string"&&!/\./.test(s)?function(a){return a[s]===void 0&&s in a&&(a=Dt(a),delete a[s]),a}:function(a){return a}}function ol(){throw ie.Type()}function ge(s,a){try{var l=ul(s),c=ul(a);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return s>a?1:s<a?-1:0;case"binary":return Yd(ll(s),ll(a));case"Array":return zd(s,a)}}catch(h){}return NaN}function zd(s,a){for(var l=s.length,c=a.length,h=l<c?l:c,m=0;m<h;++m){var g=ge(s[m],a[m]);if(g!==0)return g}return l===c?0:l<c?-1:1}function Yd(s,a){for(var l=s.length,c=a.length,h=l<c?l:c,m=0;m<h;++m)if(s[m]!==a[m])return s[m]<a[m]?-1:1;return l===c?0:l<c?-1:1}function ul(s){var a=typeof s;if(a!=="object")return a;if(ArrayBuffer.isView(s))return"binary";var l=gn(s);return l==="ArrayBuffer"?"binary":l}function ll(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}var cl=function(){function s(){}return s.prototype._trans=function(a,l,c){var h=this._tx||$.trans,m=this.name,g=bt&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(a==="readonly"?"read":"write"," ").concat(this.name));function D(x,S,I){if(!I.schema[m])throw new ie.NotFound("Table "+m+" not part of transaction");return l(I.idbtrans,I)}var b=lr();try{var F=h&&h.db._novip===this.db._novip?h===$.trans?h._promise(a,D,c):vn(function(){return h._promise(a,D,c)},{trans:h,transless:$.transless||$}):Ga(this.db,a,[this.name],D);return g&&(F._consoleTask=g,F=F.catch(function(x){return console.trace(x),Ne(x)})),F}finally{b&&cr()}},s.prototype.get=function(a,l){var c=this;return a&&a.constructor===Object?this.where(a).first(l):a==null?Ne(new ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function(h){return c.core.get({trans:h,key:a}).then(function(m){return c.hook.reading.fire(m)})}).then(l)},s.prototype.where=function(a){if(typeof a=="string")return new this.db.WhereClause(this,a);if(u(a))return new this.db.WhereClause(this,"[".concat(a.join("+"),"]"));var l=o(a);if(l.length===1)return this.where(l[0]).equals(a[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&l.every(function(I){return x.keyPath.indexOf(I)>=0})){for(var S=0;S<l.length;++S)if(l.indexOf(x.keyPath[S])===-1)return!1;return!0}return!1}).sort(function(x,S){return x.keyPath.length-S.keyPath.length})[0];if(c&&this.db._maxKey!==Bn){var h=c.keyPath.slice(0,l.length);return this.where(h).equals(h.map(function(x){return a[x]}))}!c&&bt&&console.warn("The query ".concat(JSON.stringify(a)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var m=this.schema.idxByName;function g(x,S){return ge(x,S)===0}var D=l.reduce(function(x,S){var I=x[0],K=x[1],k=m[S],O=a[S];return[I||k,I||!k?Rn(K,k&&k.multi?function(A){var H=W(A,S);return u(H)&&H.some(function(N){return g(O,N)})}:function(A){return g(O,W(A,S))}):K]},[null,null]),b=D[0],F=D[1];return b?this.where(b.name).equals(a[b.keyPath]).filter(F):c?this.filter(F):this.where(l).equals("")},s.prototype.filter=function(a){return this.toCollection().and(a)},s.prototype.count=function(a){return this.toCollection().count(a)},s.prototype.offset=function(a){return this.toCollection().offset(a)},s.prototype.limit=function(a){return this.toCollection().limit(a)},s.prototype.each=function(a){return this.toCollection().each(a)},s.prototype.toArray=function(a){return this.toCollection().toArray(a)},s.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},s.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,u(a)?"[".concat(a.join("+"),"]"):a))},s.prototype.reverse=function(){return this.toCollection().reverse()},s.prototype.mapToClass=function(a){var l=this,c=l.db,h=l.name;this.schema.mappedClass=a,a.prototype instanceof ol&&(a=function(b){e(F,b);function F(){return b!==null&&b.apply(this,arguments)||this}return Object.defineProperty(F.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),F.prototype.table=function(){return h},F}(a));for(var m=new Set,g=a.prototype;g;g=d(g))Object.getOwnPropertyNames(g).forEach(function(b){return m.add(b)});var D=function(b){if(!b)return b;var F=Object.create(a.prototype);for(var x in b)if(!m.has(x))try{F[x]=b[x]}catch(S){}return F};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),a},s.prototype.defineClass=function(){function a(l){f(this,l)}return this.mapToClass(a)},s.prototype.add=function(a,l){var c=this,h=this.schema.primKey,m=h.auto,g=h.keyPath,D=a;return g&&m&&(D=qi(g)(a)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"add",keys:l!=null?[l]:null,values:[D]})}).then(function(b){return b.numFailures?U.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{re(a,g,b)}catch(F){}return b})},s.prototype.update=function(a,l){if(typeof a=="object"&&!u(a)){var c=W(a,this.schema.primKey.keyPath);return c===void 0?Ne(new ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(l)}else return this.where(":id").equals(a).modify(l)},s.prototype.put=function(a,l){var c=this,h=this.schema.primKey,m=h.auto,g=h.keyPath,D=a;return g&&m&&(D=qi(g)(a)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"put",values:[D],keys:l!=null?[l]:null})}).then(function(b){return b.numFailures?U.reject(b.failures[0]):b.lastResult}).then(function(b){if(g)try{re(a,g,b)}catch(F){}return b})},s.prototype.delete=function(a){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(c){return c.numFailures?U.reject(c.failures[0]):void 0})},s.prototype.clear=function(){var a=this;return this._trans("readwrite",function(l){return a.core.mutate({trans:l,type:"deleteRange",range:al})}).then(function(l){return l.numFailures?U.reject(l.failures[0]):void 0})},s.prototype.bulkGet=function(a){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:a,trans:c}).then(function(h){return h.map(function(m){return l.hook.reading.fire(m)})})})},s.prototype.bulkAdd=function(a,l,c){var h=this,m=Array.isArray(l)?l:void 0;c=c||(m?void 0:l);var g=c?c.allKeys:void 0;return this._trans("readwrite",function(D){var b=h.schema.primKey,F=b.auto,x=b.keyPath;if(x&&m)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==a.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var S=a.length,I=x&&F?a.map(qi(x)):a;return h.core.mutate({trans:D,type:"add",keys:m,values:I,wantResults:g}).then(function(K){var k=K.numFailures,O=K.results,A=K.lastResult,H=K.failures,N=g?O:A;if(k===0)return N;throw new $e("".concat(h.name,".bulkAdd(): ").concat(k," of ").concat(S," operations failed"),H)})})},s.prototype.bulkPut=function(a,l,c){var h=this,m=Array.isArray(l)?l:void 0;c=c||(m?void 0:l);var g=c?c.allKeys:void 0;return this._trans("readwrite",function(D){var b=h.schema.primKey,F=b.auto,x=b.keyPath;if(x&&m)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==a.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");var S=a.length,I=x&&F?a.map(qi(x)):a;return h.core.mutate({trans:D,type:"put",keys:m,values:I,wantResults:g}).then(function(K){var k=K.numFailures,O=K.results,A=K.lastResult,H=K.failures,N=g?O:A;if(k===0)return N;throw new $e("".concat(h.name,".bulkPut(): ").concat(k," of ").concat(S," operations failed"),H)})})},s.prototype.bulkUpdate=function(a){var l=this,c=this.core,h=a.map(function(D){return D.key}),m=a.map(function(D){return D.changes}),g=[];return this._trans("readwrite",function(D){return c.getMany({trans:D,keys:h,cache:"clone"}).then(function(b){var F=[],x=[];a.forEach(function(I,K){var k=I.key,O=I.changes,A=b[K];if(A){for(var H=0,N=Object.keys(O);H<N.length;H++){var L=N[H],G=O[L];if(L===l.schema.primKey.keyPath){if(ge(G,k)!==0)throw new ie.Constraint("Cannot update primary key in bulkUpdate()")}else re(A,L,G)}g.push(K),F.push(k),x.push(A)}});var S=F.length;return c.mutate({trans:D,type:"put",keys:F,values:x,updates:{keys:h,changeSpecs:m}}).then(function(I){var K=I.numFailures,k=I.failures;if(K===0)return S;for(var O=0,A=Object.keys(k);O<A.length;O++){var H=A[O],N=g[Number(H)];if(N!=null){var L=k[H];delete k[H],k[N]=L}}throw new $e("".concat(l.name,".bulkUpdate(): ").concat(K," of ").concat(S," operations failed"),k)})})})},s.prototype.bulkDelete=function(a){var l=this,c=a.length;return this._trans("readwrite",function(h){return l.core.mutate({trans:h,type:"delete",keys:a})}).then(function(h){var m=h.numFailures,g=h.lastResult,D=h.failures;if(m===0)return g;throw new $e("".concat(l.name,".bulkDelete(): ").concat(m," of ").concat(c," operations failed"),D)})},s}();function Ur(s){var a={},l=function(D,b){if(b){for(var F=arguments.length,x=new Array(F-1);--F;)x[F-1]=arguments[F];return a[D].subscribe.apply(null,x),s}else if(typeof D=="string")return a[D]};l.addEventType=m;for(var c=1,h=arguments.length;c<h;++c)m(arguments[c]);return l;function m(D,b,F){if(typeof D=="object")return g(D);b||(b=La),F||(F=we);var x={subscribers:[],fire:F,subscribe:function(S){x.subscribers.indexOf(S)===-1&&(x.subscribers.push(S),x.fire=b(x.fire,S))},unsubscribe:function(S){x.subscribers=x.subscribers.filter(function(I){return I!==S}),x.fire=x.subscribers.reduce(b,F)}};return a[D]=l[D]=x,x}function g(D){o(D).forEach(function(b){var F=D[b];if(u(F))m(b,D[b][0],D[b][1]);else if(F==="asap")var x=m(b,At,function(){for(var I=arguments.length,K=new Array(I);I--;)K[I]=arguments[I];x.subscribers.forEach(function(k){ue(function(){k.apply(null,K)})})});else throw new ie.InvalidArgument("Invalid event config")})}}function jr(s,a){return V(a).from({prototype:s}),a}function Zd(s){return jr(cl.prototype,function(l,c,h){this.db=s,this._tx=h,this.name=l,this.schema=c,this.hook=s._allTables[l]?s._allTables[l].hook:Ur(null,{creating:[Gr,we],reading:[Ia,At],updating:[Na,we],deleting:[Pa,we]})})}function dr(s,a){return!(s.filter||s.algorithm||s.or)&&(a?s.justLimit:!s.replayFilter)}function Ua(s,a){s.filter=Rn(s.filter,a)}function ja(s,a,l){var c=s.replayFilter;s.replayFilter=c?function(){return Rn(c(),a())}:a,s.justLimit=l&&!c}function Jd(s,a){s.isMatch=Rn(s.isMatch,a)}function Ui(s,a){if(s.isPrimKey)return a.primaryKey;var l=a.getIndexByKeyPath(s.index);if(!l)throw new ie.Schema("KeyPath "+s.index+" on object store "+a.name+" is not indexed");return l}function fl(s,a,l){var c=Ui(s,a.schema);return a.openCursor({trans:l,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:c,range:s.range}})}function ji(s,a,l,c){var h=s.replayFilter?Rn(s.filter,s.replayFilter()):s.filter;if(s.or){var m={},g=function(D,b,F){if(!h||h(b,F,function(I){return b.stop(I)},function(I){return b.fail(I)})){var x=b.primaryKey,S=""+x;S==="[object ArrayBuffer]"&&(S=""+new Uint8Array(x)),w(m,S)||(m[S]=!0,a(D,b,F))}};return Promise.all([s.or._iterate(g,l),hl(fl(s,c,l),s.algorithm,g,!s.keysOnly&&s.valueMapper)])}else return hl(fl(s,c,l),Rn(s.algorithm,h),a,!s.keysOnly&&s.valueMapper)}function hl(s,a,l,c){var h=c?function(g,D,b){return l(c(g),D,b)}:l,m=xe(h);return s.then(function(g){if(g)return g.start(function(){var D=function(){return g.continue()};(!a||a(g,function(b){return D=b},function(b){g.stop(b),D=we},function(b){g.fail(b),D=we}))&&m(g.value,g,function(b){return D=b}),D()})})}var Qd=Symbol(),Wr=function(){function s(a){Object.assign(this,a)}return s.prototype.execute=function(a){var l;if(this.add!==void 0){var c=this.add;if(u(c))return r(r([],u(a)?a:[],!0),c,!0).sort();if(typeof c=="number")return(Number(a)||0)+c;if(typeof c=="bigint")try{return BigInt(a)+c}catch(g){return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(this.remove!==void 0){var h=this.remove;if(u(h))return u(a)?a.filter(function(g){return!h.includes(g)}).sort():[];if(typeof h=="number")return Number(a)-h;if(typeof h=="bigint")try{return BigInt(a)-h}catch(g){return BigInt(0)-h}throw new TypeError("Invalid subtrahend ".concat(h))}var m=(l=this.replacePrefix)===null||l===void 0?void 0:l[0];return m&&typeof a=="string"&&a.startsWith(m)?this.replacePrefix[1]+a.substring(m.length):a},s}(),$d=function(){function s(){}return s.prototype._read=function(a,l){var c=this._ctx;return c.error?c.table._trans(null,Ne.bind(null,c.error)):c.table._trans("readonly",a).then(l)},s.prototype._write=function(a){var l=this._ctx;return l.error?l.table._trans(null,Ne.bind(null,l.error)):l.table._trans("readwrite",a,"locked")},s.prototype._addAlgorithm=function(a){var l=this._ctx;l.algorithm=Rn(l.algorithm,a)},s.prototype._iterate=function(a,l){return ji(this._ctx,a,l,this._ctx.table.core)},s.prototype.clone=function(a){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return a&&f(c,a),l._ctx=c,l},s.prototype.raw=function(){return this._ctx.valueMapper=null,this},s.prototype.each=function(a){var l=this._ctx;return this._read(function(c){return ji(l,a,c,l.table.core)})},s.prototype.count=function(a){var l=this;return this._read(function(c){var h=l._ctx,m=h.table.core;if(dr(h,!0))return m.count({trans:c,query:{index:Ui(h,m.schema),range:h.range}}).then(function(D){return Math.min(D,h.limit)});var g=0;return ji(h,function(){return++g,!1},c,m).then(function(){return g})}).then(a)},s.prototype.sortBy=function(a,l){var c=a.split(".").reverse(),h=c[0],m=c.length-1;function g(F,x){return x?g(F[c[x]],x-1):F[h]}var D=this._ctx.dir==="next"?1:-1;function b(F,x){var S=g(F,m),I=g(x,m);return ge(S,I)*D}return this.toArray(function(F){return F.sort(b)}).then(l)},s.prototype.toArray=function(a){var l=this;return this._read(function(c){var h=l._ctx;if(h.dir==="next"&&dr(h,!0)&&h.limit>0){var m=h.valueMapper,g=Ui(h,h.table.core.schema);return h.table.core.query({trans:c,limit:h.limit,values:!0,query:{index:g,range:h.range}}).then(function(b){var F=b.result;return m?F.map(m):F})}else{var D=[];return ji(h,function(b){return D.push(b)},c,h.table.core).then(function(){return D})}},a)},s.prototype.offset=function(a){var l=this._ctx;return a<=0?this:(l.offset+=a,dr(l)?ja(l,function(){var c=a;return function(h,m){return c===0?!0:c===1?(--c,!1):(m(function(){h.advance(c),c=0}),!1)}}):ja(l,function(){var c=a;return function(){return--c<0}}),this)},s.prototype.limit=function(a){return this._ctx.limit=Math.min(this._ctx.limit,a),ja(this._ctx,function(){var l=a;return function(c,h,m){return--l<=0&&h(m),l>=0}},!0),this},s.prototype.until=function(a,l){return Ua(this._ctx,function(c,h,m){return a(c.value)?(h(m),l):!0}),this},s.prototype.first=function(a){return this.limit(1).toArray(function(l){return l[0]}).then(a)},s.prototype.last=function(a){return this.reverse().first(a)},s.prototype.filter=function(a){return Ua(this._ctx,function(l){return a(l.value)}),Jd(this._ctx,a),this},s.prototype.and=function(a){return this.filter(a)},s.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)},s.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},s.prototype.desc=function(){return this.reverse()},s.prototype.eachKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,h){a(h.key,h)})},s.prototype.eachUniqueKey=function(a){return this._ctx.unique="unique",this.eachKey(a)},s.prototype.eachPrimaryKey=function(a){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,h){a(h.primaryKey,h)})},s.prototype.keys=function(a){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(h,m){c.push(m.key)}).then(function(){return c}).then(a)},s.prototype.primaryKeys=function(a){var l=this._ctx;if(l.dir==="next"&&dr(l,!0)&&l.limit>0)return this._read(function(h){var m=Ui(l,l.table.core.schema);return l.table.core.query({trans:h,values:!1,limit:l.limit,query:{index:m,range:l.range}})}).then(function(h){var m=h.result;return m}).then(a);l.keysOnly=!l.isMatch;var c=[];return this.each(function(h,m){c.push(m.primaryKey)}).then(function(){return c}).then(a)},s.prototype.uniqueKeys=function(a){return this._ctx.unique="unique",this.keys(a)},s.prototype.firstKey=function(a){return this.limit(1).keys(function(l){return l[0]}).then(a)},s.prototype.lastKey=function(a){return this.reverse().firstKey(a)},s.prototype.distinct=function(){var a=this._ctx,l=a.index&&a.table.schema.idxByName[a.index];if(!l||!l.multi)return this;var c={};return Ua(this._ctx,function(h){var m=h.primaryKey.toString(),g=w(c,m);return c[m]=!0,!g}),this},s.prototype.modify=function(a){var l=this,c=this._ctx;return this._write(function(h){var m;if(typeof a=="function")m=a;else{var g=o(a),D=g.length;m=function(N){for(var L=!1,G=0;G<D;++G){var P=g[G],Y=a[P],Q=W(N,P);Y instanceof Wr?(re(N,P,Y.execute(Q)),L=!0):Q!==Y&&(re(N,P,Y),L=!0)}return L}}var b=c.table.core,F=b.schema.primaryKey,x=F.outbound,S=F.extractKey,I=200,K=l.db._options.modifyChunkSize;K&&(typeof K=="object"?I=K[b.name]||K["*"]||200:I=K);var k=[],O=0,A=[],H=function(N,L){var G=L.failures,P=L.numFailures;O+=N-P;for(var Y=0,Q=o(G);Y<Q.length;Y++){var Z=Q[Y];k.push(G[Z])}};return l.clone().primaryKeys().then(function(N){var L=dr(c)&&c.limit===1/0&&(typeof a!="function"||a===Wa)&&{index:c.index,range:c.range},G=function(P){var Y=Math.min(I,N.length-P);return b.getMany({trans:h,keys:N.slice(P,P+Y),cache:"immutable"}).then(function(Q){for(var Z=[],ae=[],de=x?[]:null,ee=[],he=0;he<Y;++he){var le=Q[he],De={value:Dt(le),primKey:N[P+he]};m.call(De,De.value,De)!==!1&&(De.value==null?ee.push(N[P+he]):!x&&ge(S(le),S(De.value))!==0?(ee.push(N[P+he]),Z.push(De.value)):(ae.push(De.value),x&&de.push(N[P+he])))}return Promise.resolve(Z.length>0&&b.mutate({trans:h,type:"add",values:Z}).then(function(se){for(var Me in se.failures)ee.splice(parseInt(Me),1);H(Z.length,se)})).then(function(){return(ae.length>0||L&&typeof a=="object")&&b.mutate({trans:h,type:"put",keys:de,values:ae,criteria:L,changeSpec:typeof a!="function"&&a,isAdditionalChunk:P>0}).then(function(se){return H(ae.length,se)})}).then(function(){return(ee.length>0||L&&a===Wa)&&b.mutate({trans:h,type:"delete",keys:ee,criteria:L,isAdditionalChunk:P>0}).then(function(se){return H(ee.length,se)})}).then(function(){return N.length>P+Y&&G(P+I)})})};return G(0).then(function(){if(k.length>0)throw new Gt("Error modifying one or more objects",k,O,A);return N.length})})})},s.prototype.delete=function(){var a=this._ctx,l=a.range;return dr(a)&&(a.isPrimKey||l.type===3)?this._write(function(c){var h=a.table.core.schema.primaryKey,m=l;return a.table.core.count({trans:c,query:{index:h,range:m}}).then(function(g){return a.table.core.mutate({trans:c,type:"deleteRange",range:m}).then(function(D){var b=D.failures;D.lastResult,D.results;var F=D.numFailures;if(F)throw new Gt("Could not delete some values",Object.keys(b).map(function(x){return b[x]}),g-F);return g-F})})}):this.modify(Wa)},s}(),Wa=function(s,a){return a.value=null};function Xd(s){return jr($d.prototype,function(l,c){this.db=s;var h=al,m=null;if(c)try{h=c()}catch(F){m=F}var g=l._ctx,D=g.table,b=D.hook.reading.fire;this._ctx={table:D,index:g.index,isPrimKey:!g.index||D.schema.primKey.keyPath&&g.index===D.schema.primKey.name,range:h,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:m,or:g.or,valueMapper:b!==At?b:null}})}function ep(s,a){return s<a?-1:s===a?0:1}function tp(s,a){return s>a?-1:s===a?0:1}function dt(s,a,l){var c=s instanceof pl?new s.Collection(s):s;return c._ctx.error=l?new l(a):new TypeError(a),c}function pr(s){return new s.Collection(s,function(){return dl("")}).limit(0)}function np(s){return s==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function rp(s){return s==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function ip(s,a,l,c,h,m){for(var g=Math.min(s.length,c.length),D=-1,b=0;b<g;++b){var F=a[b];if(F!==c[b])return h(s[b],l[b])<0?s.substr(0,b)+l[b]+l.substr(b+1):h(s[b],c[b])<0?s.substr(0,b)+c[b]+l.substr(b+1):D>=0?s.substr(0,D)+a[D]+l.substr(D+1):null;h(s[b],F)<0&&(D=b)}return g<c.length&&m==="next"?s+l.substr(s.length):g<s.length&&m==="prev"?s.substr(0,l.length):D<0?null:s.substr(0,D)+c[D]+l.substr(D+1)}function Wi(s,a,l,c){var h,m,g,D,b,F,x,S=l.length;if(!l.every(function(O){return typeof O=="string"}))return dt(s,sl);function I(O){h=np(O),m=rp(O),g=O==="next"?ep:tp;var A=l.map(function(H){return{lower:m(H),upper:h(H)}}).sort(function(H,N){return g(H.lower,N.lower)});D=A.map(function(H){return H.upper}),b=A.map(function(H){return H.lower}),F=O,x=O==="next"?"":c}I("next");var K=new s.Collection(s,function(){return wn(D[0],b[S-1]+c)});K._ondirectionchange=function(O){I(O)};var k=0;return K._addAlgorithm(function(O,A,H){var N=O.key;if(typeof N!="string")return!1;var L=m(N);if(a(L,b,k))return!0;for(var G=null,P=k;P<S;++P){var Y=ip(N,L,D[P],b[P],g,F);Y===null&&G===null?k=P+1:(G===null||g(G,Y)>0)&&(G=Y)}return A(G!==null?function(){O.continue(G+x)}:H),!1}),K}function wn(s,a,l,c){return{type:2,lower:s,upper:a,lowerOpen:l,upperOpen:c}}function dl(s){return{type:1,lower:s,upper:s}}var pl=function(){function s(){}return Object.defineProperty(s.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),s.prototype.between=function(a,l,c,h){c=c!==!1,h=h===!0;try{return this._cmp(a,l)>0||this._cmp(a,l)===0&&(c||h)&&!(c&&h)?pr(this):new this.Collection(this,function(){return wn(a,l,!c,!h)})}catch(m){return dt(this,an)}},s.prototype.equals=function(a){return a==null?dt(this,an):new this.Collection(this,function(){return dl(a)})},s.prototype.above=function(a){return a==null?dt(this,an):new this.Collection(this,function(){return wn(a,void 0,!0)})},s.prototype.aboveOrEqual=function(a){return a==null?dt(this,an):new this.Collection(this,function(){return wn(a,void 0,!1)})},s.prototype.below=function(a){return a==null?dt(this,an):new this.Collection(this,function(){return wn(void 0,a,!1,!0)})},s.prototype.belowOrEqual=function(a){return a==null?dt(this,an):new this.Collection(this,function(){return wn(void 0,a)})},s.prototype.startsWith=function(a){return typeof a!="string"?dt(this,sl):this.between(a,a+Bn,!0,!0)},s.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):Wi(this,function(l,c){return l.indexOf(c[0])===0},[a],Bn)},s.prototype.equalsIgnoreCase=function(a){return Wi(this,function(l,c){return l===c[0]},[a],"")},s.prototype.anyOfIgnoreCase=function(){var a=Ot.apply(en,arguments);return a.length===0?pr(this):Wi(this,function(l,c){return c.indexOf(l)!==-1},a,"")},s.prototype.startsWithAnyOfIgnoreCase=function(){var a=Ot.apply(en,arguments);return a.length===0?pr(this):Wi(this,function(l,c){return c.some(function(h){return l.indexOf(h)===0})},a,Bn)},s.prototype.anyOf=function(){var a=this,l=Ot.apply(en,arguments),c=this._cmp;try{l.sort(c)}catch(g){return dt(this,an)}if(l.length===0)return pr(this);var h=new this.Collection(this,function(){return wn(l[0],l[l.length-1])});h._ondirectionchange=function(g){c=g==="next"?a._ascending:a._descending,l.sort(c)};var m=0;return h._addAlgorithm(function(g,D,b){for(var F=g.key;c(F,l[m])>0;)if(++m,m===l.length)return D(b),!1;return c(F,l[m])===0?!0:(D(function(){g.continue(l[m])}),!1)}),h},s.prototype.notEqual=function(a){return this.inAnyRange([[Va,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},s.prototype.noneOf=function(){var a=Ot.apply(en,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(c){return dt(this,an)}var l=a.reduce(function(c,h){return c?c.concat([[c[c.length-1][1],h]]):[[Va,h]]},null);return l.push([a[a.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},s.prototype.inAnyRange=function(a,l){var c=this,h=this._cmp,m=this._ascending,g=this._descending,D=this._min,b=this._max;if(a.length===0)return pr(this);if(!a.every(function(P){return P[0]!==void 0&&P[1]!==void 0&&m(P[0],P[1])<=0}))return dt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);var F=!l||l.includeLowers!==!1,x=l&&l.includeUppers===!0;function S(P,Y){for(var Q=0,Z=P.length;Q<Z;++Q){var ae=P[Q];if(h(Y[0],ae[1])<0&&h(Y[1],ae[0])>0){ae[0]=D(ae[0],Y[0]),ae[1]=b(ae[1],Y[1]);break}}return Q===Z&&P.push(Y),P}var I=m;function K(P,Y){return I(P[0],Y[0])}var k;try{k=a.reduce(S,[]),k.sort(K)}catch(P){return dt(this,an)}var O=0,A=x?function(P){return m(P,k[O][1])>0}:function(P){return m(P,k[O][1])>=0},H=F?function(P){return g(P,k[O][0])>0}:function(P){return g(P,k[O][0])>=0};function N(P){return!A(P)&&!H(P)}var L=A,G=new this.Collection(this,function(){return wn(k[0][0],k[k.length-1][1],!F,!x)});return G._ondirectionchange=function(P){P==="next"?(L=A,I=m):(L=H,I=g),k.sort(K)},G._addAlgorithm(function(P,Y,Q){for(var Z=P.key;L(Z);)if(++O,O===k.length)return Y(Q),!1;return N(Z)?!0:(c._cmp(Z,k[O][1])===0||c._cmp(Z,k[O][0])===0||Y(function(){I===m?P.continue(k[O][0]):P.continue(k[O][1])}),!1)}),G},s.prototype.startsWithAnyOf=function(){var a=Ot.apply(en,arguments);return a.every(function(l){return typeof l=="string"})?a.length===0?pr(this):this.inAnyRange(a.map(function(l){return[l,l+Bn]})):dt(this,"startsWithAnyOf() only works with strings")},s}();function sp(s){return jr(pl.prototype,function(l,c,h){if(this.db=s,this._ctx={table:l,index:c===":id"?null:c,or:h},this._cmp=this._ascending=ge,this._descending=function(m,g){return ge(g,m)},this._max=function(m,g){return ge(m,g)>0?m:g},this._min=function(m,g){return ge(m,g)<0?m:g},this._IDBKeyRange=s._deps.IDBKeyRange,!this._IDBKeyRange)throw new ie.MissingAPI})}function Ut(s){return xe(function(a){return zr(a),s(a.target.error),!1})}function zr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var Yr="storagemutated",za="x-storagemutated-1",En=Ur(null,Yr),ap=function(){function s(){}return s.prototype._lock=function(){return R(!$.global),++this._reculock,this._reculock===1&&!$.global&&($.lockOwnerFor=this),this},s.prototype._unlock=function(){if(R(!$.global),--this._reculock===0)for($.global||($.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var a=this._blockedFuncs.shift();try{Ln(a[1],a[0])}catch(l){}}return this},s.prototype._locked=function(){return this._reculock&&$.lockOwnerFor!==this},s.prototype.create=function(a){var l=this;if(!this.mode)return this;var c=this.db.idbdb,h=this.db._state.dbOpenError;if(R(!this.idbtrans),!a&&!c)switch(h&&h.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(h);case"MissingAPIError":throw new ie.MissingAPI(h.message,h);default:throw new ie.OpenFailed(h)}if(!this.active)throw new ie.TransactionInactive;return R(this._completion._state===null),a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),a.onerror=xe(function(m){zr(m),l._reject(a.error)}),a.onabort=xe(function(m){zr(m),l.active&&l._reject(new ie.Abort(a.error)),l.active=!1,l.on("abort").fire(m)}),a.oncomplete=xe(function(){l.active=!1,l._resolve(),"mutatedParts"in a&&En.storagemutated.fire(a.mutatedParts)}),this},s.prototype._promise=function(a,l,c){var h=this;if(a==="readwrite"&&this.mode!=="readwrite")return Ne(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return Ne(new ie.TransactionInactive);if(this._locked())return new U(function(g,D){h._blockedFuncs.push([function(){h._promise(a,l,c).then(g,D)},$])});if(c)return vn(function(){var g=new U(function(D,b){h._lock();var F=l(D,b,h);F&&F.then&&F.then(D,b)});return g.finally(function(){return h._unlock()}),g._lib=!0,g});var m=new U(function(g,D){var b=l(g,D,h);b&&b.then&&b.then(g,D)});return m._lib=!0,m},s.prototype._root=function(){return this.parent?this.parent._root():this},s.prototype.waitFor=function(a){var l=this._root(),c=U.resolve(a);if(l._waitingFor)l._waitingFor=l._waitingFor.then(function(){return c});else{l._waitingFor=c,l._waitingQueue=[];var h=l.idbtrans.objectStore(l.storeNames[0]);(function g(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(h.get(-1/0).onsuccess=g)})()}var m=l._waitingFor;return new U(function(g,D){c.then(function(b){return l._waitingQueue.push(xe(g.bind(null,b)))},function(b){return l._waitingQueue.push(xe(D.bind(null,b)))}).finally(function(){l._waitingFor===m&&(l._waitingFor=null)})})},s.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))},s.prototype.table=function(a){var l=this._memoizedTables||(this._memoizedTables={});if(w(l,a))return l[a];var c=this.schema[a];if(!c)throw new ie.NotFound("Table "+a+" not part of transaction");var h=new this.db.Table(a,c,this);return h.core=this.db.core.table(a),l[a]=h,h},s}();function op(s){return jr(ap.prototype,function(l,c,h,m,g){var D=this;this.db=s,this.mode=l,this.storeNames=c,this.schema=h,this.chromeTransactionDurability=m,this.idbtrans=null,this.on=Ur(this,"complete","error","abort"),this.parent=g||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new U(function(b,F){D._resolve=b,D._reject=F}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(b){var F=D.active;return D.active=!1,D.on.error.fire(b),D.parent?D.parent._reject(b):F&&D.idbtrans&&D.idbtrans.abort(),Ne(b)})})}function Ya(s,a,l,c,h,m,g){return{name:s,keyPath:a,unique:l,multi:c,auto:h,compound:m,src:(l&&!g?"&":"")+(c?"*":"")+(h?"++":"")+ml(a)}}function ml(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function Za(s,a,l){return{name:s,primKey:a,indexes:l,mappedClass:null,idxByName:be(l,function(c){return[c.name,c]})}}function up(s){return s.length===1?s[0]:s}var Zr=function(s){try{return s.only([[]]),Zr=function(){return[[]]},[[]]}catch(a){return Zr=function(){return Bn},Bn}};function Ja(s){return s==null?function(){}:typeof s=="string"?lp(s):function(a){return W(a,s)}}function lp(s){var a=s.split(".");return a.length===1?function(l){return l[s]}:function(l){return W(l,s)}}function gl(s){return[].slice.call(s)}var cp=0;function Jr(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function fp(s,a,l){function c(S,I){var K=gl(S.objectStoreNames);return{schema:{name:S.name,tables:K.map(function(k){return I.objectStore(k)}).map(function(k){var O=k.keyPath,A=k.autoIncrement,H=u(O),N=O==null,L={},G={name:k.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:N,compound:H,keyPath:O,autoIncrement:A,unique:!0,extractKey:Ja(O)},indexes:gl(k.indexNames).map(function(P){return k.index(P)}).map(function(P){var Y=P.name,Q=P.unique,Z=P.multiEntry,ae=P.keyPath,de=u(ae),ee={name:Y,compound:de,keyPath:ae,unique:Q,multiEntry:Z,extractKey:Ja(ae)};return L[Jr(ae)]=ee,ee}),getIndexByKeyPath:function(P){return L[Jr(P)]}};return L[":id"]=G.primaryKey,O!=null&&(L[Jr(O)]=G.primaryKey),G})},hasGetAll:K.length>0&&"getAll"in I.objectStore(K[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function h(S){if(S.type===3)return null;if(S.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var I=S.lower,K=S.upper,k=S.lowerOpen,O=S.upperOpen,A=I===void 0?K===void 0?null:a.upperBound(K,!!O):K===void 0?a.lowerBound(I,!!k):a.bound(I,K,!!k,!!O);return A}function m(S){var I=S.name;function K(A){var H=A.trans,N=A.type,L=A.keys,G=A.values,P=A.range;return new Promise(function(Y,Q){Y=xe(Y);var Z=H.objectStore(I),ae=Z.keyPath==null,de=N==="put"||N==="add";if(!de&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var ee=(L||G||{length:1}).length;if(L&&G&&L.length!==G.length)throw new Error("Given keys array must have same length as given values array.");if(ee===0)return Y({numFailures:0,failures:{},results:[],lastResult:void 0});var he,le=[],De=[],se=0,Me=function(Wt){++se,zr(Wt)};if(N==="deleteRange"){if(P.type===4)return Y({numFailures:se,failures:De,results:[],lastResult:void 0});P.type===3?le.push(he=Z.clear()):le.push(he=Z.delete(h(P)))}else{var et=de?ae?[G,L]:[G,null]:[L,null],jt=et[0],ut=et[1];if(de)for(var wt=0;wt<ee;++wt)le.push(he=ut&&ut[wt]!==void 0?Z[N](jt[wt],ut[wt]):Z[N](jt[wt])),he.onerror=Me;else for(var wt=0;wt<ee;++wt)le.push(he=Z[N](jt[wt])),he.onerror=Me}var _n=function(Wt){var Xr=Wt.target.result;le.forEach(function(It,is){return It.error!=null&&(De[is]=It.error)}),Y({numFailures:se,failures:De,results:N==="delete"?L:le.map(function(It){return It.result}),lastResult:Xr})};he.onerror=function(Wt){Me(Wt),_n(Wt)},he.onsuccess=_n})}function k(A){var H=A.trans,N=A.values,L=A.query,G=A.reverse,P=A.unique;return new Promise(function(Y,Q){Y=xe(Y);var Z=L.index,ae=L.range,de=H.objectStore(I),ee=Z.isPrimaryKey?de:de.index(Z.name),he=G?P?"prevunique":"prev":P?"nextunique":"next",le=N||!("openKeyCursor"in ee)?ee.openCursor(h(ae),he):ee.openKeyCursor(h(ae),he);le.onerror=Ut(Q),le.onsuccess=xe(function(De){var se=le.result;if(!se){Y(null);return}se.___id=++cp,se.done=!1;var Me=se.continue.bind(se),et=se.continuePrimaryKey;et&&(et=et.bind(se));var jt=se.advance.bind(se),ut=function(){throw new Error("Cursor not started")},wt=function(){throw new Error("Cursor not stopped")};se.trans=H,se.stop=se.continue=se.continuePrimaryKey=se.advance=ut,se.fail=xe(Q),se.next=function(){var _n=this,Wt=1;return this.start(function(){return Wt--?_n.continue():_n.stop()}).then(function(){return _n})},se.start=function(_n){var Wt=new Promise(function(It,is){It=xe(It),le.onerror=Ut(is),se.fail=is,se.stop=function($p){se.stop=se.continue=se.continuePrimaryKey=se.advance=wt,It($p)}}),Xr=function(){if(le.result)try{_n()}catch(It){se.fail(It)}else se.done=!0,se.start=function(){throw new Error("Cursor behind last entry")},se.stop()};return le.onsuccess=xe(function(It){le.onsuccess=Xr,Xr()}),se.continue=Me,se.continuePrimaryKey=et,se.advance=jt,Xr(),Wt},Y(se)},Q)})}function O(A){return function(H){return new Promise(function(N,L){N=xe(N);var G=H.trans,P=H.values,Y=H.limit,Q=H.query,Z=Y===1/0?void 0:Y,ae=Q.index,de=Q.range,ee=G.objectStore(I),he=ae.isPrimaryKey?ee:ee.index(ae.name),le=h(de);if(Y===0)return N({result:[]});if(A){var De=P?he.getAll(le,Z):he.getAllKeys(le,Z);De.onsuccess=function(jt){return N({result:jt.target.result})},De.onerror=Ut(L)}else{var se=0,Me=P||!("openKeyCursor"in he)?he.openCursor(le):he.openKeyCursor(le),et=[];Me.onsuccess=function(jt){var ut=Me.result;if(!ut)return N({result:et});if(et.push(P?ut.value:ut.primaryKey),++se===Y)return N({result:et});ut.continue()},Me.onerror=Ut(L)}})}}return{name:I,schema:S,mutate:K,getMany:function(A){var H=A.trans,N=A.keys;return new Promise(function(L,G){L=xe(L);for(var P=H.objectStore(I),Y=N.length,Q=new Array(Y),Z=0,ae=0,de,ee=function(se){var Me=se.target;(Q[Me._pos]=Me.result)!=null,++ae===Z&&L(Q)},he=Ut(G),le=0;le<Y;++le){var De=N[le];De!=null&&(de=P.get(N[le]),de._pos=le,de.onsuccess=ee,de.onerror=he,++Z)}Z===0&&L(Q)})},get:function(A){var H=A.trans,N=A.key;return new Promise(function(L,G){L=xe(L);var P=H.objectStore(I),Y=P.get(N);Y.onsuccess=function(Q){return L(Q.target.result)},Y.onerror=Ut(G)})},query:O(b),openCursor:k,count:function(A){var H=A.query,N=A.trans,L=H.index,G=H.range;return new Promise(function(P,Y){var Q=N.objectStore(I),Z=L.isPrimaryKey?Q:Q.index(L.name),ae=h(G),de=ae?Z.count(ae):Z.count();de.onsuccess=xe(function(ee){return P(ee.target.result)}),de.onerror=Ut(Y)})}}}var g=c(s,l),D=g.schema,b=g.hasGetAll,F=D.tables.map(function(S){return m(S)}),x={};return F.forEach(function(S){return x[S.name]=S}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(S){var I=x[S];if(!I)throw new Error("Table '".concat(S,"' not found"));return x[S]},MIN_KEY:-1/0,MAX_KEY:Zr(a),schema:D}}function hp(s,a){return a.reduce(function(l,c){var h=c.create;return n(n({},l),h(l))},s)}function dp(s,a,l,c){var h=l.IDBKeyRange;l.indexedDB;var m=hp(fp(a,h,c),s.dbcore);return{dbcore:m}}function zi(s,a){var l=a.db,c=dp(s._middlewares,l,s._deps,a);s.core=c.dbcore,s.tables.forEach(function(h){var m=h.name;s.core.schema.tables.some(function(g){return g.name===m})&&(h.core=s.core.table(m),s[m]instanceof s.Table&&(s[m].core=h.core))})}function Yi(s,a,l,c){l.forEach(function(h){var m=c[h];a.forEach(function(g){var D=pe(g,h);(!D||"value"in D&&D.value===void 0)&&(g===s.Transaction.prototype||g instanceof s.Transaction?M(g,h,{get:function(){return this.table(h)},set:function(b){_(this,h,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):g[h]=new s.Table(h,m))})})}function Qa(s,a){a.forEach(function(l){for(var c in l)l[c]instanceof s.Table&&delete l[c]})}function pp(s,a){return s._cfg.version-a._cfg.version}function mp(s,a,l,c){var h=s._dbSchema;l.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Za("$meta",vl("")[0],[]),s._storeNames.push("$meta"));var m=s._createTransaction("readwrite",s._storeNames,h);m.create(l),m._completion.catch(c);var g=m._reject.bind(m),D=$.transless||$;vn(function(){if($.trans=m,$.transless=D,a===0)o(h).forEach(function(b){Xa(l,b,h[b].primKey,h[b].indexes)}),zi(s,l),U.follow(function(){return s.on.populate.fire(m)}).catch(g);else return zi(s,l),yp(s,m,a).then(function(b){return vp(s,b,m,l)}).catch(g)})}function gp(s,a){yl(s._dbSchema,a),a.db.version%10===0&&!a.objectStoreNames.contains("$meta")&&a.db.createObjectStore("$meta").add(Math.ceil(a.db.version/10-1),"version");var l=Ji(s,s.idbdb,a);Qi(s,s._dbSchema,a);for(var c=$a(l,s._dbSchema),h=function(F){if(F.change.length||F.recreate)return console.warn("Unable to patch indexes of table ".concat(F.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=a.objectStore(F.name);F.add.forEach(function(S){bt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(F.name,".").concat(S.src)),Zi(x,S)})},m=0,g=c.change;m<g.length;m++){var D=g[m],b=h(D);if(typeof b=="object")return b.value}}function yp(s,a,l){return a.storeNames.includes("$meta")?a.table("$meta").get("version").then(function(c){return c!=null?c:l}):U.resolve(l)}function vp(s,a,l,c){var h=[],m=s._versions,g=s._dbSchema=Ji(s,s.idbdb,c),D=m.filter(function(F){return F._cfg.version>=a});if(D.length===0)return U.resolve();D.forEach(function(F){h.push(function(){var x=g,S=F._cfg.dbschema;Qi(s,x,c),Qi(s,S,c),g=s._dbSchema=S;var I=$a(x,S);I.add.forEach(function(N){Xa(c,N[0],N[1].primKey,N[1].indexes)}),I.change.forEach(function(N){if(N.recreate)throw new ie.Upgrade("Not yet support for changing primary key");var L=c.objectStore(N.name);N.add.forEach(function(G){return Zi(L,G)}),N.change.forEach(function(G){L.deleteIndex(G.name),Zi(L,G)}),N.del.forEach(function(G){return L.deleteIndex(G)})});var K=F._cfg.contentUpgrade;if(K&&F._cfg.version>a){zi(s,c),l._memoizedTables={};var k=je(S);I.del.forEach(function(N){k[N]=x[N]}),Qa(s,[s.Transaction.prototype]),Yi(s,[s.Transaction.prototype],o(k),k),l.schema=k;var O=nr(K);O&&fr();var A,H=U.follow(function(){if(A=K(l),A&&O){var N=Dn.bind(null,null);A.then(N,N)}});return A&&typeof A.then=="function"?U.resolve(A):H.then(function(){return A})}}),h.push(function(x){var S=F._cfg.dbschema;Dp(S,x),Qa(s,[s.Transaction.prototype]),Yi(s,[s.Transaction.prototype],s._storeNames,s._dbSchema),l.schema=s._dbSchema}),h.push(function(x){s.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(s.idbdb.version/10)===F._cfg.version?(s.idbdb.deleteObjectStore("$meta"),delete s._dbSchema.$meta,s._storeNames=s._storeNames.filter(function(S){return S!=="$meta"})):x.objectStore("$meta").put(F._cfg.version,"version"))})});function b(){return h.length?U.resolve(h.shift()(l.idbtrans)).then(b):U.resolve()}return b().then(function(){yl(g,c)})}function $a(s,a){var l={del:[],add:[],change:[]},c;for(c in s)a[c]||l.del.push(c);for(c in a){var h=s[c],m=a[c];if(!h)l.add.push([c,m]);else{var g={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)g.recreate=!0,l.change.push(g);else{var D=h.idxByName,b=m.idxByName,F=void 0;for(F in D)b[F]||g.del.push(F);for(F in b){var x=D[F],S=b[F];x?x.src!==S.src&&g.change.push(S):g.add.push(S)}(g.del.length>0||g.add.length>0||g.change.length>0)&&l.change.push(g)}}}return l}function Xa(s,a,l,c){var h=s.db.createObjectStore(a,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(m){return Zi(h,m)}),h}function yl(s,a){o(s).forEach(function(l){a.db.objectStoreNames.contains(l)||(bt&&console.debug("Dexie: Creating missing table",l),Xa(a,l,s[l].primKey,s[l].indexes))})}function Dp(s,a){[].slice.call(a.db.objectStoreNames).forEach(function(l){return s[l]==null&&a.db.deleteObjectStore(l)})}function Zi(s,a){s.createIndex(a.name,a.keyPath,{unique:a.unique,multiEntry:a.multi})}function Ji(s,a,l){var c={},h=Ce(a.objectStoreNames,0);return h.forEach(function(m){for(var g=l.objectStore(m),D=g.keyPath,b=Ya(ml(D),D||"",!0,!1,!!g.autoIncrement,D&&typeof D!="string",!0),F=[],x=0;x<g.indexNames.length;++x){var S=g.index(g.indexNames[x]);D=S.keyPath;var I=Ya(S.name,D,!!S.unique,!!S.multiEntry,!1,D&&typeof D!="string",!1);F.push(I)}c[m]=Za(m,b,F)}),c}function bp(s,a,l){s.verno=a.version/10;var c=s._dbSchema=Ji(s,a,l);s._storeNames=Ce(a.objectStoreNames,0),Yi(s,[s._allTables],o(c),c)}function wp(s,a){var l=Ji(s,s.idbdb,a),c=$a(l,s._dbSchema);return!(c.add.length||c.change.some(function(h){return h.add.length||h.change.length}))}function Qi(s,a,l){for(var c=l.db.objectStoreNames,h=0;h<c.length;++h){var m=c[h],g=l.objectStore(m);s._hasGetAll="getAll"in g;for(var D=0;D<g.indexNames.length;++D){var b=g.indexNames[D],F=g.index(b).keyPath,x=typeof F=="string"?F:"["+Ce(F).join("+")+"]";if(a[m]){var S=a[m].idxByName[x];S&&(S.name=b,delete a[m].idxByName[x],a[m].idxByName[b]=S)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function vl(s){return s.split(",").map(function(a,l){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),h=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Ya(c,h||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),u(h),l===0)})}var Ep=function(){function s(){}return s.prototype._parseStoresSpec=function(a,l){o(a).forEach(function(c){if(a[c]!==null){var h=vl(a[c]),m=h.shift();if(m.unique=!0,m.multi)throw new ie.Schema("Primary key cannot be multi-valued");h.forEach(function(g){if(g.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!g.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),l[c]=Za(c,m,h)}})},s.prototype.stores=function(a){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,a):a;var c=l._versions,h={},m={};return c.forEach(function(g){f(h,g._cfg.storesSource),m=g._cfg.dbschema={},g._parseStoresSpec(h,m)}),l._dbSchema=m,Qa(l,[l._allTables,l,l.Transaction.prototype]),Yi(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],o(m),m),l._storeNames=o(m),this},s.prototype.upgrade=function(a){return this._cfg.contentUpgrade=Vr(this._cfg.contentUpgrade||we,a),this},s}();function Fp(s){return jr(Ep.prototype,function(l){this.db=s,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function eo(s,a){var l=s._dbNamesDB;return l||(l=s._dbNamesDB=new on(Ki,{addons:[],indexedDB:s,IDBKeyRange:a}),l.version(1).stores({dbnames:"name"})),l.table("dbnames")}function to(s){return s&&typeof s.databases=="function"}function Cp(s){var a=s.indexedDB,l=s.IDBKeyRange;return to(a)?Promise.resolve(a.databases()).then(function(c){return c.map(function(h){return h.name}).filter(function(h){return h!==Ki})}):eo(a,l).toCollection().primaryKeys()}function _p(s,a){var l=s.indexedDB,c=s.IDBKeyRange;!to(l)&&a!==Ki&&eo(l,c).put({name:a}).catch(we)}function Sp(s,a){var l=s.indexedDB,c=s.IDBKeyRange;!to(l)&&a!==Ki&&eo(l,c).delete(a).catch(we)}function no(s){return vn(function(){return $.letThrough=!0,s()})}function kp(){var s=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!s||!indexedDB.databases)return Promise.resolve();var a;return new Promise(function(l){var c=function(){return indexedDB.databases().finally(l)};a=setInterval(c,100),c()}).finally(function(){return clearInterval(a)})}var ro;function io(s){return!("from"in s)}var Xe=function(s,a){if(this)f(this,arguments.length?{d:1,from:s,to:arguments.length>1?a:s}:{d:0});else{var l=new Xe;return s&&"d"in s&&f(l,s),l}};y(Xe.prototype,(ro={add:function(s){return $r(this,s),this},addKey:function(s){return Qr(this,s,s),this},addKeys:function(s){var a=this;return s.forEach(function(l){return Qr(a,l,l)}),this},hasKey:function(s){var a=$i(this).next(s).value;return a&&ge(a.from,s)<=0&&ge(a.to,s)>=0}},ro[Xt]=function(){return $i(this)},ro));function Qr(s,a,l){var c=ge(a,l);if(!isNaN(c)){if(c>0)throw RangeError();if(io(s))return f(s,{from:a,to:l,d:1});var h=s.l,m=s.r;if(ge(l,s.from)<0)return h?Qr(h,a,l):s.l={from:a,to:l,d:1,l:null,r:null},bl(s);if(ge(a,s.to)>0)return m?Qr(m,a,l):s.r={from:a,to:l,d:1,l:null,r:null},bl(s);ge(a,s.from)<0&&(s.from=a,s.l=null,s.d=m?m.d+1:1),ge(l,s.to)>0&&(s.to=l,s.r=null,s.d=s.l?s.l.d+1:1);var g=!s.r;h&&!s.l&&$r(s,h),m&&g&&$r(s,m)}}function $r(s,a){function l(c,h){var m=h.from,g=h.to,D=h.l,b=h.r;Qr(c,m,g),D&&l(c,D),b&&l(c,b)}io(a)||l(s,a)}function Dl(s,a){var l=$i(a),c=l.next();if(c.done)return!1;for(var h=c.value,m=$i(s),g=m.next(h.from),D=g.value;!c.done&&!g.done;){if(ge(D.from,h.to)<=0&&ge(D.to,h.from)>=0)return!0;ge(h.from,D.from)<0?h=(c=l.next(D.from)).value:D=(g=m.next(h.from)).value}return!1}function $i(s){var a=io(s)?null:{s:0,n:s};return{next:function(l){for(var c=arguments.length>0;a;)switch(a.s){case 0:if(a.s=1,c)for(;a.n.l&&ge(l,a.n.from)<0;)a={up:a,n:a.n.l,s:1};else for(;a.n.l;)a={up:a,n:a.n.l,s:1};case 1:if(a.s=2,!c||ge(l,a.n.to)<=0)return{value:a.n,done:!1};case 2:if(a.n.r){a.s=3,a={up:a,n:a.n.r,s:0};continue}case 3:a=a.up}return{done:!0}}}}function bl(s){var a,l,c=(((a=s.r)===null||a===void 0?void 0:a.d)||0)-(((l=s.l)===null||l===void 0?void 0:l.d)||0),h=c>1?"r":c<-1?"l":"";if(h){var m=h==="r"?"l":"r",g=n({},s),D=s[h];s.from=D.from,s.to=D.to,s[h]=D[h],g[h]=D[m],s[m]=g,g.d=wl(g)}s.d=wl(s)}function wl(s){var a=s.r,l=s.l;return(a?l?Math.max(a.d,l.d):a.d:l?l.d:0)+1}function Xi(s,a){return o(a).forEach(function(l){s[l]?$r(s[l],a[l]):s[l]=ze(a[l])}),s}function so(s,a){return s.all||a.all||Object.keys(s).some(function(l){return a[l]&&Dl(a[l],s[l])})}var Hn={},ao={},oo=!1;function es(s,a){Xi(ao,s),oo||(oo=!0,setTimeout(function(){oo=!1;var l=ao;ao={},uo(l,!1)},0))}function uo(s,a){a===void 0&&(a=!1);var l=new Set;if(s.all)for(var c=0,h=Object.values(Hn);c<h.length;c++){var m=h[c];El(m,s,l,a)}else for(var g in s){var D=/^idb\:\/\/(.*)\/(.*)\//.exec(g);if(D){var b=D[1],F=D[2],m=Hn["idb://".concat(b,"/").concat(F)];m&&El(m,s,l,a)}}l.forEach(function(x){return x()})}function El(s,a,l,c){for(var h=[],m=0,g=Object.entries(s.queries.query);m<g.length;m++){for(var D=g[m],b=D[0],F=D[1],x=[],S=0,I=F;S<I.length;S++){var K=I[S];so(a,K.obsSet)?K.subscribers.forEach(function(H){return l.add(H)}):c&&x.push(K)}c&&h.push([b,x])}if(c)for(var k=0,O=h;k<O.length;k++){var A=O[k],b=A[0],x=A[1];s.queries.query[b]=x}}function xp(s){var a=s._state,l=s._deps.indexedDB;if(a.isBeingOpened||s.idbdb)return a.dbReadyPromise.then(function(){return a.dbOpenError?Ne(a.dbOpenError):s});a.isBeingOpened=!0,a.dbOpenError=null,a.openComplete=!1;var c=a.openCanceller,h=Math.round(s.verno*10),m=!1;function g(){if(a.openCanceller!==c)throw new ie.DatabaseClosed("db.open() was cancelled")}var D=a.dbReadyResolve,b=null,F=!1,x=function(){return new U(function(S,I){if(g(),!l)throw new ie.MissingAPI;var K=s.name,k=a.autoSchema||!h?l.open(K):l.open(K,h);if(!k)throw new ie.MissingAPI;k.onerror=Ut(I),k.onblocked=xe(s._fireOnBlocked),k.onupgradeneeded=xe(function(O){if(b=k.transaction,a.autoSchema&&!s._options.allowEmptyDB){k.onerror=zr,b.abort(),k.result.close();var A=l.deleteDatabase(K);A.onsuccess=A.onerror=xe(function(){I(new ie.NoSuchDatabase("Database ".concat(K," doesnt exist")))})}else{b.onerror=Ut(I);var H=O.oldVersion>Math.pow(2,62)?0:O.oldVersion;F=H<1,s.idbdb=k.result,m&&gp(s,b),mp(s,H/10,b,I)}},I),k.onsuccess=xe(function(){b=null;var O=s.idbdb=k.result,A=Ce(O.objectStoreNames);if(A.length>0)try{var H=O.transaction(up(A),"readonly");if(a.autoSchema)bp(s,O,H);else if(Qi(s,s._dbSchema,H),!wp(s,H)&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),O.close(),h=O.version+1,m=!0,S(x());zi(s,H)}catch(N){}hr.push(s),O.onversionchange=xe(function(N){a.vcFired=!0,s.on("versionchange").fire(N)}),O.onclose=xe(function(N){s.on("close").fire(N)}),F&&_p(s._deps,K),S()},I)}).catch(function(S){switch(S==null?void 0:S.name){case"UnknownError":if(a.PR1398_maxLoop>0)return a.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(h>0)return h=0,x();break}return U.reject(S)})};return U.race([c,(typeof navigator=="undefined"?U.resolve():kp()).then(x)]).then(function(){return g(),a.onReadyBeingFired=[],U.resolve(no(function(){return s.on.ready.fire(s.vip)})).then(function S(){if(a.onReadyBeingFired.length>0){var I=a.onReadyBeingFired.reduce(Vr,we);return a.onReadyBeingFired=[],U.resolve(no(function(){return I(s.vip)})).then(S)}})}).finally(function(){a.openCanceller===c&&(a.onReadyBeingFired=null,a.isBeingOpened=!1)}).catch(function(S){a.dbOpenError=S;try{b&&b.abort()}catch(I){}return c===a.openCanceller&&s._close(),Ne(S)}).finally(function(){a.openComplete=!0,D()}).then(function(){if(F){var S={};s.tables.forEach(function(I){I.schema.indexes.forEach(function(K){K.name&&(S["idb://".concat(s.name,"/").concat(I.name,"/").concat(K.name)]=new Xe(-1/0,[[[]]]))}),S["idb://".concat(s.name,"/").concat(I.name,"/")]=S["idb://".concat(s.name,"/").concat(I.name,"/:dels")]=new Xe(-1/0,[[[]]])}),En(Yr).fire(S),uo(S,!0)}return s})}function lo(s){var a=function(g){return s.next(g)},l=function(g){return s.throw(g)},c=m(a),h=m(l);function m(g){return function(D){var b=g(D),F=b.value;return b.done?F:!F||typeof F.then!="function"?u(F)?Promise.all(F).then(c,h):c(F):F.then(c,h)}}return m(a)()}function Op(s,a,l){var c=arguments.length;if(c<2)throw new ie.InvalidArgument("Too few arguments");for(var h=new Array(c-1);--c;)h[c-1]=arguments[c];l=h.pop();var m=Se(h);return[s,m,l]}function Fl(s,a,l,c,h){return U.resolve().then(function(){var m=$.transless||$,g=s._createTransaction(a,l,s._dbSchema,c);g.explicit=!0;var D={trans:g,transless:m};if(c)g.idbtrans=c.idbtrans;else try{g.create(),g.idbtrans._explicit=!0,s._state.PR1398_maxLoop=3}catch(S){return S.name===Mt.InvalidState&&s.isOpen()&&--s._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),s.close({disableAutoOpen:!1}),s.open().then(function(){return Fl(s,a,l,null,h)})):Ne(S)}var b=nr(h);b&&fr();var F,x=U.follow(function(){if(F=h.call(g,g),F)if(b){var S=Dn.bind(null,null);F.then(S,S)}else typeof F.next=="function"&&typeof F.throw=="function"&&(F=lo(F))},D);return(F&&typeof F.then=="function"?U.resolve(F).then(function(S){return g.active?S:Ne(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):x.then(function(){return F})).then(function(S){return c&&g._resolve(),g._completion.then(function(){return S})}).catch(function(S){return g._reject(S),Ne(S)})})}function ts(s,a,l){for(var c=u(s)?s.slice():[s],h=0;h<l;++h)c.push(a);return c}function Tp(s){return n(n({},s),{table:function(a){var l=s.table(a),c=l.schema,h={},m=[];function g(O,A,H){var N=Jr(O),L=h[N]=h[N]||[],G=O==null?0:typeof O=="string"?1:O.length,P=A>0,Y=n(n({},H),{name:P?"".concat(N,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:P,keyTail:A,keyLength:G,extractKey:Ja(O),unique:!P&&H.unique});if(L.push(Y),Y.isPrimaryKey||m.push(Y),G>1){var Q=G===2?O[0]:O.slice(0,G-1);g(Q,A+1,H)}return L.sort(function(Z,ae){return Z.keyTail-ae.keyTail}),Y}var D=g(c.primaryKey.keyPath,0,c.primaryKey);h[":id"]=[D];for(var b=0,F=c.indexes;b<F.length;b++){var x=F[b];g(x.keyPath,0,x)}function S(O){var A=h[Jr(O)];return A&&A[0]}function I(O,A){return{type:O.type===1?2:O.type,lower:ts(O.lower,O.lowerOpen?s.MAX_KEY:s.MIN_KEY,A),lowerOpen:!0,upper:ts(O.upper,O.upperOpen?s.MIN_KEY:s.MAX_KEY,A),upperOpen:!0}}function K(O){var A=O.query.index;return A.isVirtual?n(n({},O),{query:{index:A.lowLevelIndex,range:I(O.query.range,A.keyTail)}}):O}var k=n(n({},l),{schema:n(n({},c),{primaryKey:D,indexes:m,getIndexByKeyPath:S}),count:function(O){return l.count(K(O))},query:function(O){return l.query(K(O))},openCursor:function(O){var A=O.query.index,H=A.keyTail,N=A.isVirtual,L=A.keyLength;if(!N)return l.openCursor(O);function G(P){function Y(Z){Z!=null?P.continue(ts(Z,O.reverse?s.MAX_KEY:s.MIN_KEY,H)):O.unique?P.continue(P.key.slice(0,L).concat(O.reverse?s.MIN_KEY:s.MAX_KEY,H)):P.continue()}var Q=Object.create(P,{continue:{value:Y},continuePrimaryKey:{value:function(Z,ae){P.continuePrimaryKey(ts(Z,s.MAX_KEY,H),ae)}},primaryKey:{get:function(){return P.primaryKey}},key:{get:function(){var Z=P.key;return L===1?Z[0]:Z.slice(0,L)}},value:{get:function(){return P.value}}});return Q}return l.openCursor(K(O)).then(function(P){return P&&G(P)})}});return k}})}var Mp={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Tp};function co(s,a,l,c){return l=l||{},c=c||"",o(s).forEach(function(h){if(!w(a,h))l[c+h]=void 0;else{var m=s[h],g=a[h];if(typeof m=="object"&&typeof g=="object"&&m&&g){var D=gn(m),b=gn(g);D!==b?l[c+h]=a[h]:D==="Object"?co(m,g,l,c+h+"."):m!==g&&(l[c+h]=a[h])}else m!==g&&(l[c+h]=a[h])}}),o(a).forEach(function(h){w(s,h)||(l[c+h]=a[h])}),l}function fo(s,a){return a.type==="delete"?a.keys:a.keys||a.values.map(s.extractKey)}var Ap={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return n(n({},s),{table:function(a){var l=s.table(a),c=l.schema.primaryKey,h=n(n({},l),{mutate:function(m){var g=$.trans,D=g.table(a).hook,b=D.deleting,F=D.creating,x=D.updating;switch(m.type){case"add":if(F.fire===we)break;return g._promise("readwrite",function(){return S(m)},!0);case"put":if(F.fire===we&&x.fire===we)break;return g._promise("readwrite",function(){return S(m)},!0);case"delete":if(b.fire===we)break;return g._promise("readwrite",function(){return S(m)},!0);case"deleteRange":if(b.fire===we)break;return g._promise("readwrite",function(){return I(m)},!0)}return l.mutate(m);function S(k){var O=$.trans,A=k.keys||fo(c,k);if(!A)throw new Error("Keys missing");return k=k.type==="add"||k.type==="put"?n(n({},k),{keys:A}):n({},k),k.type!=="delete"&&(k.values=r([],k.values,!0)),k.keys&&(k.keys=r([],k.keys,!0)),Ip(l,k,A).then(function(H){var N=A.map(function(L,G){var P=H[G],Y={onerror:null,onsuccess:null};if(k.type==="delete")b.fire.call(Y,L,P,O);else if(k.type==="add"||P===void 0){var Q=F.fire.call(Y,L,k.values[G],O);L==null&&Q!=null&&(L=Q,k.keys[G]=L,c.outbound||re(k.values[G],c.keyPath,L))}else{var Z=co(P,k.values[G]),ae=x.fire.call(Y,Z,L,P,O);if(ae){var de=k.values[G];Object.keys(ae).forEach(function(ee){w(de,ee)?de[ee]=ae[ee]:re(de,ee,ae[ee])})}}return Y});return l.mutate(k).then(function(L){for(var G=L.failures,P=L.results,Y=L.numFailures,Q=L.lastResult,Z=0;Z<A.length;++Z){var ae=P?P[Z]:A[Z],de=N[Z];ae==null?de.onerror&&de.onerror(G[Z]):de.onsuccess&&de.onsuccess(k.type==="put"&&H[Z]?k.values[Z]:ae)}return{failures:G,results:P,numFailures:Y,lastResult:Q}}).catch(function(L){return N.forEach(function(G){return G.onerror&&G.onerror(L)}),Promise.reject(L)})})}function I(k){return K(k.trans,k.range,1e4)}function K(k,O,A){return l.query({trans:k,values:!1,query:{index:c,range:O},limit:A}).then(function(H){var N=H.result;return S({type:"delete",keys:N,trans:k}).then(function(L){return L.numFailures>0?Promise.reject(L.failures[0]):N.length<A?{failures:[],numFailures:0,lastResult:void 0}:K(k,n(n({},O),{lower:N[N.length-1],lowerOpen:!0}),A)})})}}});return h}})}};function Ip(s,a,l){return a.type==="add"?Promise.resolve([]):s.getMany({trans:a.trans,keys:l,cache:"immutable"})}function Cl(s,a,l){try{if(!a||a.keys.length<s.length)return null;for(var c=[],h=0,m=0;h<a.keys.length&&m<s.length;++h)ge(a.keys[h],s[m])===0&&(c.push(l?Dt(a.values[h]):a.values[h]),++m);return c.length===s.length?c:null}catch(g){return null}}var Pp={stack:"dbcore",level:-1,create:function(s){return{table:function(a){var l=s.table(a);return n(n({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var h=Cl(c.keys,c.trans._cache,c.cache==="clone");return h?U.resolve(h):l.getMany(c).then(function(m){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?Dt(m):m},m})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function _l(s,a){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!a.schema.primaryKey.outbound}function Sl(s,a){switch(s){case"query":return a.values&&!a.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Np={stack:"dbcore",level:0,name:"Observability",create:function(s){var a=s.schema.name,l=new Xe(s.MIN_KEY,s.MAX_KEY);return n(n({},s),{transaction:function(c,h,m){if($.subscr&&h!=="readonly")throw new ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat($.querier));return s.transaction(c,h,m)},table:function(c){var h=s.table(c),m=h.schema,g=m.primaryKey,D=m.indexes,b=g.extractKey,F=g.outbound,x=g.autoIncrement&&D.filter(function(k){return k.compound&&k.keyPath.includes(g.keyPath)}),S=n(n({},h),{mutate:function(k){var O,A,H=k.trans,N=k.mutatedParts||(k.mutatedParts={}),L=function(le){var De="idb://".concat(a,"/").concat(c,"/").concat(le);return N[De]||(N[De]=new Xe)},G=L(""),P=L(":dels"),Y=k.type,Q=k.type==="deleteRange"?[k.range]:k.type==="delete"?[k.keys]:k.values.length<50?[fo(g,k).filter(function(le){return le}),k.values]:[],Z=Q[0],ae=Q[1],de=k.trans._cache;if(u(Z)){G.addKeys(Z);var ee=Y==="delete"||Z.length===ae.length?Cl(Z,de):null;ee||P.addKeys(Z),(ee||ae)&&Lp(L,m,ee,ae)}else if(Z){var he={from:(O=Z.lower)!==null&&O!==void 0?O:s.MIN_KEY,to:(A=Z.upper)!==null&&A!==void 0?A:s.MAX_KEY};P.add(he),G.add(he)}else G.add(l),P.add(l),m.indexes.forEach(function(le){return L(le.name).add(l)});return h.mutate(k).then(function(le){return Z&&(k.type==="add"||k.type==="put")&&(G.addKeys(le.results),x&&x.forEach(function(De){for(var se=k.values.map(function(ut){return De.extractKey(ut)}),Me=De.keyPath.findIndex(function(ut){return ut===g.keyPath}),et=0,jt=le.results.length;et<jt;++et)se[et][Me]=le.results[et];L(De.name).addKeys(se)})),H.mutatedParts=Xi(H.mutatedParts||{},N),le})}}),I=function(k){var O,A,H=k.query,N=H.index,L=H.range;return[N,new Xe((O=L.lower)!==null&&O!==void 0?O:s.MIN_KEY,(A=L.upper)!==null&&A!==void 0?A:s.MAX_KEY)]},K={get:function(k){return[g,new Xe(k.key)]},getMany:function(k){return[g,new Xe().addKeys(k.keys)]},count:I,query:I,openCursor:I};return o(K).forEach(function(k){S[k]=function(O){var A=$.subscr,H=!!A,N=_l($,h)&&Sl(k,O),L=N?O.obsSet={}:A;if(H){var G=function(ee){var he="idb://".concat(a,"/").concat(c,"/").concat(ee);return L[he]||(L[he]=new Xe)},P=G(""),Y=G(":dels"),Q=K[k](O),Z=Q[0],ae=Q[1];if(k==="query"&&Z.isPrimaryKey&&!O.values?Y.add(ae):G(Z.name||"").add(ae),!Z.isPrimaryKey)if(k==="count")Y.add(l);else{var de=k==="query"&&F&&O.values&&h.query(n(n({},O),{values:!1}));return h[k].apply(this,arguments).then(function(ee){if(k==="query"){if(F&&O.values)return de.then(function(se){var Me=se.result;return P.addKeys(Me),ee});var he=O.values?ee.result.map(b):ee.result;O.values?P.addKeys(he):Y.addKeys(he)}else if(k==="openCursor"){var le=ee,De=O.values;return le&&Object.create(le,{key:{get:function(){return Y.addKey(le.primaryKey),le.key}},primaryKey:{get:function(){var se=le.primaryKey;return Y.addKey(se),se}},value:{get:function(){return De&&P.addKey(le.primaryKey),le.value}}})}return ee})}}return h[k].apply(this,arguments)}}),S}})}};function Lp(s,a,l,c){function h(m){var g=s(m.name||"");function D(F){return F!=null?m.extractKey(F):null}var b=function(F){return m.multiEntry&&u(F)?F.forEach(function(x){return g.addKey(x)}):g.addKey(F)};(l||c).forEach(function(F,x){var S=l&&D(l[x]),I=c&&D(c[x]);ge(S,I)!==0&&(S!=null&&b(S),I!=null&&b(I))})}a.indexes.forEach(h)}function kl(s,a,l){if(l.numFailures===0)return a;if(a.type==="deleteRange")return null;var c=a.keys?a.keys.length:"values"in a&&a.values?a.values.length:1;if(l.numFailures===c)return null;var h=n({},a);return u(h.keys)&&(h.keys=h.keys.filter(function(m,g){return!(g in l.failures)})),"values"in h&&u(h.values)&&(h.values=h.values.filter(function(m,g){return!(g in l.failures)})),h}function Bp(s,a){return a.lower===void 0?!0:a.lowerOpen?ge(s,a.lower)>0:ge(s,a.lower)>=0}function Rp(s,a){return a.upper===void 0?!0:a.upperOpen?ge(s,a.upper)<0:ge(s,a.upper)<=0}function ho(s,a){return Bp(s,a)&&Rp(s,a)}function xl(s,a,l,c,h,m){if(!l||l.length===0)return s;var g=a.query.index,D=g.multiEntry,b=a.query.range,F=c.schema.primaryKey,x=F.extractKey,S=g.extractKey,I=(g.lowLevelIndex||g).extractKey,K=l.reduce(function(k,O){var A=k,H=[];if(O.type==="add"||O.type==="put")for(var N=new Xe,L=O.values.length-1;L>=0;--L){var G=O.values[L],P=x(G);if(!N.hasKey(P)){var Y=S(G);(D&&u(Y)?Y.some(function(ee){return ho(ee,b)}):ho(Y,b))&&(N.addKey(P),H.push(G))}}switch(O.type){case"add":{var Q=new Xe().addKeys(a.values?k.map(function(ee){return x(ee)}):k);A=k.concat(a.values?H.filter(function(ee){var he=x(ee);return Q.hasKey(he)?!1:(Q.addKey(he),!0)}):H.map(function(ee){return x(ee)}).filter(function(ee){return Q.hasKey(ee)?!1:(Q.addKey(ee),!0)}));break}case"put":{var Z=new Xe().addKeys(O.values.map(function(ee){return x(ee)}));A=k.filter(function(ee){return!Z.hasKey(a.values?x(ee):ee)}).concat(a.values?H:H.map(function(ee){return x(ee)}));break}case"delete":var ae=new Xe().addKeys(O.keys);A=k.filter(function(ee){return!ae.hasKey(a.values?x(ee):ee)});break;case"deleteRange":var de=O.range;A=k.filter(function(ee){return!ho(x(ee),de)});break}return A},s);return K===s?s:(K.sort(function(k,O){return ge(I(k),I(O))||ge(x(k),x(O))}),a.limit&&a.limit<1/0&&(K.length>a.limit?K.length=a.limit:s.length===a.limit&&K.length<a.limit&&(h.dirty=!0)),m?Object.freeze(K):K)}function Ol(s,a){return ge(s.lower,a.lower)===0&&ge(s.upper,a.upper)===0&&!!s.lowerOpen==!!a.lowerOpen&&!!s.upperOpen==!!a.upperOpen}function Hp(s,a,l,c){if(s===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;var h=ge(s,a);if(h===0){if(l&&c)return 0;if(l)return 1;if(c)return-1}return h}function Gp(s,a,l,c){if(s===void 0)return a!==void 0?1:0;if(a===void 0)return-1;var h=ge(s,a);if(h===0){if(l&&c)return 0;if(l)return-1;if(c)return 1}return h}function Vp(s,a){return Hp(s.lower,a.lower,s.lowerOpen,a.lowerOpen)<=0&&Gp(s.upper,a.upper,s.upperOpen,a.upperOpen)>=0}function Kp(s,a,l,c){var h=Hn["idb://".concat(s,"/").concat(a)];if(!h)return[];var m=h.queries[l];if(!m)return[null,!1,h,null];var g=c.query?c.query.index.name:null,D=m[g||""];if(!D)return[null,!1,h,null];switch(l){case"query":var b=D.find(function(S){return S.req.limit===c.limit&&S.req.values===c.values&&Ol(S.req.query.range,c.query.range)});if(b)return[b,!0,h,D];var F=D.find(function(S){var I="limit"in S.req?S.req.limit:1/0;return I>=c.limit&&(c.values?S.req.values:!0)&&Vp(S.req.query.range,c.query.range)});return[F,!1,h,D];case"count":var x=D.find(function(S){return Ol(S.req.query.range,c.query.range)});return[x,!!x,h,D]}}function qp(s,a,l,c){s.subscribers.add(l),c.addEventListener("abort",function(){s.subscribers.delete(l),s.subscribers.size===0&&Up(s,a)})}function Up(s,a){setTimeout(function(){s.subscribers.size===0&&Ge(a,s)},3e3)}var jp={stack:"dbcore",level:0,name:"Cache",create:function(s){var a=s.schema.name,l=n(n({},s),{transaction:function(c,h,m){var g=s.transaction(c,h,m);if(h==="readwrite"){var D=new AbortController,b=D.signal,F=function(x){return function(){if(D.abort(),h==="readwrite"){for(var S=new Set,I=0,K=c;I<K.length;I++){var k=K[I],O=Hn["idb://".concat(a,"/").concat(k)];if(O){var A=s.table(k),H=O.optimisticOps.filter(function(De){return De.trans===g});if(g._explicit&&x&&g.mutatedParts)for(var N=0,L=Object.values(O.queries.query);N<L.length;N++)for(var G=L[N],P=0,Y=G.slice();P<Y.length;P++){var Q=Y[P];so(Q.obsSet,g.mutatedParts)&&(Ge(G,Q),Q.subscribers.forEach(function(De){return S.add(De)}))}else if(H.length>0){O.optimisticOps=O.optimisticOps.filter(function(De){return De.trans!==g});for(var Z=0,ae=Object.values(O.queries.query);Z<ae.length;Z++)for(var G=ae[Z],de=0,ee=G.slice();de<ee.length;de++){var Q=ee[de];if(Q.res!=null&&g.mutatedParts)if(x&&!Q.dirty){var he=Object.isFrozen(Q.res),le=xl(Q.res,Q.req,H,A,Q,he);Q.dirty?(Ge(G,Q),Q.subscribers.forEach(function(Me){return S.add(Me)})):le!==Q.res&&(Q.res=le,Q.promise=U.resolve({result:le}))}else Q.dirty&&Ge(G,Q),Q.subscribers.forEach(function(Me){return S.add(Me)})}}}}S.forEach(function(De){return De()})}}};g.addEventListener("abort",F(!1),{signal:b}),g.addEventListener("error",F(!1),{signal:b}),g.addEventListener("complete",F(!0),{signal:b})}return g},table:function(c){var h=s.table(c),m=h.schema.primaryKey,g=n(n({},h),{mutate:function(D){var b=$.trans;if(m.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return h.mutate(D);var F=Hn["idb://".concat(a,"/").concat(c)];if(!F)return h.mutate(D);var x=h.mutate(D);return(D.type==="add"||D.type==="put")&&(D.values.length>=50||fo(m,D).some(function(S){return S==null}))?x.then(function(S){var I=n(n({},D),{values:D.values.map(function(k,O){var A;if(S.failures[O])return k;var H=!((A=m.keyPath)===null||A===void 0)&&A.includes(".")?Dt(k):n({},k);return re(H,m.keyPath,S.results[O]),H})}),K=kl(F,I,S);F.optimisticOps.push(K),queueMicrotask(function(){return D.mutatedParts&&es(D.mutatedParts)})}):(F.optimisticOps.push(D),D.mutatedParts&&es(D.mutatedParts),x.then(function(S){if(S.numFailures>0){Ge(F.optimisticOps,D);var I=kl(F,D,S);I&&F.optimisticOps.push(I),D.mutatedParts&&es(D.mutatedParts)}}),x.catch(function(){Ge(F.optimisticOps,D),D.mutatedParts&&es(D.mutatedParts)})),x},query:function(D){var b;if(!_l($,h)||!Sl("query",D))return h.query(D);var F=((b=$.trans)===null||b===void 0?void 0:b.db._options.cache)==="immutable",x=$,S=x.requery,I=x.signal,K=Kp(a,c,"query",D),k=K[0],O=K[1],A=K[2],H=K[3];if(k&&O)k.obsSet=D.obsSet;else{var N=h.query(D).then(function(L){var G=L.result;if(k&&(k.res=G),F){for(var P=0,Y=G.length;P<Y;++P)Object.freeze(G[P]);Object.freeze(G)}else L.result=Dt(G);return L}).catch(function(L){return H&&k&&Ge(H,k),Promise.reject(L)});k={obsSet:D.obsSet,promise:N,subscribers:new Set,type:"query",req:D,dirty:!1},H?H.push(k):(H=[k],A||(A=Hn["idb://".concat(a,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),A.queries.query[D.query.index.name||""]=H)}return qp(k,H,S,I),k.promise.then(function(L){return{result:xl(L.result,D,A==null?void 0:A.optimisticOps,h,k,F)}})}});return g}});return l}};function ns(s,a){return new Proxy(s,{get:function(l,c,h){return c==="db"?a:Reflect.get(l,c,h)}})}var on=function(){function s(a,l){var c=this;this._middlewares={},this.verno=0;var h=s.dependencies;this._options=l=n({addons:s.addons,autoOpen:!0,indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange};var m=l.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:we,dbReadyPromise:null,cancelOpen:we,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};g.dbReadyPromise=new U(function(b){g.dbReadyResolve=b}),g.openCanceller=new U(function(b,F){g.cancelOpen=F}),this._state=g,this.name=a,this.on=Ur(this,"populate","blocked","versionchange","close",{ready:[Vr,we]}),this.on.ready.subscribe=He(this.on.ready.subscribe,function(b){return function(F,x){s.vip(function(){var S=c._state;if(S.openComplete)S.dbOpenError||U.resolve().then(F),x&&b(F);else if(S.onReadyBeingFired)S.onReadyBeingFired.push(F),x&&b(F);else{b(F);var I=c;x||b(function K(){I.on.ready.unsubscribe(F),I.on.ready.unsubscribe(K)})}})}}),this.Collection=Xd(this),this.Table=Zd(this),this.Transaction=op(this),this.Version=Fp(this),this.WhereClause=sp(this),this.on("versionchange",function(b){b.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(b){!b.newVersion||b.newVersion<b.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(b.oldVersion/10))}),this._maxKey=Zr(l.IDBKeyRange),this._createTransaction=function(b,F,x,S){return new c.Transaction(b,F,x,c._options.chromeTransactionDurability,S)},this._fireOnBlocked=function(b){c.on("blocked").fire(b),hr.filter(function(F){return F.name===c.name&&F!==c&&!F._state.vcFired}).map(function(F){return F.on("versionchange").fire(b)})},this.use(Pp),this.use(jp),this.use(Np),this.use(Mp),this.use(Ap);var D=new Proxy(this,{get:function(b,F,x){if(F==="_vip")return!0;if(F==="table")return function(I){return ns(c.table(I),D)};var S=Reflect.get(b,F,x);return S instanceof cl?ns(S,D):F==="tables"?S.map(function(I){return ns(I,D)}):F==="_createTransaction"?function(){var I=S.apply(this,arguments);return ns(I,D)}:S}});this.vip=D,m.forEach(function(b){return b(c)})}return s.prototype.version=function(a){if(isNaN(a)||a<.1)throw new ie.Type("Given version is not a positive number");if(a=Math.round(a*10)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var l=this._versions,c=l.filter(function(h){return h._cfg.version===a})[0];return c||(c=new this.Version(a),l.push(c),l.sort(pp),c.stores({}),this._state.autoSchema=!1,c)},s.prototype._whenReady=function(a){var l=this;return this.idbdb&&(this._state.openComplete||$.letThrough||this._vip)?a():new U(function(c,h){if(l._state.openComplete)return h(new ie.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen){h(new ie.DatabaseClosed);return}l.open().catch(we)}l._state.dbReadyPromise.then(c,h)}).then(a)},s.prototype.use=function(a){var l=a.stack,c=a.create,h=a.level,m=a.name;m&&this.unuse({stack:l,name:m});var g=this._middlewares[l]||(this._middlewares[l]=[]);return g.push({stack:l,create:c,level:h==null?10:h,name:m}),g.sort(function(D,b){return D.level-b.level}),this},s.prototype.unuse=function(a){var l=a.stack,c=a.name,h=a.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(m){return h?m.create!==h:c?m.name!==c:!1})),this},s.prototype.open=function(){var a=this;return Ln(Ve,function(){return xp(a)})},s.prototype._close=function(){var a=this._state,l=hr.indexOf(this);if(l>=0&&hr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch(c){}this.idbdb=null}a.isBeingOpened||(a.dbReadyPromise=new U(function(c){a.dbReadyResolve=c}),a.openCanceller=new U(function(c,h){a.cancelOpen=h}))},s.prototype.close=function(a){var l=a===void 0?{disableAutoOpen:!0}:a,c=l.disableAutoOpen,h=this._state;c?(h.isBeingOpened&&h.cancelOpen(new ie.DatabaseClosed),this._close(),h.autoOpen=!1,h.dbOpenError=new ie.DatabaseClosed):(this._close(),h.autoOpen=this._options.autoOpen||h.isBeingOpened,h.openComplete=!1,h.dbOpenError=null)},s.prototype.delete=function(a){var l=this;a===void 0&&(a={disableAutoOpen:!0});var c=arguments.length>0&&typeof arguments[0]!="object",h=this._state;return new U(function(m,g){var D=function(){l.close(a);var b=l._deps.indexedDB.deleteDatabase(l.name);b.onsuccess=xe(function(){Sp(l._deps,l.name),m()}),b.onerror=Ut(g),b.onblocked=l._fireOnBlocked};if(c)throw new ie.InvalidArgument("Invalid closeOptions argument to db.delete()");h.isBeingOpened?h.dbReadyPromise.then(D):D()})},s.prototype.backendDB=function(){return this.idbdb},s.prototype.isOpen=function(){return this.idbdb!==null},s.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"},s.prototype.hasFailed=function(){return this._state.dbOpenError!==null},s.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(s.prototype,"tables",{get:function(){var a=this;return o(this._allTables).map(function(l){return a._allTables[l]})},enumerable:!1,configurable:!0}),s.prototype.transaction=function(){var a=Op.apply(this,arguments);return this._transaction.apply(this,a)},s.prototype._transaction=function(a,l,c){var h=this,m=$.trans;(!m||m.db!==this||a.indexOf("!")!==-1)&&(m=null);var g=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var D,b;try{if(b=l.map(function(x){var S=x instanceof h.Table?x.name:x;if(typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),a=="r"||a===Ka)D=Ka;else if(a=="rw"||a==qa)D=qa;else throw new ie.InvalidArgument("Invalid transaction mode: "+a);if(m){if(m.mode===Ka&&D===qa)if(g)m=null;else throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m&&b.forEach(function(x){if(m&&m.storeNames.indexOf(x)===-1)if(g)m=null;else throw new ie.SubTransaction("Table "+x+" not included in parent transaction.")}),g&&m&&!m.active&&(m=null)}}catch(x){return m?m._promise(null,function(S,I){I(x)}):Ne(x)}var F=Fl.bind(null,this,D,b,m,c);return m?m._promise(D,F,"lock"):$.trans?Ln($.transless,function(){return h._whenReady(F)}):this._whenReady(F)},s.prototype.table=function(a){if(!w(this._allTables,a))throw new ie.InvalidTable("Table ".concat(a," does not exist"));return this._allTables[a]},s}(),Wp=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",zp=function(){function s(a){this._subscribe=a}return s.prototype.subscribe=function(a,l,c){return this._subscribe(!a||typeof a=="function"?{next:a,error:l,complete:c}:a)},s.prototype[Wp]=function(){return this},s}(),rs;try{rs={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(s){rs={indexedDB:null,IDBKeyRange:null}}function Tl(s){var a=!1,l,c=new zp(function(h){var m=nr(s);function g(H){var N=lr();try{m&&fr();var L=vn(s,H);return m&&(L=L.finally(Dn)),L}finally{N&&cr()}}var D=!1,b,F={},x={},S={get closed(){return D},unsubscribe:function(){D||(D=!0,b&&b.abort(),I&&En.storagemutated.unsubscribe(O))}};h.start&&h.start(S);var I=!1,K=function(){return Ha(A)};function k(){return so(x,F)}var O=function(H){Xi(F,H),k()&&K()},A=function(){if(!(D||!rs.indexedDB)){F={};var H={};b&&b.abort(),b=new AbortController;var N={subscr:H,signal:b.signal,requery:K,querier:s,trans:null},L=g(N);Promise.resolve(L).then(function(G){a=!0,l=G,!(D||N.signal.aborted)&&(F={},x=H,!Te(x)&&!I&&(En(Yr,O),I=!0),Ha(function(){return!D&&h.next&&h.next(G)}))},function(G){a=!1,["DatabaseClosedError","AbortError"].includes(G==null?void 0:G.name)||D||Ha(function(){D||h.error&&h.error(G)})})}};return setTimeout(K,0),S});return c.hasValue=function(){return a},c.getValue=function(){return l},c}var Gn=on;y(Gn,n(n({},Nn),{delete:function(s){var a=new Gn(s,{addons:[]});return a.delete()},exists:function(s){return new Gn(s,{addons:[]}).open().then(function(a){return a.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return Cp(Gn.dependencies).then(s)}catch(a){return Ne(new ie.MissingAPI)}},defineClass:function(){function s(a){f(this,a)}return s},ignoreTransaction:function(s){return $.trans?Ln($.transless,s):s()},vip:no,async:function(s){return function(){try{var a=lo(s.apply(this,arguments));return!a||typeof a.then!="function"?U.resolve(a):a}catch(l){return Ne(l)}}},spawn:function(s,a,l){try{var c=lo(s.apply(l,a||[]));return!c||typeof c.then!="function"?U.resolve(c):c}catch(h){return Ne(h)}},currentTransaction:{get:function(){return $.trans||null}},waitFor:function(s,a){var l=U.resolve(typeof s=="function"?Gn.ignoreTransaction(s):s).timeout(a||6e4);return $.trans?$.trans.waitFor(l):l},Promise:U,debug:{get:function(){return bt},set:function(s){Ni(s)}},derive:V,extend:f,props:y,override:He,Events:Ur,on:En,liveQuery:Tl,extendObservabilitySet:Xi,getByKeyPath:W,setByKeyPath:re,delByKeyPath:Fe,shallowClone:je,deepClone:Dt,getObjectDiff:co,cmp:ge,asap:ue,minKey:Va,addons:[],connections:hr,errnames:Mt,dependencies:rs,cache:Hn,semVer:il,version:il.split(".").map(function(s){return parseInt(s)}).reduce(function(s,a,l){return s+a/Math.pow(10,l*2)})})),Gn.maxKey=Zr(Gn.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(En(Yr,function(s){if(!Fn){var a;a=new CustomEvent(za,{detail:s}),Fn=!0,dispatchEvent(a),Fn=!1}}),addEventListener(za,function(s){var a=s.detail;Fn||po(a)}));function po(s){var a=Fn;try{Fn=!0,En.storagemutated.fire(s),uo(s,!0)}finally{Fn=a}}var Fn=!1,Cn,mo=function(){};typeof BroadcastChannel!="undefined"&&(mo=function(){Cn=new BroadcastChannel(za),Cn.onmessage=function(s){return s.data&&po(s.data)}},mo(),typeof Cn.unref=="function"&&Cn.unref(),En(Yr,function(s){Fn||Cn.postMessage(s)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(s){if(!on.disableBfCache&&s.persisted){bt&&console.debug("Dexie: handling persisted pagehide"),Cn==null||Cn.close();for(var a=0,l=hr;a<l.length;a++){var c=l[a];c.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(s){!on.disableBfCache&&s.persisted&&(bt&&console.debug("Dexie: handling persisted pageshow"),mo(),po({all:new Xe(-1/0,[[]])}))}));function Yp(s){return new Wr({add:s})}function Zp(s){return new Wr({remove:s})}function Jp(s,a){return new Wr({replacePrefix:[s,a]})}U.rejectionMapper=ar,Ni(bt);var Qp=Object.freeze({__proto__:null,Dexie:on,liveQuery:Tl,Entity:ol,cmp:ge,PropModSymbol:Qd,PropModification:Wr,replacePrefix:Jp,add:Yp,remove:Zp,default:on,RangeSet:Xe,mergeRanges:$r,rangesOverlap:Dl});return n(on,Qp,{default:on}),on})});var R2={};sm(R2,{default:()=>Aa});module.exports=am(R2);var Bd=require("obsidian");var lt=require("obsidian");var Al=require("obsidian");var as=[{value:"gemini-2.5-pro-exp-03-25",label:"Gemini 2.5 Pro"},{value:"gemini-2.0-pro-exp-02-05",label:"Gemini 2.0 Pro"},{value:"gemini-2.0-flash-001",label:"Gemini 2.0 Flash"},{value:"gemini-2.0-flash-lite-preview-02-05",label:"Gemini 2.0 Flash Lite Preview"},{value:"gemini-2.0-flash-thinking-exp-01-21",label:"Gemini 2.0 Flash Thinking"},{value:"gemini-1.5-pro",label:"gemini-1.5-pro"},{value:"gemini-1.5-flash",label:"gemini-1.5-flash"},{value:"gemini-1.5-flash-8b",label:"gemini-1.5-flash-8b"}];function os(t,e,n,r,i){let o=new Al.Setting(t).setName(r).setDesc(i).addDropdown(u=>(as.forEach(f=>{u.addOption(f.value,f.label)}),u.setValue(String(e.settings[n])).onChange(async f=>{e.settings[n]=f,await e.saveSettings()}),u))}var ls=require("obsidian"),us=class extends ls.AbstractInputSuggest{constructor(n,r,i){super(n,r);this.inputEl=r,this.folderSelectCallback=i}getSuggestions(n){return this.app.vault.getAllLoadedFiles().filter(i=>i instanceof ls.TFolder).filter(i=>i.path.toLowerCase().contains(n.toLowerCase()))}renderSuggestion(n,r){r.setText(n.path)}selectSuggestion(n,r){this.inputEl.value=n.path,this.inputEl.trigger("input"),this.close(),this.folderSelectCallback(n.path)}};var ti=class extends lt.PluginSettingTab{constructor(n,r){super(n,r);this.plugin=r}display(){let{containerEl:n}=this;n.empty(),new lt.Setting(n).setName("API Key").setDesc("Gemini API Key").addText(r=>r.setPlaceholder("Enter your API Key").setValue(this.plugin.settings.apiKey).onChange(async i=>{this.plugin.settings.apiKey=i,await this.plugin.saveSettings()})),os(n,this.plugin,"chatModelName","Chat Model","The Gemini Model used in the chat interface."),os(n,this.plugin,"summaryModelName","Summary Model","The Gemini Model used for summarization."),os(n,this.plugin,"completionsModelName","Completion Model","The Gemini Model used for completions."),new lt.Setting(n).setName("Context Depth").setDesc("Set to true to send the context of the current file to the model, and adjust the depth of links followed for the context.").addDropdown(r=>r.addOption("0","0").addOption("1","1").addOption("2","2").addOption("3","3").addOption("4","4").setValue(this.plugin.settings.maxContextDepth.toString()).onChange(async i=>{this.plugin.settings.maxContextDepth=parseInt(i),await this.plugin.saveSettings()})).addToggle(r=>r.setValue(this.plugin.settings.sendContext).onChange(async i=>{this.plugin.settings.sendContext=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("Search Grounding").setDesc("Enable the model to use Google search results in its responses, and the threshold for how likely it is to trigger.").addDropdown(r=>r.addOption("0.1","0.1").addOption("0.2","0.2").addOption("0.3","0.3").addOption("0.4","0.4").addOption("0.5","0.5").addOption("0.6","0.6").addOption("0.7","0.7").addOption("0.8","0.8").addOption("0.9","0.9").setValue(this.plugin.settings.searchGroundingThreshold.toString()).onChange(async i=>{this.plugin.settings.searchGroundingThreshold=parseFloat(i),await this.plugin.saveSettings()})).addToggle(r=>r.setValue(this.plugin.settings.searchGrounding).onChange(async i=>{this.plugin.settings.searchGrounding=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("Summary Frontmatter Key").setDesc("Key to use for frontmatter summarization.").addText(r=>r.setPlaceholder("Enter your key").setValue(this.plugin.settings.summaryFrontmatterKey).onChange(async i=>{this.plugin.settings.summaryFrontmatterKey=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("Your name.").setDesc("This will be used in the system instructions for the model.").addText(r=>r.setPlaceholder("Enter your name").setValue(this.plugin.settings.userName).onChange(async i=>{this.plugin.settings.userName=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("Rewrite Files").setDesc("Whether to allow the model to rewrite files during chat.").addToggle(r=>r.setValue(this.plugin.settings.rewriteFiles).onChange(async i=>{this.plugin.settings.rewriteFiles=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("Chat History").setHeading(),new lt.Setting(n).setName("Enable Chat History").setDesc("Store chat history as a json file in your vault. This will allow you to view past conversations between sessions.").addToggle(r=>r.setValue(this.plugin.settings.chatHistory).onChange(async i=>{this.plugin.settings.chatHistory=i,await this.plugin.saveSettings()})),new lt.Setting(n).setName("History Folder").setDesc("The folder where history file will be stored.").addText(r=>{let i=new us(this.app,r.inputEl,async o=>{this.plugin.settings.historyFolder=o,await this.plugin.saveSettings()});r.setValue(this.plugin.settings.historyFolder)}),new lt.Setting(n).setName("UI Settings").setHeading(),new lt.Setting(n).setName("Show Model Picker").setDesc("Show the model picker in the chat interface.").addToggle(r=>r.setValue(this.plugin.settings.showModelPicker).onChange(async i=>{this.plugin.settings.showModelPicker=i,await this.plugin.saveSettings()}))}};var ft=require("obsidian");var hn=ss(uu());var Df=`You are a note-taking and writing assistant embedded in my Obsidian note vault.
Your primary goal is to help me stay organized by surfacing information from my 
notes and any linked notes, and to assist me in drafting and refining my 
writing based on this context. 

Assume that I am the author of all content unless specified otherwise, and you
can refer to me as {{userName}}.

Unless otherwise specified please respond to me in the same language I use with 
you. My user interface is set to the language code: {{language}}. Use that
language if you are uncertain about the language to use.

If a question cannot be answered from my notes, supplement your response with
external information as needed.`;var bf=`You are a markdown text completion assistant designed to help users write more 
effectively by generating contextually relevant, high-quality sentence. 

Your task is to provide the next logical sentence based on the user\u2019s notes. 
Your completions should align with the style, tone, and intent of the given content,
while also pushing creative boundaries. Infuse the completion with vivid imagery, 
fresh perspectives, and subtle details that evoke sensory and emotional responses.
Ensure that your suggestions feel original and thought-provoking, and avoid clich\xE9s.
Use the full file to understand the context, but only focus on completing the 
text at the cursor position.

Avoid repeating ideas, phrases, or details that are already present in the 
content. Instead, focus on expanding, diversifying, or complementing the 
existing content.

If a full sentence is not feasible, generate a phrase. If a phrase isn\u2019t possible, 
provide a single word. Do not include any preamble, explanations, or extraneous 
text\u2014output only the continuation. 

Do not include any special characters, punctuation, or extra whitespace at the
beginning of your response, and do not include any extra whitespace or newline
characters after your response.

Here is the file content and the locaiton of the cursor:
<file>
{{contentBeforeCursor}}<cursor>{{contentAfterCursor}}
</file>
`;var wf=`You are assisting me in exploring, clarifying, and discussing the content
within a file labeled \u2018Current File\u2019 and any linked files. Prioritize
information from these files when answering questions, providing explanations,
or engaging in brainstorming.

Assume I am the author of the content unless otherwise specified. If additional
context beyond the current and linked files is needed to answer a question, 
clearly indicate when you are drawing on general knowledge or external information.

When referring to files, use [[WikiLink]] syntax. If it's provided in the context
use the Wikilink that is provided, otherwise use the file path but drop the .md 
extension.

Your responses should be plain text. Use markdown only if it aids clarity or 
organization in your response.
`;var Ef=`Using the context provided, create a single-sentence summary based on the
content of the file. Exclude any mention of dates, attendees, or my name, and
assume the notes are taken from my perspective unless specified otherwise. 

Respond with plain text only, do not use any markdown.

Please summarize the following content:
<file><content>{{content}}</content></file>`;var Ff=`You are assisting me in drafting the document labeled \u2018Current File\u2019 using the
context of this chat and the contents of any files linked from the Current File,
which are labeled as linked files. Use this content to help draft the document.

Respond with plain text, using markdown only for formatting where needed.

Your response will replace the entire content below the Markdown \u2018Draft\u2019 heading,
preserving everything above it. It's very important that you preserve the text 
above the 'Draft' heading. If no \u2018Draft\u2019 heading exists, create one as '# Draft' 
and start your content below it.

Exclude any content that should not appear in the final draft, ensuring only
relevant information is incorporated.

{{userMessage}}`;var Cf="Today's date is: {{date}}.";var _f="The current time is {{time}}.";var Sf=`==============================
File Label: {{file_label}}
File Name: {{file_name}}
WikiLink: {{wikilink}}
==============================

{{file_contents}}

`;var ct=class{constructor(){this.completionsPromptTemplate=hn.compile(bf),this.systemPromptTemplate=hn.compile(Df),this.generalPromptTemplate=hn.compile(wf),this.summaryPromptTemplate=hn.compile(Ef),this.rewritePromptTemplate=hn.compile(Ff),this.datePromptTemplate=hn.compile(Cf),this.timePromptTemplate=hn.compile(_f),this.contextPromptTemplate=hn.compile(Sf)}completionsPrompt(e){return this.completionsPromptTemplate(e)}systemPrompt(e){return this.systemPromptTemplate(e)}generalPrompt(e){return this.generalPromptTemplate(e)}summaryPrompt(e){return this.summaryPromptTemplate(e)}rewritePrompt(e){return this.rewritePromptTemplate(e)}datePrompt(e){return this.datePromptTemplate(e)}timePrompt(e){return this.timePromptTemplate(e)}contextPrompt(e){return this.contextPromptTemplate(e)}};var qs=class{constructor(e){this.plugin=e,this.prompts=new ct}async generateRewriteResponse(e,n){let r=this.prompts.rewritePrompt({userMessage:e});await this.plugin.history.appendHistory({role:"user",message:e});let i={prompt:r,conversationHistory:n,userMessage:e},o=await this.plugin.geminiApi.generateModelResponse(i);await this.plugin.gfile.replaceTextInActiveFile(o.markdown)}};var mi="gemini-view",Us=class extends ft.ItemView{constructor(n,r){super(n);this.timerInterval=null;this.startTime=null;this.settingsUnsubscribe=null;this.plugin=r,this.rewriteMode=new qs(r),this.prompts=new ct,this.registerLinkClickHandler(),this.registerSettingsListener(),this.fileOpenHandler=this.handleFileOpen.bind(this)}registerSettingsListener(){let n=this.plugin.saveSettings.bind(this.plugin);this.plugin.saveSettings=async()=>{await n(),this.modelPicker&&(this.modelPicker.value=this.plugin.settings.chatModelName)},this.settingsUnsubscribe=()=>{this.plugin.saveSettings=n}}registerLinkClickHandler(){this.containerEl.addEventListener("click",n=>{let r=n.target;if(r.tagName==="A"&&r.classList.contains("internal-link")){n.preventDefault();let i=r.getAttribute("href");i&&this.app.workspace.openLinkText(i,"",!0)}})}getViewType(){return mi}getDisplayText(){return"Gemini Scribe"}getIcon(){return"sparkles"}async onOpen(){let n=this.containerEl.children[1];n.empty(),n.createEl("h2",{text:"Gemini Chat"}),this.chatbox=n.createDiv({cls:"gemini-scribe-chatbox"});let r=n.createDiv({cls:"gemini-scribe-input-area"}),i=r.createEl("textarea",{cls:"gemini-scribe-chat-input",attr:{placeholder:"Type your message here..."}}),o=r.createDiv({cls:"gemini-scribe-send-container"}),u=o.createEl("button",{text:"Send",cls:"gemini-scribe-send-button"});if((0,ft.setIcon)(u,"send-horizontal"),this.timerDisplay=o.createDiv({cls:"gemini-scribe-timer"}),this.plugin.settings.rewriteFiles){let p=n.createDiv({cls:"gemini-scribe-options-area"}),w=p.createEl("input",{type:"checkbox",cls:"gemini-scribe-rewrite-checkbox"});p.createEl("label",{text:"Rewrite file",cls:"gemini-scribe-rewrite-label"}).prepend(w),w.addEventListener("change",()=>{this.shoudRewriteFile=w.checked})}let f=n.createDiv({cls:"gemini-scribe-model-picker-area"});this.modelPicker=f.createEl("select",{cls:"gemini-scribe-model-picker"}),as.forEach(p=>{this.modelPicker.createEl("option",{value:p.value,text:p.label})}),this.modelPicker.value=this.plugin.settings.chatModelName,this.modelPicker.addEventListener("change",async()=>{this.plugin.settings.chatModelName=this.modelPicker.value,await this.plugin.saveSettings()}),i.addEventListener("keydown",async p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),u.click())}),u.addEventListener("click",async()=>{let p=i.value;if(p.trim()!==""){this.displayMessage(p,"user"),i.value="",this.startTimer();try{await this.sendMessage(p),this.stopTimer()}catch(w){this.stopTimer()}}}),this.observer=new MutationObserver(p=>{for(let w of p)w.type==="childList"&&this.scrollToBottom()}),this.observer.observe(this.chatbox,{childList:!0,subtree:!0}),this.registerEvent(this.app.workspace.on("file-open",async p=>{await this.handleFileOpen(p)}));let d=this.plugin.gfile.getActiveFile();d&&await this.handleFileOpen(d)}async onClose(){this.app.workspace.off("file-open",this.fileOpenHandler),this.observer.disconnect(),this.settingsUnsubscribe&&this.settingsUnsubscribe()}async displayMessage(n,r){var f,d;let i=this.chatbox.createDiv({cls:`gemini-scribe-message-container ${r}`}),o=i.createDiv({cls:"gemini-scribe-sender-indicator"}),u=i.createDiv({cls:`gemini-scribe-message ${r}`});switch(r){case"user":(0,ft.setIcon)(o,"square-user");break;case"model":(0,ft.setIcon)(o,"bot-message-square");break;case"grounding":(0,ft.setIcon)(o,"search");break}if(r==="grounding")u.innerHTML=n;else{let p=(d=(f=this.plugin.gfile.getActiveFile())==null?void 0:f.path)!=null?d:"";await ft.MarkdownRenderer.render(this.app,n,u,p,this)}if(r==="model"){let p=u.createEl("button",{cls:"gemini-scribe-copy-button"});(0,ft.setIcon)(p,"copy"),p.addEventListener("click",()=>{navigator.clipboard.writeText(n).then(()=>{new ft.Notice("Message copied to clipboard.")}).catch(w=>{new ft.Notice("Could not copy message to clipboard. Try selecting and copying manually.")})})}this.scrollToBottom()}async handleFileOpen(n){if(!n)return;let r=await this.plugin.app.vault.read(n);this.currentFile=n;let i=await this.plugin.history.getHistoryForFile(n);this.updateChat(i)}async loadActiveFile(){let n=this.plugin.gfile.getActiveFile();if(!n)return;let r=await this.plugin.app.vault.read(n);this.currentFile=n;let i=await this.plugin.history.getHistoryForFile(n);this.updateChat(i)}async updateChat(n){var r;this.clearChat();for(let i of n)i.role==="model"&&((r=i.metadata)!=null&&r.rendered)?(this.displayMessage(i.message,"model"),this.displayMessage(i.metadata.rendered,"grounding")):this.displayMessage(i.message,i.role)}clearChat(){this.chatbox.empty()}async sendMessage(n){var r,i,o;if(n.trim()!==""){if(this.shoudRewriteFile){let u=(r=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?r:[];await this.rewriteMode.generateRewriteResponse(n,u);return}try{let u=(i=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?i:[],f=this.prompts.generalPrompt({userMessage:n}),d={userMessage:n,conversationHistory:u,model:this.plugin.settings.chatModelName,prompt:f,renderContent:!0},p=await this.plugin.geminiApi.generateModelResponse(d);await this.plugin.history.appendHistoryForFile(this.currentFile,{role:"user",message:n}),await this.plugin.history.appendHistoryForFile(this.currentFile,{role:"model",message:p.markdown,userMessage:n,model:this.plugin.settings.chatModelName}),this.clearChat(),await this.updateChat((o=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?o:[]),p.rendered&&this.displayMessage(p.rendered,"grounding")}catch(u){new ft.Notice("Error getting bot response.")}}}scrollToBottom(){let n=()=>{let r=this.containerEl.querySelector(".gemini-scribe-input-area");r&&r.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};n(),setTimeout(n,50),setTimeout(n,150)}startTimer(){this.timerDisplay.style.display="block",this.startTime=Date.now(),this.timerDisplay.textContent="0.0s",this.timerInterval=setInterval(()=>{if(this.startTime){let n=(Date.now()-this.startTime)/1e3;this.timerDisplay.textContent=`${n.toFixed(1)}s`}},100)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),setTimeout(()=>{this.timerDisplay&&(this.timerDisplay.style.display="none")},2e3)}};var js=class{constructor(e){this.plugin=e,this.prompts=new ct}async summarizeActiveFile(){let e=await this.plugin.gfile.getCurrentFileContent(0,!0);if(e){let n={model:this.plugin.settings.summaryModelName,prompt:this.prompts.summaryPrompt({content:e})},r=await this.plugin.geminiApi.generateModelResponse(n);this.plugin.gfile.addToFrontMatter(this.plugin.settings.summaryFrontmatterKey,r.markdown)}else console.error("Failed to get file content for summary.")}async setupSummarizaitonCommand(){this.plugin.addCommand({id:"gemini-scribe-summarize-active-file",name:"Summarize Active File",callback:()=>this.summarizeActiveFile()})}};var kf;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(kf||(kf={}));var xf;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(xf||(xf={}));var Of;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Of||(Of={}));var Tf=["user","model","function","system"],Mf;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Mf||(Mf={}));var Af;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Af||(Af={}));var If;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(If||(If={}));var Pf;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(Pf||(Pf={}));var gi;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER"})(gi||(gi={}));var Nf;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Nf||(Nf={}));var Lf;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Lf||(Lf={}));var zs;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(zs||(zs={}));var nt=class extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}},xn=class extends nt{constructor(e,n){super(e),this.response=n}},Ys=class extends nt{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}},Zt=class extends nt{};var nv="https://generativelanguage.googleapis.com",rv="v1beta",iv="0.21.0",sv="genai-js",zn;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(zn||(zn={}));var lu=class{constructor(e,n,r,i,o){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=o}toString(){var e,n;let r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||rv,o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||nv}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}};function av(t){let e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${sv}/${iv}`),e.join(" ")}async function ov(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",av(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Zt(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(let[i,o]of r.entries()){if(i==="x-goog-api-key")throw new Zt(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Zt(`Header name ${i} can only be set using the apiClient field`);n.append(i,o)}}return n}async function uv(t,e,n,r,i,o){let u=new lu(t,e,n,r,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},hv(o)),{method:"POST",headers:await ov(u),body:i})}}async function Di(t,e,n,r,i,o={},u=fetch){let{url:f,fetchOptions:d}=await uv(t,e,n,r,i,o);return lv(f,d,u)}async function lv(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){cv(i,t)}return r.ok||await fv(r,t),r}function cv(t,e){let n=t;throw t instanceof Ys||t instanceof Zt||(n=new nt(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function fv(t,e){let n="",r;try{let i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch(i){}throw new Ys(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function hv(t){let e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){let n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function fu(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Ws(t.candidates[0]))throw new xn(`${On(t)}`,t);return dv(t)}else if(t.promptFeedback)throw new xn(`Text not available. ${On(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ws(t.candidates[0]))throw new xn(`${On(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Bf(t)[0]}else if(t.promptFeedback)throw new xn(`Function call not available. ${On(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Ws(t.candidates[0]))throw new xn(`${On(t)}`,t);return Bf(t)}else if(t.promptFeedback)throw new xn(`Function call not available. ${On(t)}`,t)},t}function dv(t){var e,n,r,i;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let u of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Bf(t){var e,n,r,i;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let u of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}var pv=[gi.RECITATION,gi.SAFETY,gi.LANGUAGE];function Ws(t){return!!t.finishReason&&pv.includes(t.finishReason)}function On(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){let o=t.candidates[0];Ws(o)&&(i+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(i+=`: ${o.finishMessage}`))}return i}function yi(t){return this instanceof yi?(this.v=t,this):new yi(t)}function mv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},u("next"),u("throw"),u("return"),i[Symbol.asyncIterator]=function(){return this},i;function u(_){r[_]&&(i[_]=function(M){return new Promise(function(V,oe){o.push([_,M,V,oe])>1||f(_,M)})})}function f(_,M){try{d(r[_](M))}catch(V){y(o[0][3],V)}}function d(_){_.value instanceof yi?Promise.resolve(_.value.v).then(p,w):y(o[0][2],_)}function p(_){f("next",_)}function w(_){f("throw",_)}function y(_,M){_(M),o.shift(),o.length&&f(o[0][0],o[0][1])}}var Rf=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function gv(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Dv(e),[r,i]=n.tee();return{stream:vv(r),response:yv(i)}}async function yv(t){let e=[],n=t.getReader();for(;;){let{done:r,value:i}=await n.read();if(r)return fu(bv(e));e.push(i)}}function vv(t){return mv(this,arguments,function*(){let n=t.getReader();for(;;){let{value:r,done:i}=yield yi(n.read());if(i)break;yield yield yi(fu(r))}})}function Dv(t){let e=t.getReader();return new ReadableStream({start(r){let i="";return o();function o(){return e.read().then(({value:u,done:f})=>{if(f){if(i.trim()){r.error(new nt("Failed to parse stream"));return}r.close();return}i+=u;let d=i.match(Rf),p;for(;d;){try{p=JSON.parse(d[1])}catch(w){r.error(new nt(`Error parsing JSON response: "${d[1]}"`));return}r.enqueue(p),i=i.substring(d[0].length),d=i.match(Rf)}return o()})}}})}function bv(t){let e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(let r of t){if(r.candidates)for(let i of r.candidates){let o=i.index;if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:i.index}),n.candidates[o].citationMetadata=i.citationMetadata,n.candidates[o].groundingMetadata=i.groundingMetadata,n.candidates[o].finishReason=i.finishReason,n.candidates[o].finishMessage=i.finishMessage,n.candidates[o].safetyRatings=i.safetyRatings,i.content&&i.content.parts){n.candidates[o].content||(n.candidates[o].content={role:i.content.role||"user",parts:[]});let u={};for(let f of i.content.parts)f.text&&(u.text=f.text),f.functionCall&&(u.functionCall=f.functionCall),f.executableCode&&(u.executableCode=f.executableCode),f.codeExecutionResult&&(u.codeExecutionResult=f.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),n.candidates[o].content.parts.push(u)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function Kf(t,e,n,r){let i=await Di(e,zn.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return gv(i)}async function qf(t,e,n,r){let o=await(await Di(e,zn.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:fu(o)}}function Uf(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function vi(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let n of t)typeof n=="string"?e.push({text:n}):e.push(n);return wv(e)}function wv(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},r=!1,i=!1;for(let o of t)"functionResponse"in o?(n.parts.push(o),i=!0):(e.parts.push(o),r=!0);if(r&&i)throw new nt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new nt("No content is provided for sending chat message.");return r?e:n}function Ev(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]},i=t.generateContentRequest!=null;if(t.contents){if(i)throw new Zt("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{let o=vi(t);r.contents=[o]}return{generateContentRequest:r}}function Hf(t){let e;return t.contents?e=t:e={contents:[vi(t)]},t.systemInstruction&&(e.systemInstruction=Uf(t.systemInstruction)),e}function Fv(t){return typeof t=="string"||Array.isArray(t)?{content:vi(t)}:t}var Gf=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Cv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function _v(t){let e=!1;for(let n of t){let{role:r,parts:i}=n;if(!e&&r!=="user")throw new nt(`First content should be with role 'user', got ${r}`);if(!Tf.includes(r))throw new nt(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Tf)}`);if(!Array.isArray(i))throw new nt("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new nt("Each Content should have at least one part");let o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let f of i)for(let d of Gf)d in f&&(o[d]+=1);let u=Cv[r];for(let f of Gf)if(!u.includes(f)&&o[f]>0)throw new nt(`Content with role '${r}' can't contain '${f}' part`);e=!0}}var Vf="SILENT_ERROR",cu=class{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(_v(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,o,u,f,d;await this._sendPromise;let p=vi(e),w={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n),_;return this._sendPromise=this._sendPromise.then(()=>qf(this._apiKey,this.model,w,y)).then(M=>{var V;if(M.response.candidates&&M.response.candidates.length>0){this._history.push(p);let oe=Object.assign({parts:[],role:"model"},(V=M.response.candidates)===null||V===void 0?void 0:V[0].content);this._history.push(oe)}else{let oe=On(M.response);oe&&console.warn(`sendMessage() was unsuccessful. ${oe}. Inspect response object for details.`)}_=M}),await this._sendPromise,_}async sendMessageStream(e,n={}){var r,i,o,u,f,d;await this._sendPromise;let p=vi(e),w={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(f=this.params)===null||f===void 0?void 0:f.systemInstruction,cachedContent:(d=this.params)===null||d===void 0?void 0:d.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n),_=Kf(this._apiKey,this.model,w,y);return this._sendPromise=this._sendPromise.then(()=>_).catch(M=>{throw new Error(Vf)}).then(M=>M.response).then(M=>{if(M.candidates&&M.candidates.length>0){this._history.push(p);let V=Object.assign({},M.candidates[0].content);V.role||(V.role="model"),this._history.push(V)}else{let V=On(M);V&&console.warn(`sendMessageStream() was unsuccessful. ${V}. Inspect response object for details.`)}}).catch(M=>{M.message!==Vf&&console.error(M)}),_}};async function Sv(t,e,n,r){return(await Di(e,zn.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}async function kv(t,e,n,r){return(await Di(e,zn.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function xv(t,e,n,r){let i=n.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await Di(e,zn.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}var Zs=class{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Uf(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;let i=Hf(e),o=Object.assign(Object.assign({},this._requestOptions),n);return qf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}async generateContentStream(e,n={}){var r;let i=Hf(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Kf(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),o)}startChat(e){var n;return new cu(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){let r=Ev(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return Sv(this.apiKey,this.model,r,i)}async embedContent(e,n={}){let r=Fv(e),i=Object.assign(Object.assign({},this._requestOptions),n);return kv(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){let r=Object.assign(Object.assign({},this._requestOptions),n);return xv(this.apiKey,this.model,e,r)}};var Cr=class{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new nt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Zs(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Zt("Cached content must contain a `name` field.");if(!e.model)throw new Zt("Cached content must contain a `model` field.");let i=["model","systemInstruction"];for(let u of i)if(n!=null&&n[u]&&e[u]&&(n==null?void 0:n[u])!==e[u]){if(u==="model"){let f=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,d=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(f===d)continue}throw new Zt(`Different value for "${u}" specified in modelParams (${n[u]}) and cachedContent (${e[u]})`)}let o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Zs(this.apiKey,o,r)}};var Js=class{constructor(e,n,r,i){this.apiKey=n,this.modelName=r,this.searchGroundingThreshold=i,this.gemini=new Cr(this.apiKey),this.searchModel=this.gemini.getGenerativeModel({model:this.modelName,systemInstruction:e,tools:this.getTools()})}getSearchModel(){return this.searchModel}getTools(){let e=[];switch(!0){case(this.modelName.startsWith("gemini-2.0-flash-lite")||this.modelName.startsWith("gemini-2.0-flash-thinking")):e=[];break;case(this.modelName.startsWith("gemini-2.0-flash")||this.modelName.startsWith("gemini-2.0-pro")):e=[{google_search:{}}];break;default:e=[{googleSearchRetrieval:{dynamicRetrievalConfig:{mode:zs.MODE_DYNAMIC,dynamicThreshold:this.searchGroundingThreshold}}}];break}return e}};var jf=require("obsidian"),Qs=class{constructor(e){this.plugin=e,this.prompts=new ct,this.gemini=new Cr(this.plugin.settings.apiKey)}async generateModelResponse(e){let n=this.getModelInstance(e.model);if(!e.prompt)throw new Error("No prompt provided to generateModelResponse.");let r={markdown:"",rendered:""};try{if("conversationHistory"in e){let i=await this.buildContents(e),o=await n.generateContent({contents:i});r=this.parseModelResult(o)}else{let i=await n.generateContent(e.prompt);r=this.parseModelResult(i)}return r}catch(i){throw console.error("Error calling Gemini:",i),new jf.Notice("Error calling Gemini."),i}}getModelInstance(e){let n=e!=null?e:this.plugin.settings.chatModelName,r=window.localStorage.getItem("language")||"en",i=this.prompts.systemPrompt({userName:this.plugin.settings.userName,language:r}),o=[],u;return this.plugin.settings.searchGrounding?u=new Js(i,this.plugin.settings.apiKey,n,this.plugin.settings.searchGroundingThreshold).getSearchModel():u=this.gemini.getGenerativeModel({model:n,systemInstruction:i}),u}parseModelResult(e){var r,i,o,u;let n={markdown:"",rendered:""};return n.markdown=e.response.text(),(o=(i=(r=e.response.candidates)==null?void 0:r[0])==null?void 0:i.groundingMetadata)!=null&&o.searchEntryPoint&&(n.rendered=(u=e.response.candidates[0].groundingMetadata.searchEntryPoint.renderedContent)!=null?u:""),n}async buildContents(e){var p,w;let n=[];e.prompt!=null&&n.push(this.buildContentElement("user",e.prompt));let r=this.prompts.datePrompt({date:new Date().toDateString()});n.push(this.buildContentElement("user",r));let i=this.plugin.settings.maxContextDepth,o=(p=e.renderContent)!=null?p:!0,u=await this.plugin.gfile.getCurrentFileContent(i,o);u!=null&&n.push(this.buildContentElement("user",u)),((w=e.conversationHistory)!=null?w:[]).forEach(y=>{n.push(this.buildContentElement(y.role,y.message))});let d=this.prompts.timePrompt({time:new Date().toLocaleTimeString()});return n.push(this.buildContentElement("user",d)),n.push(this.buildContentElement("user",e.userMessage)),n}buildContentElement(e,n){return[{role:e,parts:[{text:n}]}]}};var _d=require("obsidian");var Cd=ss(Fd()),va=class{constructor(e,n){this.scribeFile=e,this.dataViewAPI=this.getDataViewAPI(),this.plugin=n}getDataViewAPI(){let e=(0,Cd.getAPI)();return e||null}async getBacklinks(e){let n="list where contains(file.outlinks, this.file.link)";return await this.evaluateDataviewQuery(n,e)}async getLinksFromDataviewBlocks(e){let n=new Set,r=[];return await this.iterateCodeblocksInFile(e,o=>{o.language==="dataview"&&r.push(this.evaluateDataviewQuery(o.text,e))}),(await Promise.all(r)).forEach(o=>{o.forEach(u=>n.add(u))}),n}async evaluateDataviewQuery(e,n){let r=new Set;try{let i=await this.dataViewAPI.query(e,n.path);if(!(i!=null&&i.value))return console.warn(`Invalid query result for "${e}" in file "${n.path}"`),r;let o=u=>{if(this.isFileLink(u)){let f=this.scribeFile.normalizePath(u.path,n);f?r.add(f):console.warn(`Link "${u}" in file "${n.path}" could not be normalized.`)}};if(i.value.type==="list")for(let u of i.value.values)o(u);else if(i.value.type==="table")for(let u of i.value.values)for(let f of u)o(f)}catch(i){console.error(`Error evaluating dataview query "${e}" in file "${n.path}":`,i)}return r}isFileLink(e){return e&&typeof e=="object"&&typeof e.path=="string"?!(e.subpath||e.path.includes("#")||e.path.includes("^")):!1}async iterateCodeblocksInFile(e,n){let i=(await this.plugin.app.vault.read(e)).split(`
`),o=null;for(let u=0;u<i.length;u++){let f=i[u];if(f.startsWith("```"))if(o)n(o),o=null;else{let d=f.substring(3).trim();o={start:u,end:-1,text:"",language:d}}else o&&(o.text+=f+`
`)}o&&(o.end=i.length-1,n(o))}};var Da=class{constructor(e,n){this.root=null;this.visited=new Set;this.MAX_TOTAL_CHARS=5e5;this.plugin=e,this.maxDepth=n!=null?n:this.plugin.settings.maxContextDepth,this.fileHelper=new Nr(e),this.dataViewHelper=new va(this.fileHelper,this.plugin),this.prompts=new ct}async buildStructure(e,n=0,r,i,o){if(!e||n>this.maxDepth||i.has(e.path)||e.path.startsWith(this.plugin.settings.historyFolder+"/"))return null;i.add(e.path);let u=this.fileHelper.getLinkText(e,o.path),f={path:e.path,content:await this.getFileContent(e,r),wikilink:u,links:new Map},d=this.fileHelper.getUniqueLinks(e),p=await this.dataViewHelper.getBacklinks(e)||new Set,w=await this.dataViewHelper.getLinksFromDataviewBlocks(e)||new Set,y=d;p.forEach(_=>y.add(_)),w.forEach(_=>y.add(_));for(let _ of y){let M=await this.buildStructure(_,n+1,r,i,o);M&&f.links.set(_.path,M)}return f}async initialize(e,n){this.visited.clear(),this.root=await this.buildStructure(e,0,n,this.visited,e)}toString(e=5e4){return this.root?this.nodeToString(this.root,0,e,0).text:"No file structure built"}nodeToString(e,n,r,i){let o=e.content.length>r?e.content.substring(0,r)+`
[Remaining content truncated...]`:e.content,u=n==0?`This is the content of the current file and the files that it links to:
`:"",f=n==0?"Current File":"Linked File";u+=this.prompts.contextPrompt({file_label:f,file_name:e.path,wikilink:e.wikilink,file_contents:o});let d=i+u.length;if(e.links.size>0&&d<this.MAX_TOTAL_CHARS)for(let[p,w]of e.links){if(d>=this.MAX_TOTAL_CHARS){u+=`[Additional links truncated...]
`;break}let y=this.nodeToString(w,n+1,r,d);u+=y.text,d=y.total}return{text:u,total:d}}async getFileContent(e,n){let r=await this.plugin.app.vault.read(e)||"";if(n){let i=document.createElement("div");return await _d.MarkdownRenderer.render(this.plugin.app,r,i,e.path,this.plugin),i.innerHTML}else return r}};var Sd=require("obsidian"),Nr=class{constructor(e){this.plugin=e}async getCurrentFileContent(e=this.plugin.settings.maxContextDepth,n=!1){let r=this.getActiveFile();if(r){let i=new Da(this.plugin,e);return await i.initialize(r,n),i.toString()}else return null}async addToFrontMatter(e,n){let r=this.getActiveFile();r&&this.plugin.app.fileManager.processFrontMatter(r,i=>{i[e]=n})}async replaceTextInActiveFile(e){let n=this.getActiveFile(),r=this.plugin.app.vault;n&&r.modify(n,e)}getActiveFile(){let e=this.plugin.app.workspace.getActiveFile();return this.isFile(e)?e:(console.debug("No active file found."),null)}isFile(e){return!!(e&&e instanceof Sd.TFile)}isMarkdownFile(e){return!!(e&&this.isFile(e)&&e.extension==="md")}getLinkText(e,n){return`[[${this.plugin.app.metadataCache.fileToLinktext(e,n,!0)}]]`}normalizePath(e,n){let r=this.plugin.app.metadataCache.getFirstLinkpathDest(e,n.path);return this.isMarkdownFile(r)?r:null}normalizeLinkPathsFromMetadata(e){let n=this.plugin.app.metadataCache.getFileCache(e),r=[],i=[],o=[];if(n){if(n.links)for(let u of n.links){let f=this.normalizePath(u.link,e);f?r.push(f):console.warn(`Link "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.embeds)for(let u of n.embeds){let f=this.normalizePath(u.link,e);f?i.push(f):console.warn(`Embed "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.frontmatterLinks)for(let u of n.frontmatterLinks){let f=this.normalizePath(u.link,e);f?o.push(f):console.warn(`Frontmatter link "${u.link}" in file "${e.path}" could not be normalized.`)}if(n.frontmatter&&n.frontmatter.links){if(Array.isArray(n.frontmatter.links))n.frontmatter.links.forEach(u=>{let f=this.normalizePath.call(this,u);f?o.push(f):console.warn(`Frontmatter link "${u}" in file "${e.path}" could not be normalized.`)});else if(typeof n.frontmatter.links=="string"){let u=this.normalizePath.call(this,n.frontmatter.links);u?o.push(u):console.warn(`Frontmatter link "${n.frontmatter.links}" in file "${e.path}" could not be normalized.`)}}}return{links:r,embeds:i,frontmatterLinks:o}}getUniqueLinks(e){let{links:n,embeds:r,frontmatterLinks:i}=this.normalizeLinkPathsFromMetadata(e);return new Set([...n,...r,...i])}};var er=require("obsidian"),xd=require("crypto"),wa=ss(uu());var kd=`{{#if isFirstEntry}}
# Chat History
*Started: {{timestamp}}*
*Plugin Version: {{pluginVersion}}*

---

{{/if}}
## {{role}}

> [!metadata]- Message Info
> | Property | Value |
> | -------- | ----- |
> | Time | {{timestamp}} |
> | File Version | {{fileVersion}} |
{{#if model}}
> | Model | {{model}} |
{{#if temperature}}
> | Temperature | {{temperature}} |
{{/if}}
{{/if}}
{{#if context}}
> | Context | {{context}} |
{{/if}}

{{#if (eq role "User")}}
> [!user]+
{{else}}
> [!assistant]+
{{/if}}
{{#each messageLines}}
> {{this}}
{{/each}}

--- `;var ba=class{constructor(e){this.plugin=e,wa.registerHelper("eq",function(n,r){return n===r}),this.entryTemplate=wa.compile(kd)}getHistoryFilePath(e){let n=this.plugin.settings.historyFolder,i=e.replace(/\.md$/,"").replace(/[\/\\]/g,"_"),u=new TextEncoder().encode(e),d=Array.from(new Uint8Array((0,xd.createHash)("sha256").update(u).digest())).map(p=>p.toString(16).padStart(2,"0")).join("").slice(0,8);return`${n}/${d}-${i}.md`}async appendHistoryForFile(e,n){if(!this.plugin.gfile.isFile(e)||!this.plugin.settings.chatHistory)return;let r=this.getHistoryFilePath(e.path),i={notePath:e.path,created_at:new Date,role:n.role,message:n.message,model:n.model};try{if(await this.plugin.app.vault.adapter.exists(r)){let u=await this.plugin.app.vault.adapter.read(r);u=u.replace(/\n---\s*$/,""),await this.plugin.app.vault.adapter.write(r,u+`

`+this.formatEntryAsMarkdown(i))}else{let u="";if(n.role==="model"&&n.userMessage){let d={notePath:e.path,created_at:new Date(i.created_at.getTime()-1e3),role:"user",message:n.userMessage};u=this.formatEntryAsMarkdown(d,!0)+`

`+this.formatEntryAsMarkdown(i)}else u=this.formatEntryAsMarkdown(i,!0);await this.plugin.app.vault.createFolder(this.plugin.settings.historyFolder).catch(()=>{});let f=await this.plugin.app.vault.create(r,u);await this.plugin.app.fileManager.processFrontMatter(f,d=>{d.source_file=this.plugin.gfile.getLinkText(e,e.path)})}}catch(o){console.error("Failed to append history",o),new er.Notice("Failed to save chat history")}}async getHistoryForFile(e){if(!this.plugin.gfile.isFile(e))return[];if(!this.plugin.settings.chatHistory)return[];let n=this.getHistoryFilePath(e.path);try{if(!await this.plugin.app.vault.adapter.exists(n))return[];let i=await this.plugin.app.vault.adapter.read(n);return this.parseHistoryFile(i,e.path)}catch(r){return console.error("Failed to read history",r),[]}}async clearHistoryForFile(e){if(!this.plugin.gfile.isFile(e))return;let n=this.getHistoryFilePath(e.path);try{return await this.plugin.app.vault.adapter.exists(n)?(await this.plugin.app.vault.adapter.remove(n),1):0}catch(r){console.error("Failed to clear history",r);return}}async clearHistory(){if(!this.plugin.settings.chatHistory)return;let e=this.plugin.settings.historyFolder;try{let n=await this.plugin.app.vault.adapter.list(e);for(let r of n.files)r.endsWith(".md")&&await this.plugin.app.vault.adapter.remove(r)}catch(n){console.error("Failed to clear all history",n),new er.Notice("Failed to clear chat history")}}formatEntryAsMarkdown(e,n=!1){var d,p;let r=e.created_at.toISOString(),i=e.role.charAt(0).toUpperCase()+e.role.slice(1),o=e.message.split(`
`),u=this.plugin.gfile.getActiveFile(),f=u?u.stat.mtime.toString(16).slice(0,8):"unknown";return this.entryTemplate({isFirstEntry:n,role:i,timestamp:r,model:e.model,messageLines:o,pluginVersion:this.plugin.manifest.version,fileVersion:f,temperature:(d=e.metadata)==null?void 0:d.temperature,context:(p=e.metadata)==null?void 0:p.context})}async parseHistoryFile(e,n){var p;let r=[],i=this.getHistoryFilePath(n),o=this.plugin.app.vault.getAbstractFileByPath(i),u=n;if(o instanceof er.TFile){let w=(p=this.plugin.app.metadataCache.getFileCache(o))==null?void 0:p.frontmatter;if(w&&w.source_file){let y=this.plugin.app.metadataCache.getFirstLinkpathDest(w.source_file,o.path);y instanceof er.TFile&&(u=y.path)}}let d=e.replace(/^---\n[\s\S]*?\n---\n/,"").trim().split(/\n\n(?=## )/);for(let w of d){if(!w.trim())continue;let y=w.match(/^## (User|Model)/m);if(y){let _=y[1].toLowerCase(),M=w.match(/\|\s*Time\s*\|\s*(.*?)\s*\|/m),V=w.match(/\|\s*Model\s*\|\s*(.*?)\s*\|/m),oe=M?new Date(M[1].trim()):new Date,pe=w.match(/>\s*\[!(user|assistant)\]\+\n([\s\S]*?)(?=\n\s*---|\n\s*$)/m);if(pe){let me=pe[2].split(`
`).map(Ce=>Ce.startsWith("> ")?Ce.slice(2):Ce).join(`
`).trim();me&&r.push({notePath:u,created_at:oe,role:_,message:me,model:V?V[1].trim():void 0})}}}return r}async renameHistoryFile(e,n){let r=this.plugin.settings.historyFolder,o=n.replace(/\.md$/,"").replace(/[\/\\]/g,"_");try{let u=await this.plugin.app.vault.adapter.list(r),f=u.files.find(d=>d.replace(/\.md$/,"").endsWith(`${o}`));if(f){let d=this.getHistoryFilePath(e.path),p=this.plugin.app.vault.getAbstractFileByPath(f);p instanceof er.TFile&&await this.plugin.app.fileManager.processFrontMatter(p,w=>{w.source_file=this.plugin.gfile.getLinkText(e,e.path)}),await this.plugin.app.vault.adapter.rename(f,d)}else console.log("Could not find history file to rename:",{historyFolder:r,oldSafeFilename:o,availableFiles:u.files})}catch(u){console.error("Failed to rename history file",u)}}async deleteHistoryFile(e){let n=this.plugin.settings.historyFolder,r=e.replace(/[\/\\]/g,"_");try{let o=(await this.plugin.app.vault.adapter.list(n)).files.find(u=>u.endsWith(`${r}.md`));o&&await this.plugin.app.vault.adapter.remove(o)}catch(i){console.error("Failed to delete history file",i)}}};var Ea=class{constructor(e){this.plugin=e,this.markdownHistory=new ba(e)}async setupHistoryCommands(){if(this.plugin.settings.chatHistory)try{this.plugin.addCommand({id:"gemini-scribe-clear-conversations",name:"Clear All Chat History",callback:async()=>{await this.clearHistory()}})}catch(e){console.error("Failed to add commands",e)}}async onLayoutReady(){await this.setupHistory()}async setupHistory(){this.plugin.app.vault.on("rename",this.renameHistoryFile.bind(this))}async onUnload(){console.debug("Unloading history module..."),this.plugin.app.vault.off("rename",this.renameHistoryFile.bind(this))}async renameHistoryFile(e,n){await this.markdownHistory.renameHistoryFile(e,n)}async appendHistoryForFile(e,n){await this.markdownHistory.appendHistoryForFile(e,n)}async getHistoryForFile(e){return await this.markdownHistory.getHistoryForFile(e)}async clearHistoryForFile(e){return await this.markdownHistory.clearHistoryForFile(e)}async appendHistory(e){let n=this.plugin.app.workspace.getActiveFile();n&&await this.appendHistoryForFile(n,e)}async clearHistory(){await this.markdownHistory.clearHistory()}async getTotalConversationCount(){let e=this.plugin.app.vault.getMarkdownFiles(),n=0;for(let r of e){let i=await this.getHistoryForFile(r);n+=i.length}return n}};var Br=require("obsidian");var kt=require("@codemirror/view"),mn=require("@codemirror/state");function Od(t,e,n=void 0){let r={force:()=>{}},i=null;async function*o(...u){i&&clearTimeout(i);let f=null;try{await new Promise(d=>{f=i=setTimeout(()=>d(),e),r.force=()=>{i&&clearTimeout(i),d()}})}catch(d){if(n!==void 0)throw n}for await(let d of t(...u)){if(f!==i)break;yield d}}return{debounced:o,force:()=>r.force()}}var A2=Object.defineProperty,I2=(t,e,n)=>e in t?A2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lr=(t,e,n)=>(I2(t,typeof e!="symbol"?e+"":e,n),n),Fa=mn.StateField.define({create(){return{suggestion:null}},update(t,e){let n=e.effects.find(r=>r.is(Ju));return e.state.doc&&n&&(n.value.doc==null||e.state.doc==n.value.doc)?{suggestion:n.value.suggestion}:{suggestion:null}}}),Ju=mn.StateEffect.define();function P2(t,e){let n=t.state.selection.main.head,r=[],i=kt.Decoration.widget({widget:new Wu(e),side:1});return r.push(i.range(n)),kt.Decoration.set(r)}var Wu=class extends kt.WidgetType{constructor(e){super(),Lr(this,"suggestion"),this.suggestion=e}toDOM(){let e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}},zu=t=>{let e=0;return kt.ViewPlugin.fromClass(class{async update(n){let r=n.state.doc;if(!n.docChanged)return;let i=++e;for await(let o of t(n.state)){if(i!=e)return;n.view.dispatch({effects:Ju.of({suggestion:o,doc:r})})}}})},Yu=class{constructor(){Lr(this,"decorations"),this.decorations=kt.Decoration.none}update(e){var n;let r=(n=e.state.field(Fa))==null?void 0:n.suggestion;if(!r){this.decorations=kt.Decoration.none;return}this.decorations=P2(e.view,r.display_suggestion)}},Td=kt.ViewPlugin.fromClass(Yu,{decorations:t=>t.decorations}),Zu=class{constructor(e,n){Lr(this,"suggestFn"),Lr(this,"keymap"),Lr(this,"completionId"),Lr(this,"run",r=>{var i,o;let u=(i=r.state.field(Fa))==null?void 0:i.suggestion;return u?(r.dispatch({...N2(r.state,u.complete_suggestion,r.state.selection.main.head,r.state.selection.main.head)}),(o=u.accept_hook)==null||o.call(u),(async()=>{if(this.suggestFn==null)return;let f=++this.completionId;for await(let d of this.suggestFn(r.state)){if(f!=this.completionId)return;r.dispatch({effects:Ju.of({suggestion:{complete_suggestion:d.complete_suggestion,display_suggestion:d.display_suggestion,accept_hook:d.accept_hook},doc:null})})}})(),!0):!1}),this.suggestFn=e,this.keymap=mn.Prec.highest(kt.keymap.of([{key:n,run:r=>this.run(r)}])),this.completionId=0}};function N2(t,e,n,r){return{...t.changeByRange(i=>{if(i==t.selection.main)return{changes:{from:n,to:r,insert:e},range:mn.EditorSelection.cursor(n+e.length)};let o=r-n;return!i.empty||o&&t.sliceDoc(i.from-o,i.from)!=t.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:mn.EditorSelection.cursor(i.from-o+e.length)}}),userEvent:"input.complete"}}function Md(t){return typeof t=="string"?{complete_suggestion:t,display_suggestion:t}:t}function L2(t){return async function*(e){let n=await t(e);if(typeof n=="string"||"complete_suggestion"in n){yield Md(n);return}for await(let r of n)yield Md(r)}}function Qu(t){let{delay:e=500,accept_shortcut:n="Tab"}=t,r=L2(t.fetchFn),{debounced:i,force:o}=Od(r,e);return{extension:n?[Fa,zu(i),Td,new Zu(t.continue_suggesting?r:null,n).keymap]:[Fa,zu(i),Td],force_fetch:o}}var Ca=class{constructor(e){this.force_fetch=()=>{};this.TYPING_DELAY=750;this.completionsOn=!1;this.plugin=e,this.prompts=new ct,this.debouncedComplete=(0,Br.debounce)(()=>this.force_fetch(),this.TYPING_DELAY,!0)}async*complete(){if(!this.completionsOn)return;let e=this.plugin.app.workspace.getActiveViewOfType(Br.MarkdownView);if(!e)return;let n=e.editor,r=n.getCursor(),o=n.getLine(r.line).substring(0,r.ch),u=o.length>0&&!o.endsWith(" "),f=n.getRange({line:0,ch:0},r),d=n.getRange(r,{line:n.lastLine(),ch:n.getLine(n.lastLine()).length}),p=await this.generateNextSentence(f,d),w=u?" "+p:p;yield{display_suggestion:w,complete_suggestion:w}}async generateNextSentence(e,n){let r={model:this.plugin.settings.completionsModelName,prompt:this.prompts.completionsPrompt({contentBeforeCursor:e,contentAfterCursor:n})};return(await this.plugin.geminiApi.generateModelResponse(r)).markdown.replace(/\n$/,"")}async setupCompletions(){let{extension:e,force_fetch:n}=Qu({fetchFn:()=>this.complete()});this.force_fetch=n,this.plugin.registerEditorExtension(e)}async setupCompletionsCommands(){try{this.plugin.addCommand({id:"gemini-scribe-toggle-completions",name:"Toggle completions",callback:()=>{this.completionsOn=!this.completionsOn,new Br.Notice(`Gemini Scribe Completions are now ${this.completionsOn?"enabled":"disabled"}.`),this.completionsOn&&this.force_fetch()}})}catch(e){console.error("Error setting up completion commands:",e)}}};var _a=ss(Ad(),1),Id=Symbol.for("Dexie"),Sa=globalThis[Id]||(globalThis[Id]=_a.default);if(_a.default.semVer!==Sa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_a.default.semVer} and ${Sa.semVer}`);var{liveQuery:xb,mergeRanges:Ob,rangesOverlap:Tb,RangeSet:Mb,cmp:Ab,Entity:Ib,PropModSymbol:Pb,PropModification:Nb,replacePrefix:Lb,add:Bb,remove:Rb}=Sa;var Pd=Sa;var ka=class{constructor(){this.dbQueue=[];this.isProcessingQueue=!1;this.lastProcessingStartTime=null;this.QUEUE_TIMEOUT=5e3;this.operationId=0}async enqueue(e,n){let r=n||e.name||"anonymous";return new Promise((i,o)=>{let u=async()=>{try{let f=await e();return i(f),f}catch(f){throw o(f),f}};this.dbQueue.push({operation:u,name:r}),this.processQueue()})}async processQueue(){if(this.isProcessingQueue)if(this.lastProcessingStartTime&&Date.now()-this.lastProcessingStartTime>this.QUEUE_TIMEOUT)this.isProcessingQueue=!1;else return;this.isProcessingQueue=!0,this.lastProcessingStartTime=Date.now();try{for(;this.dbQueue.length>0;){let e=++this.operationId,n=this.dbQueue.shift();if(!n)continue;let r=Date.now();try{let i=await n.operation();await new Promise(o=>setTimeout(o,0))}catch(i){throw console.error(`[Queue] Operation ${e}: ${n.name} failed:`,i),i}}}finally{this.isProcessingQueue=!1,this.lastProcessingStartTime=null}}};var xa=class{constructor(e,n){this.conversations=e;this.queue=n}async addConversation(e){return this.queue.enqueue(async()=>await this.conversations.add(e),"Add Conversation")}async getConversations(e){return this.queue.enqueue(async()=>await this.conversations.where("notePath").equals(e).toArray(),"Get Conversations")}async clearConversations(e){return this.queue.enqueue(async()=>await this.conversations.where("notePath").equals(e).delete(),"Clear Conversations")}async clearHistory(){return this.queue.enqueue(async()=>{try{return await this.conversations.clear(),!0}catch(e){return!1}},"Clear History")}async setup(){await this.queue.enqueue(async()=>{let e=await this.conversations.count();console.debug(`Database initialized with ${e} conversations`)},"Initialize Database")}};var Nd=require("obsidian"),Ld=require("crypto");async function Oa(t){let e=t.settings.historyFolder,n=t.app.vault.getAbstractFileByPath(e);if(n instanceof Nd.TFolder)return n;try{return await t.app.vault.createFolder(e)}catch(r){throw console.error(`Failed to create folder ${e}:`,r),r}}function el(t){return(0,Ld.createHash)("md5").update(t).digest("hex")}var Ta=class{constructor(e,n,r,i){this.conversations=e;this.queue=n;this.plugin=r;this.operations=i;this.lastExportChecksum=null;this.isImporting=!1;this.isExporting=!1;this.lastConversationCount=0}async clearHistory(){return this.operations.clearHistory()}async hasFileChanged(e){let n=el(e),r=n!==this.lastExportChecksum;return this.lastExportChecksum===null?console.debug("First import - no previous checksum"):console.debug(r?`File changed (previous: ${this.lastExportChecksum}, current: ${n})`:"File unchanged"),r}async exportDatabaseToVault(){return this.queue.enqueue(async()=>{if(this.isExporting){console.debug("Export operation is already in progress.");return}this.isExporting=!0;try{if(!this.plugin.settings.chatHistory)return;let e=await this.conversations.orderBy("notePath").toArray();if(e.length<this.lastConversationCount){console.error(`Preventing export: conversation count decreased from ${this.lastConversationCount} to ${e.length}`);return}if(e.length===0){let d=await this.checkExistingFile();if(d&&Object.keys(d.conversations).length>0){console.error("Preventing export of empty database over existing data");return}}this.lastConversationCount=e.length;let r={version:1,conversations:this.processConversations(e),metadata:{exportedAt:new Date().toISOString(),pluginVersion:this.plugin.manifest.version,conversationsCount:e.length}},i=JSON.stringify(r,null,2);this.lastExportChecksum=el(i),r.metadata.checksum=this.lastExportChecksum;let o=await Oa(this.plugin),u=`${o.path}/gemini-scribe-history.json`,f=`${o.path}/gemini-scribe-history.backup.json`;try{let d=await this.plugin.app.vault.adapter.read(u);await this.plugin.app.vault.adapter.write(f,d)}catch(d){}await this.plugin.app.vault.adapter.write(u,i),console.debug(`History export complete. Saved ${e.length} conversations`)}catch(e){throw console.error("Export failed:",e),e}finally{this.isExporting=!1}},"Export Database to Vault")}async checkExistingFile(){try{let n=`${(await Oa(this.plugin)).path}/gemini-scribe-history.json`,r=await this.plugin.app.vault.adapter.read(n);return JSON.parse(r)}catch(e){return null}}processConversations(e){return Object.fromEntries(Object.entries(e.reduce((n,r)=>{let{id:i,notePath:o,created_at:u,role:f,message:d,metadata:p}=r;n[o]||(n[o]=new Map);let y=`${u instanceof Date?u.getTime():new Date(u).getTime()}-${f}-${d}`;return n[o].has(y)||n[o].set(y,{notePath:o,created_at:u instanceof Date?u:new Date(u),role:f,message:d,metadata:p}),n},{})).map(([n,r])=>[n,Array.from(r.values())]))}async importDatabaseFromVault(){return this.queue.enqueue(async()=>{var e,n;if(this.isImporting)return console.warn("Import operation is already in progress."),!1;this.isImporting=!0;try{if(!this.plugin.settings.chatHistory)return console.debug("Chat history disabled, skipping import"),!1;try{let i=`${(await Oa(this.plugin)).path}/gemini-scribe-history.json`,o=await this.plugin.app.vault.adapter.read(i),u=JSON.parse(o);if(!await this.hasFileChanged(o))return console.debug("No changes in history file"),!1;if(console.debug("Importing history from vault..."),!await this.clearHistory())return console.error("Failed to clear history before import. Aborting import to prevent duplicates."),!1;for(let[d,p]of Object.entries(u.conversations)){let w=new Map;p.forEach(_=>{let V=`${new Date(_.created_at).getTime()}-${_.role}-${_.message}`;w.has(V)||w.set(V,{notePath:_.notePath,created_at:new Date(_.created_at),role:_.role,message:_.message,metadata:_.metadata})});let y=Array.from(w.values()).sort((_,M)=>_.created_at.getTime()-M.created_at.getTime());await this.conversations.bulkAdd(y)}return this.lastExportChecksum=(n=(e=u.metadata)==null?void 0:e.checksum)!=null?n:null,console.debug("History import complete"),!0}catch(r){return console.error("Inner import failed:",r),!1}}catch(r){return console.error("Outer import failed:",r),!1}finally{this.isImporting=!1}},"Import Database from Vault")}};var Ma=class{constructor(e){this.exporter=e;this.intervalId=null;this.EXPORT_INTERVAL=5*60*1e3}start(){this.intervalId||(this.exporter.exportDatabaseToVault(),this.intervalId=setInterval(()=>{this.exporter.exportDatabaseToVault()},this.EXPORT_INTERVAL))}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}};var tr=class extends Pd{constructor(n){super("GeminiDatabase");this.plugin=n;this.version(2).stores({conversations:"++id, notePath, [notePath+created_at], created_at, role, message"}),this.queue=new ka,this.operations=new xa(this.conversations,this.queue),this.exporter=new Ta(this.conversations,this.queue,n,this.operations),this.periodicExport=new Ma(this.exporter),this.addConversation=this.operations.addConversation.bind(this.operations),this.getConversations=this.operations.getConversations.bind(this.operations),this.clearConversations=this.operations.clearConversations.bind(this.operations),this.clearHistory=this.operations.clearHistory.bind(this.operations),this.exportDatabaseToVault=this.exporter.exportDatabaseToVault.bind(this.exporter),this.importDatabaseFromVault=this.exporter.importDatabaseFromVault.bind(this.exporter),this.open()}async setupDatabase(){try{await this.open(),await this.operations.setup(),this.plugin.settings.chatHistory&&(await this.importDatabaseFromVault()||console.debug("No existing history found or import failed"),this.periodicExport.start())}catch(n){throw console.error("Failed to setup database:",n),n}}async close(){try{this.periodicExport.stop(),this.plugin.settings.chatHistory&&await this.exportDatabaseToVault(),super.close()}catch(n){throw console.error("Error during database close:",n),n}}};var tl=require("obsidian"),Ii=class{constructor(e){this.plugin=e}async migrateHistory(){try{let e=new tr(this.plugin);await e.setupDatabase();let n=await this.plugin.app.vault.createFolder(this.plugin.settings.historyFolder).catch(()=>{}),r=this.plugin.app.vault.getFiles(),i={success:0,failed:0};for(let o of r)try{let u=await e.getConversations(o.path);u.length>0&&(await this.migrateFileHistory(o,u),i.success++)}catch(u){console.error(`Failed to migrate history for ${o.path}:`,u),i.failed++}new tl.Notice(`Migration complete: ${i.success} files migrated, ${i.failed} failed`),await e.close()}catch(e){throw console.error("Migration failed:",e),new tl.Notice("Failed to migrate chat history"),e}}async migrateFileHistory(e,n){var i,o;let r=n.sort((u,f)=>u.created_at.getTime()-f.created_at.getTime());for(let u of r)await this.plugin.history.appendHistoryForFile(e,{role:u.role,message:u.message,model:(i=u.metadata)==null?void 0:i.model,userMessage:(o=u.metadata)==null?void 0:o.userMessage})}};var Rr=require("obsidian"),B2={apiKey:"",chatModelName:"gemini-1.5-pro",summaryModelName:"gemini-1.5-flash",completionsModelName:"gemini-1.5-flash-8b",sendContext:!1,maxContextDepth:2,searchGrounding:!1,searchGroundingThreshold:.7,summaryFrontmatterKey:"summary",userName:"User",rewriteFiles:!1,chatHistory:!1,historyFolder:"gemini-scribe",showModelPicker:!1,databaseMigrated:!1},Aa=class extends Bd.Plugin{async onload(){await this.setupGeminiScribe(),this.ribbonIcon=this.addRibbonIcon("sparkles","Open Gemini Chat",()=>{this.activateView()}),this.registerView(mi,n=>this.geminiView=new Us(n,this)),this.addCommand({id:"gemini-scribe-open-view",name:"Open Gemini Chat",callback:()=>this.activateView()}),this.addCommand({id:"migrate-history-to-markdown",name:"Migrate Database History to Markdown",callback:async()=>{new Rr.Notice("Starting history migration..."),await new Ii(this).migrateHistory()}}),this.addCommand({id:"clear-old-database",name:"Clear Old Database History",callback:async()=>{try{let n=new tr(this);await n.setupDatabase(),await n.clearHistory(),await n.close(),new Rr.Notice("Successfully cleared old database history")}catch(n){console.error("Failed to clear old database:",n),new Rr.Notice("Failed to clear old database history")}}}),this.addSettingTab(new ti(this.app,this)),this.app.workspace.onLayoutReady(()=>this.onLayoutReady())}async setupGeminiScribe(){await this.loadSettings(),this.geminiApi=new Qs(this),this.gfile=new Nr(this),this.history=new Ea(this),await this.history.setupHistoryCommands(),this.app.workspace.layoutReady&&await this.history.onLayoutReady,this.completions=new Ca(this),await this.completions.setupCompletions(),await this.completions.setupCompletionsCommands(),this.summarizer=new js(this),await this.summarizer.setupSummarizaitonCommand()}async activateView(){let{workspace:n}=this.app,r=null,i=n.getLeavesOfType(mi);i.length>0?(r=i[0],await n.revealLeaf(r)):(r=n.getLeftLeaf(!1),r?(await r.setViewState({type:mi,active:!0}),await n.revealLeaf(r)):console.error("Could not find a leaf to open the view"))}async onLayoutReady(){if(await this.history.onLayoutReady(),!this.settings.databaseMigrated)try{let n=new tr(this);await n.setupDatabase();let r=await n.conversations.count();await n.close(),r>0?(new Rr.Notice("Gemini Scribe: Starting automatic history migration..."),await new Ii(this).migrateHistory(),this.settings.databaseMigrated=!0,await this.saveSettings()):(this.settings.databaseMigrated=!0,await this.saveSettings())}catch(n){console.error("Gemini Scribe: Automatic migration failed:",n),new Rr.Notice("Gemini Scribe: Failed to automatically migrate chat history. You can try manually migrating from the command palette.")}}async loadSettings(){this.settings=Object.assign({},B2,await this.loadData())}async saveSettings(){await this.saveData(this.settings),await this.setupGeminiScribe()}onunload(){var n,r;console.debug("Unloading Gemini Scribe"),(n=this.history)==null||n.onUnload(),(r=this.ribbonIcon)==null||r.remove()}};
/*! Bundled license information:

dexie/dist/dexie.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)

@google/generative-ai/dist/index.mjs:
  (**
   * @license
   * Copyright 2024 Google LLC
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *   http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *)
*/


/* nosourcemap */